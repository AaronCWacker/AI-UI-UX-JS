<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>EVO-DRIVE: MN-WI Protocol</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');

        body { margin: 0; overflow: hidden; background: #050510; font-family: 'Orbitron', sans-serif; touch-action: none; user-select: none; }
        
        /* LAYOUT & UI */
        #game-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
        #ui-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; display: flex; flex-direction: column; justify-content: space-between; z-index: 10; }

        /* EDITOR SCREEN */
        #editor-screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #0b0b1a; z-index: 100; display: flex; flex-direction: column; align-items: center; justify-content: center; pointer-events: auto; }
        #canvas-container { border: 2px solid #00ffff; box-shadow: 0 0 20px #00ffff; margin: 20px; background: rgba(0,20,40,0.8); }
        
        /* GARAGE / UPGRADE SCREEN */
        #garage-screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 90; display: none; flex-direction: column; align-items: center; justify-content: center; pointer-events: auto; color: white; }
        .upgrade-row { display: flex; align-items: center; gap: 20px; margin: 10px 0; width: 80%; max-width: 600px; background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px; border-left: 4px solid #00ffff; }
        .stat-name { width: 150px; text-align: left; font-weight: bold; color: #00ffff; }
        .stat-bar-container { flex-grow: 1; height: 10px; background: #333; border-radius: 5px; overflow: hidden; }
        .stat-fill { height: 100%; background: linear-gradient(90deg, #00ffff, #ff00de); width: 0%; transition: width 0.3s; }
        .upgrade-btn { background: #ff00de; border: none; color: white; padding: 10px 20px; font-family: 'Orbitron'; font-weight: bold; cursor: pointer; clip-path: polygon(10% 0, 100% 0, 100% 70%, 90% 100%, 0 100%, 0 30%); }
        .upgrade-btn:disabled { background: #555; cursor: not-allowed; }

        /* HUD */
        #hud-top { padding: 20px; display: flex; justify-content: space-between; text-shadow: 0 0 10px #00ffff; color: white; font-size: 18px; pointer-events: none; }
        .xp-bar-container { position: absolute; top: 0; left: 0; width: 100%; height: 6px; background: #222; }
        .xp-fill { height: 100%; background: #00ff00; width: 0%; box-shadow: 0 0 10px #00ff00; transition: width 0.5s; }

        /* NOTIFICATIONS */
        #msg-area { position: absolute; top: 20%; width: 100%; text-align: center; pointer-events: none; }
        .pop-msg { font-size: 32px; font-weight: 900; color: #fff; text-shadow: 0 0 15px #ff00de; animation: popUp 1.5s forwards; opacity: 0; transform: translateY(20px); }

        @keyframes popUp {
            0% { opacity: 0; transform: translateY(20px) scale(0.8); }
            20% { opacity: 1; transform: translateY(0) scale(1.1); }
            100% { opacity: 0; transform: translateY(-50px) scale(1); }
        }

        /* CONTROLS */
        .touch-zone { position: absolute; bottom: 0; width: 50%; height: 100%; z-index: 50; pointer-events: auto; }
        .left-zone { left: 0; }
        .right-zone { right: 0; }
        
        .main-btn { padding: 15px 40px; font-size: 20px; background: #00ffff; color: #000; border: none; font-weight: 900; cursor: pointer; font-family: 'Orbitron'; margin-top: 20px; box-shadow: 0 0 20px #00ffff; transition: all 0.2s; }
        .main-btn:hover { background: #fff; transform: scale(1.05); }

    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>

    <div id="game-layer"></div>

    <div id="editor-screen">
        <h1 style="color:#00ffff; text-shadow:0 0 20px #00ffff; margin-bottom: 5px;">EVO-DRIVE</h1>
        <p style="color:#aaa; font-size:12px;">DRAW SIDE PROFILE (FRONT IS RIGHT)</p>
        <div id="canvas-container">
            <canvas id="editor-canvas" width="600" height="300"></canvas>
        </div>
        <div style="display:flex; gap:20px;">
            <button class="main-btn" style="background:#444; color:#fff; box-shadow:none;" onclick="resetEditor()">CLEAR</button>
            <button class="main-btn" onclick="goToGarage()">BUILD CHASSIS</button>
        </div>
    </div>

    <div id="garage-screen">
        <h2 style="color:#fff;">GARAGE // LEVEL <span id="p-level" style="color:#00ff00;">1</span></h2>
        <div style="margin-bottom:20px;">CREDITS: <span id="p-credits" style="color:#ff00de;">0</span> CR</div>
        
        <div class="upgrade-row">
            <div class="stat-name">ENGINE (SPD)</div>
            <div class="stat-bar-container"><div id="bar-speed" class="stat-fill"></div></div>
            <button id="btn-speed" class="upgrade-btn" onclick="buyUpgrade('speed')">+200 CR</button>
        </div>

        <div class="upgrade-row">
            <div class="stat-name">AI CHIP (HND)</div>
            <div class="stat-bar-container"><div id="bar-handling" class="stat-fill"></div></div>
            <button id="btn-handling" class="upgrade-btn" onclick="buyUpgrade('handling')">+200 CR</button>
        </div>

        <div class="upgrade-row">
            <div class="stat-name">JETS (AIR)</div>
            <div class="stat-bar-container"><div id="bar-aero" class="stat-fill"></div></div>
            <button id="btn-aero" class="upgrade-btn" onclick="buyUpgrade('aero')">+200 CR</button>
        </div>

        <button class="main-btn" onclick="launchGame()">INITIATE DRIVE</button>
        <div style="margin-top:10px; font-size:12px; color:#666;">TAP SCREEN LEFT/RIGHT TO STEER</div>
    </div>

    <div id="ui-layer">
        <div class="xp-bar-container"><div id="xp-bar" class="xp-fill"></div></div>
        <div id="hud-top">
            <div id="hud-score">DIST: 0.0 km</div>
            <div id="hud-multi">x1.0</div>
        </div>
        <div id="msg-area"></div>
        
        <div id="touch-controls" style="display:none;">
            <div class="touch-zone left-zone" ontouchstart="setSteer(-1)" ontouchend="setSteer(0)" onmousedown="setSteer(-1)" onmouseup="setSteer(0)"></div>
            <div class="touch-zone right-zone" ontouchstart="setSteer(1)" ontouchend="setSteer(0)" onmousedown="setSteer(1)" onmouseup="setSteer(0)"></div>
        </div>
    </div>

<script>
/** * AUDIO ENGINE (Procedural Synth - Safe Mode) */
const Audio = {
    ctx: null,
    active: false,
    
    init: function() {
        try {
            window.AudioContext = window.AudioContext || window.webkitAudioContext;
            this.ctx = new AudioContext();
            this.active = true;
        } catch(e) {
            console.log("Audio disabled");
            this.active = false;
        }
    },

    playTone: function(freq, type, dur, vol=0.1) {
        if(!this.active) return;
        try {
            if(this.ctx.state === 'suspended') this.ctx.resume();
            const osc = this.ctx.createOscillator();
            const gain = this.ctx.createGain();
            osc.type = type;
            osc.frequency.setValueAtTime(freq, this.ctx.currentTime);
            
            gain.gain.setValueAtTime(vol, this.ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + dur);
            
            osc.connect(gain);
            gain.connect(this.ctx.destination);
            osc.start();
            osc.stop(this.ctx.currentTime + dur);
        } catch(e) {}
    },

    engineHum: null,
    engineGain: null,
    
    startEngine: function() {
        if(!this.active) return;
        try {
            if(this.engineHum) { this.engineHum.stop(); this.engineHum = null; }
            this.engineHum = this.ctx.createOscillator();
            this.engineGain = this.ctx.createGain();
            this.engineHum.type = 'sawtooth';
            this.engineHum.frequency.value = 50;
            this.engineGain.gain.value = 0.05;
            this.engineHum.connect(this.engineGain);
            this.engineGain.connect(this.ctx.destination);
            this.engineHum.start();
        } catch(e) {}
    },
    
    updateEngine: function(speedRatio) {
        if(this.engineHum) {
            this.engineHum.frequency.linearRampToValueAtTime(50 + (speedRatio * 100), this.ctx.currentTime + 0.1);
        }
    },
    
    sfx: {
        collect: () => {
            Audio.playTone(880, 'sine', 0.1, 0.1);
            setTimeout(() => Audio.playTone(1760, 'sine', 0.2, 0.1), 50);
        },
        jump: () => {
            if(!Audio.active) return;
            const osc = Audio.ctx.createOscillator();
            const gain = Audio.ctx.createGain();
            osc.frequency.setValueAtTime(150, Audio.ctx.currentTime);
            osc.frequency.linearRampToValueAtTime(600, Audio.ctx.currentTime + 0.5);
            gain.gain.setValueAtTime(0.2, Audio.ctx.currentTime);
            gain.gain.linearRampToValueAtTime(0, Audio.ctx.currentTime + 0.5);
            osc.connect(gain); gain.connect(Audio.ctx.destination);
            osc.start(); osc.stop(Audio.ctx.currentTime + 0.5);
        },
        crash: () => {
            if(!Audio.active) return;
            const osc = Audio.ctx.createOscillator();
            const gain = Audio.ctx.createGain();
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(100, Audio.ctx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(10, Audio.ctx.currentTime + 0.5);
            gain.gain.setValueAtTime(0.3, Audio.ctx.currentTime);
            gain.gain.linearRampToValueAtTime(0, Audio.ctx.currentTime + 0.5);
            osc.connect(gain); gain.connect(Audio.ctx.destination);
            osc.start(); osc.stop(Audio.ctx.currentTime + 0.5);
        },
        levelUp: () => {
            [440, 554, 659, 880].forEach((f, i) => setTimeout(() => Audio.playTone(f, 'square', 0.4, 0.1), i*100));
        }
    }
};

/** * PLAYER & EVOLUTION SYSTEM */
const Player = {
    level: 1, xp: 0, xpToNext: 1000, credits: 0,
    stats: { speed: 1, handling: 1, aero: 1 },
    
    load: function() {
        try {
            const data = localStorage.getItem('evoDriveSave_v2');
            if(data) {
                const parsed = JSON.parse(data);
                this.level = parsed.level || 1;
                this.xp = parsed.xp || 0;
                this.credits = parsed.credits || 0;
                this.stats = parsed.stats || { speed: 1, handling: 1, aero: 1 };
                this.xpToNext = this.level * 1000;
            }
        } catch(e) { console.log("Save load fail"); }
        this.updateUI();
    },
    
    save: function() {
        localStorage.setItem('evoDriveSave_v2', JSON.stringify({
            level: this.level, xp: this.xp, credits: this.credits, stats: this.stats
        }));
        this.updateUI();
    },
    
    gainXP: function(amount) {
        this.xp += amount;
        this.credits += Math.floor(amount / 2);
        if(this.xp >= this.xpToNext) {
            this.level++;
            this.xp = 0;
            this.xpToNext = Math.floor(this.xpToNext * 1.5);
            Audio.sfx.levelUp();
            showMsg(`LEVEL ${this.level} REACHED!`, '#00ff00');
        }
        const pct = Math.min(100, (this.xp / this.xpToNext) * 100);
        document.getElementById('xp-bar').style.width = pct + '%';
        document.getElementById('hud-score').innerText = `CR: ${this.credits}`;
    },
    
    buy: function(stat) {
        const cost = this.stats[stat] * 200;
        if(this.credits >= cost && this.stats[stat] < 10) {
            this.credits -= cost;
            this.stats[stat]++;
            this.save();
            Audio.sfx.collect();
        }
    },
    
    updateUI: function() {
        document.getElementById('p-level').innerText = this.level;
        document.getElementById('p-credits').innerText = this.credits;
        ['speed', 'handling', 'aero'].forEach(s => {
            const val = this.stats[s];
            const cost = val * 200;
            const bar = document.getElementById(`bar-${s}`);
            const btn = document.getElementById(`btn-${s}`);
            bar.style.width = (val * 10) + '%';
            if(val >= 10) { btn.innerText = "MAXED"; btn.disabled = true; } 
            else { btn.innerText = `UPGRADE (${cost} CR)`; btn.disabled = this.credits < cost; }
        });
    }
};

/** * EDITOR CANVAS */
const editor = {
    c: document.getElementById('editor-canvas'),
    points: [],
    
    init: function() {
        this.ctx = this.c.getContext('2d');
        this.c.addEventListener('mousedown', e => this.addPoint(e));
        this.c.addEventListener('touchstart', e => { e.preventDefault(); this.addPoint(e.touches[0]); }, {passive:false});
        this.points = [{x:50, y:200}, {x:100, y:180}, {x:300, y:180}, {x:400, y:200}, {x:50, y:200}];
        this.draw();
    },
    
    addPoint: function(e) {
        const r = this.c.getBoundingClientRect();
        const x = Math.round((e.clientX - r.left)/10)*10;
        const y = Math.round((e.clientY - r.top)/10)*10;
        this.points.push({x,y});
        this.draw();
    },
    
    draw: function() {
        const ctx = this.ctx;
        ctx.fillStyle = '#0b0b1a';
        ctx.fillRect(0,0,600,300);
        ctx.strokeStyle = '#223';
        ctx.beginPath();
        for(let i=0; i<600; i+=20) { ctx.moveTo(i,0); ctx.lineTo(i,300); }
        for(let i=0; i<300; i+=20) { ctx.moveTo(0,i); ctx.lineTo(600,i); }
        ctx.stroke();
        ctx.strokeStyle = '#00ffff';
        ctx.beginPath(); ctx.moveTo(0,250); ctx.lineTo(600,250); ctx.stroke();
        
        if(this.points.length > 0) {
            ctx.fillStyle = 'rgba(0,255,255,0.2)';
            ctx.strokeStyle = '#ff00de';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(this.points[0].x, this.points[0].y);
            for(let i=1; i<this.points.length; i++) ctx.lineTo(this.points[i].x, this.points[i].y);
            ctx.fill();
            ctx.stroke();
        }
    }
};

function resetEditor() { editor.points = []; editor.draw(); }
function goToGarage() {
    if(editor.points.length < 3) return alert("Draw a car shape first!");
    document.getElementById('editor-screen').style.display = 'none';
    document.getElementById('garage-screen').style.display = 'flex';
    Player.load();
}
function buyUpgrade(stat) { Player.buy(stat); }
function launchGame() {
    Audio.init();
    Audio.startEngine();
    document.getElementById('garage-screen').style.display = 'none';
    document.getElementById('touch-controls').style.display = 'block';
    Game.init();
}

/** * 3D GAME ENGINE */
const Game = {
    scene: null, camera: null, renderer: null,
    car: null,
    objects: [],
    speed: 0, laneX: 0, flying: false, yVel: 0, steerInput: 0, distance: 0, active: false,
    colors: [0x050510, 0x1a0510, 0x051a10, 0x10051a],
    
    init: function() {
        if(this.renderer) { this.reset(); return; }
        
        this.scene = new THREE.Scene();
        this.scene.background = new THREE.Color(this.colors[0]);
        this.scene.fog = new THREE.FogExp2(this.colors[0], 0.02);
        
        this.camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 200);
        this.camera.position.set(0, 8, -12);
        this.camera.lookAt(0, 0, 15);
        
        this.renderer = new THREE.WebGLRenderer({antialias:true});
        this.renderer.setSize(window.innerWidth, window.innerHeight);
        this.renderer.shadowMap.enabled = true;
        document.getElementById('game-layer').appendChild(this.renderer.domElement);
        
        const hemi = new THREE.HemisphereLight(0xffffff, 0x000000, 0.6);
        this.scene.add(hemi);
        const dir = new THREE.DirectionalLight(0xffffff, 0.8);
        dir.position.set(10, 20, -10);
        dir.castShadow = true;
        this.scene.add(dir);
        
        this.buildRoad();
        this.buildCar();
        
        this.active = true;
        this.animate();
    },
    
    buildRoad: function() {
        const grid = new THREE.GridHelper(200, 200, 0x00ffff, 0x222233);
        grid.position.y = -0.5;
        this.scene.add(grid);
        
        const geo = new THREE.PlaneGeometry(16, 400);
        const mat = new THREE.MeshStandardMaterial({color: 0x111111, roughness: 0.1});
        const road = new THREE.Mesh(geo, mat);
        road.rotation.x = -Math.PI/2;
        road.position.z = 100;
        road.receiveShadow = true;
        this.scene.add(road);
    },
    
    buildCar: function() {
        if(this.car) this.scene.remove(this.car);
        this.car = new THREE.Group();
        
        let shape;
        try {
            shape = new THREE.Shape();
            const pts = editor.points;
            if(!pts || pts.length < 3) throw "No points";
            const scale = 0.012; 
            
            let cx=0, cy=0;
            pts.forEach(p=>{cx+=p.x; cy+=p.y});
            cx/=pts.length; cy/=pts.length;
            
            shape.moveTo((pts[0].x-cx)*scale, -(pts[0].y-cy)*scale);
            for(let i=1; i<pts.length; i++) shape.lineTo((pts[i].x-cx)*scale, -(pts[i].y-cy)*scale);
        } catch(e) {
            // Safe fallback mesh
            shape = new THREE.Shape();
            shape.moveTo(-0.5, 0); shape.lineTo(0.5, 0); shape.lineTo(0.5, 0.5); shape.lineTo(-0.5, 0.5);
        }

        const extrudeSettings = { depth: 1.5, bevelEnabled: true, bevelSegments: 2, bevelSize: 0.1, bevelThickness: 0.1 };
        const geo = new THREE.ExtrudeGeometry(shape, extrudeSettings);
        geo.center(); 
        
        // Car Color based on speed
        let carColor = 0xff00de; 
        if(Player.stats.speed > 3) carColor = 0xffaa00;
        if(Player.stats.speed > 7) carColor = 0x00ff00;
        
        const mat = new THREE.MeshStandardMaterial({color: carColor, metalness: 0.8, roughness: 0.2});
        const mesh = new THREE.Mesh(geo, mat);
        mesh.rotation.y = -Math.PI/2;
        this.car.add(mesh);
        
        const glowGeo = new THREE.BoxGeometry(0.5, 0.2, 0.2);
        const glowMat = new THREE.MeshBasicMaterial({color: 0x00ffff});
        const glow = new THREE.Mesh(glowGeo, glowMat);
        glow.position.set(-0.8, 0, 0);
        this.car.add(glow);
        
        this.car.position.y = 0.5;
        this.scene.add(this.car);
    },
    
    reset: function() {
        this.objects.forEach(o => this.scene.remove(o));
        this.objects = [];
        this.speed = 0;
        this.distance = 0;
        this.active = true;
        this.car.position.set(0, 0.5, 0);
        this.laneX = 0;
        Player.updateUI();
        Audio.startEngine();
    },
    
    spawnObject: function() {
        const type = Math.random();
        const obj = new THREE.Group();
        const xPos = [-4, 0, 4][Math.floor(Math.random()*3)];
        
        if(type < 0.6) {
            // TRAFFIC
            const geo = new THREE.BoxGeometry(1.5, 1, 3);
            const mat = new THREE.MeshStandardMaterial({color: 0x555555});
            const mesh = new THREE.Mesh(geo, mat);
            mesh.position.y = 0.5;
            obj.userData = { type: 'traffic' };
            obj.add(mesh);
            const tGeo = new THREE.BoxGeometry(1, 0.2, 0.1);
            const tMat = new THREE.MeshBasicMaterial({color: 0xff0000});
            const tMesh = new THREE.Mesh(tGeo, tMat);
            tMesh.position.set(0, 0.5, -1.5);
            obj.add(tMesh);
            
        } else if (type < 0.8) {
            // XP
            const geo = new THREE.OctahedronGeometry(0.5);
            const mat = new THREE.MeshBasicMaterial({color: 0x00ff00, wireframe:true});
            const mesh = new THREE.Mesh(geo, mat);
            mesh.position.y = 1;
            obj.userData = { type: 'xp' };
            obj.add(mesh);
            
        } else {
            // JUMP
            const geo = new THREE.CylinderGeometry(0.5, 0.5, 1.5, 16);
            const mat = new THREE.MeshBasicMaterial({color: 0x00ffff});
            const mesh = new THREE.Mesh(geo, mat);
            mesh.rotation.z = Math.PI/2;
            mesh.position.y = 0.5;
            obj.userData = { type: 'jump' };
            obj.add(mesh);
        }
        
        obj.position.set(xPos, 0, 150);
        this.scene.add(obj);
        this.objects.push(obj);
    },
    
    update: function() {
        if(!this.active) return;
        
        const maxSpeed = 0.8 + (Player.stats.speed * 0.1);
        if(this.speed < maxSpeed) this.speed += 0.01;
        
        Audio.updateEngine(this.speed / 2);
        
        const handleSpeed = 0.05 + (Player.stats.handling * 0.02);
        if(this.steerInput !== 0) this.laneX += this.steerInput * handleSpeed * 3;
        this.laneX = Math.max(-6, Math.min(6, this.laneX));
        
        this.car.position.x += (this.laneX - this.car.position.x) * handleSpeed;
        this.car.rotation.z = (this.car.position.x - this.laneX) * 0.3;
        
        if(this.flying) {
            this.car.position.y += this.yVel;
            this.yVel -= 0.02;
            if(this.car.position.y <= 0.5) {
                this.car.position.y = 0.5;
                this.flying = false;
            }
        }
        
        for(let i=this.objects.length-1; i>=0; i--) {
            let o = this.objects[i];
            let approach = this.speed;
            if(o.userData.type === 'traffic') approach = this.speed - 0.5;
            o.position.z -= approach;
            if(o.userData.type !== 'traffic') o.rotation.y += 0.1;
            
            if(o.position.z < -10) {
                this.scene.remove(o);
                this.objects.splice(i,1);
                if(o.userData.type === 'traffic') {
                    Player.gainXP(10); 
                    showMsg("OPTIMAL DISTANCE", "cyan");
                }
                continue;
            }
            
            const dx = Math.abs(this.car.position.x - o.position.x);
            const dz = Math.abs(this.car.position.z - o.position.z);
            const dy = Math.abs(this.car.position.y - o.position.y);
            
            if(dz < 2 && dx < 1.5 && dy < 1.5) {
                if(o.userData.type === 'xp') {
                    Player.gainXP(50);
                    Audio.sfx.collect();
                    this.scene.remove(o);
                    this.objects.splice(i,1);
                    
                } else if (o.userData.type === 'jump') {
                    this.yVel = 0.5 + (Player.stats.aero * 0.1); 
                    this.flying = true;
                    Audio.sfx.jump();
                    Player.gainXP(100);
                    showMsg("AI LIFT ENGAGED", "#00ffff");
                    this.scene.remove(o);
                    this.objects.splice(i,1);
                    
                } else if (o.userData.type === 'traffic') {
                    Audio.sfx.crash();
                    this.gameOver();
                }
            }
        }
        
        if(Math.random() < 0.03) this.spawnObject();
        this.camera.position.x += (this.car.position.x * 0.5 - this.camera.position.x) * 0.1;
        this.distance += this.speed;
        if(this.distance % 100 < 1) Player.gainXP(1);
        
        const biome = Math.floor(this.distance / 1000) % this.colors.length;
        this.scene.background.lerp(new THREE.Color(this.colors[biome]), 0.01);
        this.scene.fog.color.copy(this.scene.background);
    },
    
    animate: function() {
        requestAnimationFrame(() => this.animate());
        this.update();
        this.renderer.render(this.scene, this.camera);
    },
    
    gameOver: function() {
        this.active = false;
        Player.save();
        document.getElementById('touch-controls').style.display = 'none';
        document.getElementById('garage-screen').style.display = 'flex';
        // Ensure garage is on top
        document.getElementById('garage-screen').style.zIndex = 200;
    }
};

function setSteer(v) { Game.steerInput = v; }
function showMsg(txt, col) {
    const el = document.createElement('div');
    el.className = 'pop-msg';
    el.innerText = txt;
    el.style.color = col;
    document.getElementById('msg-area').appendChild(el);
    setTimeout(() => el.remove(), 1500);
}

// Start Editor
editor.init();
</script>
</body>
</html>
