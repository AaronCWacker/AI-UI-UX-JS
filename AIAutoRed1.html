<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Red Dead â€“ iPad Wild West</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@master/dist/aframe-extras.min.js"></script>

<style>
  body{margin:0;overflow:hidden;font-family:Courier New,monospace;background:#000}
  #ui,#msg{position:absolute;top:20px;left:20px;color:#fff;background:rgba(0,0,0,.6);padding:12px;border-radius:8px;font-size:18px;z-index:100;pointer-events:none}
  #msg{top:auto;bottom:20px;left:20px;color:#ffcc00;max-width:90%}
  #crosshair{position:absolute;top:50%;left:50%;width:20px;height:20px;margin:-10px 0 0 -10px;border:2px solid #ffcc00;border-radius:50%;z-index:99}
  button{margin-top:8px;padding:10px 16px;background:#8B4513;color:#fff;border:none;border-radius:5px;cursor:pointer;font-weight:bold;font-size:18px}
  button:hover{background:#A0522D}
  #https-warning{position:fixed;top:0;left:0;width:100%;height:100%;background:#000;color:#ff0;text-align:center;padding-top:20%;font-size:20px;z-index:999}
</style>
</head>
<body>

<!-- HTTPS Warning (iOS requires HTTPS for mic) -->
<div id="https-warning" style="display:none">
  <h2>HTTPS Required on iPad</h2>
  <p>This game needs <b>HTTPS</b> for voice commands.</p>
  <p>Please open this file from a secure server (e.g. GitHub Pages, Netlify, or local HTTPS tunnel).</p>
</div>

<div id="ui">
  Health: <span id="health">100</span>% |
  Ammo: <span id="ammo">6</span>/6 |
  Score: <span id="score">0</span>
</div>
<div id="msg">
  <strong>Voice:</strong> "shoot", "reload", "ride", "stop"<br>
  <strong>Move:</strong> WASD | <strong>Look:</strong> Drag Screen | <strong>Shoot:</strong> Tap
  <button id="startBtn">Start Game</button>
</div>
<div id="crosshair"></div>

<a-scene 
  background="color:#87CEEB" 
  embedded 
  physics="debug:false" 
  style="width:100vw;height:100vh"
  renderer="antialias: true"
>

  <!-- Player (iPad: touch look + WASD) -->
  <a-entity id="player" 
    camera 
    look-controls="touchEnabled: true; pointerLockEnabled: false"
    wasd-controls="acceleration:30" 
    position="0 1.6 5"
  >
    <a-entity cursor position="0 0 -0.5"
              geometry="primitive:ring;radiusInner:0.02;radiusOuter:0.03"
              material="color:#ffcc00;shader:flat"></a-entity>
  </a-entity>

  <!-- Ground with HTTPS grass -->
  <a-plane class="ground" position="0 0 0" rotation="-90 0 0"
           width="100" height="100" color="#D2B48C"
           src="https://cdn.jsdelivr.net/gh/mrdoob/three.js@master/examples/textures/terrain/grasslight-big.jpg"
           repeat="10 10" roughness="0.9"></a-plane>

  <!-- Lights -->
  <a-light type="directional" intensity="0.8" position="10 20 10" castShadow></a-light>
  <a-light type="ambient" intensity="0.4"></a-light>
  <a-sky color="#87CEEB"></a-sky>

  <!-- Cactus 1 -->
  <a-entity class="shootable" position="-5 1 -10">
    <a-cylinder height="2" radius="0.3" color="#228B22"></a-cylinder>
    <a-cylinder height="0.8" radius="0.4" position="0 1.4 0" color="#228B22"></a-cylinder>
    <a-box position="0 0.5 0" width="0.1" height="1" depth="0.1" color="#8B4513"></a-box>
  </a-entity>

  <!-- Cactus 2 -->
  <a-entity class="shootable" position="8 1 -15">
    <a-cylinder height="1.8" radius="0.25" color="#228B22"></a-cylinder>
    <a-cylinder height="0.7" radius="0.35" position="0.5 1.2 0" color="#228B22"></a-cylinder>
    <a-cylinder height="0.7" radius="0.35" position="-0.5 1.2 0" color="#228B22"></a-cylinder>
  </a-entity>

  <!-- Outlaw -->
  <a-entity id="outlaw" class="shootable" position="0 1.6 -20">
    <a-box depth="0.6" height="1.8" width="0.8" color="#333"></a-box>
    <a-cone position="0 1.3 0" radius-bottom="0.4" height="0.6" color="#FDBCB4"></a-cone>
    <a-cylinder position="0 0.4 0" radius="0.25" height="0.8" color="#8B4513"></a-cylinder>
    <a-sphere position="0 1.6 0.25" radius="0.2" color="#FDBCB4"></a-sphere>
    <a-text value="WANTED" color="#FF4500" align="center" position="0 2.3 0" scale="2 2 2"></a-text>
  </a-entity>

  <!-- Horse -->
  <a-entity id="horse" position="-10 0.8 -8">
    <a-box depth="2.5" height="1.2" width="1" color="#8B4513" position="0 0.6 0"></a-box>
    <a-box depth="0.4" height="1.4" width="0.6" color="#8B4513" position="0.8 0.7 0"></a-box>
    <a-box depth="0.4" height="1.4" width="0.6" color="#8B4513" position="-0.8 0.7 0"></a-box>
    <a-cylinder rotation="0 0 90" radius="0.3" height="1.2" color="#333" position="1.1
