<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Angel Tarot Card App - Cosmic Edition</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
      color: #fff;
      overflow: hidden;
      height: 100vh;
    }

    #start-screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: radial-gradient(circle, #1a1a2e 0%, #0c0c0c 100%);
      z-index: 1000;
    }

    #play-button {
      font-size: 4rem;
      background: linear-gradient(45deg, #FFD700, #FFA500);
      border: none;
      border-radius: 50%;
      width: 200px;
      height: 200px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 0 50px rgba(255, 215, 0, 0.5);
    }

    #play-button:hover {
      transform: scale(1.1);
      box-shadow: 0 0 80px rgba(255, 215, 0, 0.8);
    }

    #main-container {
      display: none;
      width: 100vw;
      height: 100vh;
      position: relative;
    }

    #three-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
    }

    #ui-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 10;
      pointer-events: none;
    }

    #clock-container {
      position: absolute;
      top: 20px;
      right: 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      pointer-events: all;
    }

    .clock-button {
      background: rgba(255, 215, 0, 0.2);
      border: 2px solid #FFD700;
      color: #FFD700;
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }

    .clock-button:hover {
      background: rgba(255, 215, 0, 0.4);
      transform: scale(1.05);
    }

    #function-panel {
      position: absolute;
      top: 20px;
      left: 20px;
      display: flex;
      flex-direction: column;
      gap: 15px;
      pointer-events: all;
    }

    .function-button {
      background: rgba(0, 0, 0, 0.7);
      border: 2px solid #888;
      color: #fff;
      padding: 12px 20px;
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      font-size: 16px;
      min-width: 200px;
    }

    .function-button:hover {
      border-color: #FFD700;
      color: #FFD700;
      transform: translateX(10px);
    }

    .function-button.active {
      background: rgba(255, 215, 0, 0.3);
      border-color: #FFD700;
      color: #FFD700;
    }

    #card-display {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 300px;
      display: flex;
      justify-content: space-around;
      align-items: center;
      background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
      pointer-events: all;
    }

    .card-slot {
      width: 30%;
      height: 250px;
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid #444;
      border-radius: 15px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
    }

    .card-slot:hover {
      border-color: #FFD700;
      transform: translateY(-10px);
      box-shadow: 0 20px 40px rgba(255, 215, 0, 0.3);
    }

    .card-slot.filled {
      background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 165, 0, 0.2));
      border-color: #FFD700;
    }

    .card-title {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      font-weight: bold;
      color: #FFD700;
      font-size: 14px;
    }

    .card-content {
      text-align: center;
      padding: 20px;
    }

    .card-name {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 10px;
      color: #FFD700;
    }

    .card-description {
      font-size: 12px;
      color: #ccc;
      margin-bottom: 10px;
    }

    .card-virtue {
      font-size: 10px;
      color: #aaa;
      font-style: italic;
    }

    #message-system {
      position: absolute;
      bottom: 320px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.8);
      border: 1px solid #FFD700;
      border-radius: 10px;
      padding: 15px;
      max-width: 500px;
      text-align: center;
      backdrop-filter: blur(10px);
      pointer-events: all;
      display: none;
    }

    .cosmic-particle {
      position: absolute;
      width: 2px;
      height: 2px;
      background: #FFD700;
      border-radius: 50%;
      animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
    }

    .planetary-info {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.8);
      border: 1px solid #FFD700;
      border-radius: 10px;
      padding: 20px;
      display: none;
      pointer-events: all;
      backdrop-filter: blur(10px);
    }

    /* Game Overlays */
    .game-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      z-index: 1000;
      display: none;
      padding: 20px;
      overflow: auto;
    }

    .game-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .close-game {
      background: #ff4444;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 16px;
    }

    .close-game:hover {
      background: #ff6666;
    }

    /* Saints Tarot Styling */
    #saints-game {
      font-family: 'Lora', serif;
    }

    #saints-game h1 {
      color: #FFD700;
      text-align: center;
      margin-bottom: 20px;
    }

    #saints-controls {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
      justify-content: center;
    }

    #saints-controls button {
      padding: 0.8rem 1.5rem;
      font-size: 1rem;
      border: 2px solid #FFD700;
      background-color: transparent;
      color: #FFD700;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    #saints-controls button:hover {
      background-color: #FFD700;
      color: #0c0c0c;
    }

    #saints-card-slots {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 1.5rem;
      perspective: 1200px;
      width: 100%;
      min-height: 450px;
    }

    .saints-card-slot {
      width: 300px;
      height: 450px;
      position: relative;
    }

    .saints-placeholder {
      width: 100%;
      height: 100%;
      border: 2px dashed rgba(255, 255, 255, 0.2);
      border-radius: 15px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      font-style: italic;
      opacity: 0.7;
    }

    .saints-card {
      width: 100%;
      height: 100%;
      position: absolute;
      transform-style: preserve-3d;
      transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      cursor: pointer;
    }

    .saints-card.is-flipped {
      transform: rotateY(180deg);
    }

    .saints-card-face {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 15px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .saints-card-back {
      background: linear-gradient(145deg, #4d4d7a, #333355);
      border: 5px solid #fff;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .saints-card-front {
      background-color: #f4f4f9;
      color: #333;
      transform: rotateY(180deg);
      padding: 1rem;
      text-align: left;
      overflow-y: auto;
    }

    /* Galaga Game Canvas */
    #galaga-game canvas {
      display: block;
      width: 100%;
      height: 100%;
    }

    .galaga-hud {
      position: absolute;
      color: #ffffff;
      text-shadow: 2px 2px 4px #00ff00;
      font-family: 'Courier New', Courier, monospace;
    }
  </style>
</head>
<body>
  <div id="start-screen">
    <button id="play-button">üåü‚ú®</button>
  </div>

  <div id="main-container">
    <div id="three-container"></div>
    
    <div id="ui-overlay">
      <div id="clock-container">
        <div class="clock-button" id="time-display">üïê 00:00:00</div>
        <div class="clock-button" id="date-display">üìÖ Loading...</div>
        <div class="clock-button" id="cosmic-time">üåå Cosmic Moment</div>
      </div>

      <div id="function-panel">
        <button class="function-button" data-action="shuffle">üîÄ Shuffle Cosmic Deck</button>
        <button class="function-button" data-action="reading">üîÆ Three Card Reading</button>
        <button class="function-button" data-action="meditation">üßò Angel Meditation</button>
        <button class="function-button" data-action="planets">ü™ê Planetary Alignment</button>
        <button class="function-button" data-action="galaga">üöÄ Play Galaga '88</button>
        <button class="function-button" data-action="saints">‚õ™ Saints Tarot</button>
        <button class="function-button" data-action="reset">‚ôªÔ∏è Reset Universe</button>
      </div>

      <div id="card-display">
        <div class="card-slot" data-position="past">
          <div class="card-title">üï∞Ô∏è PAST</div>
          <div class="card-content">
            <div class="card-placeholder">Click to reveal your past</div>
          </div>
        </div>
        <div class="card-slot" data-position="present">
          <div class="card-title">‚≠ê PRESENT</div>
          <div class="card-content">
            <div class="card-placeholder">Click to reveal your present</div>
          </div>
        </div>
        <div class="card-slot" data-position="future">
          <div class="card-title">üåü FUTURE</div>
          <div class="card-content">
            <div class="card-placeholder">Click to reveal your future</div>
          </div>
        </div>
      </div>

      <div id="message-system">
        <div id="message-content">Welcome to the Cosmic Angel Tarot Experience...</div>
      </div>

      <div class="planetary-info" id="planetary-info">
        <h3>ü™ê Planetary Consciousness</h3>
        <p>Each planet carries angelic wisdom. Click on planets to receive their messages.</p>
      </div>
    </div>

    <!-- Saints Tarot Game -->
    <div id="saints-game" class="game-overlay">
      <div class="game-header">
        <h1>üåü Saints Tarot Reading üåü</h1>
        <button class="close-game" onclick="closeSaintsGame()">‚úï Close</button>
      </div>
      <p style="text-align: center; margin-bottom: 2rem; font-style: italic;">A three-card spread for Past, Present, and Future. Click the button to draw your cards, then click each card to reveal its meaning.</p>
      
      <div id="saints-controls">
        <button id="saints-draw-button">Draw Cards</button>
        <button id="saints-reset-button">Reset</button>
      </div>

      <div id="saints-card-slots">
        <!-- Saints card slots populated by JavaScript -->
      </div>
    </div>

    <!-- Galaga Game -->
    <div id="galaga-game" class="game-overlay">
      <div class="game-header">
        <h1 style="color: #00ff00; font-family: 'Courier New', Courier, monospace;">üöÄ GALAGA '88 3D üöÄ</h1>
        <button class="close-game" onclick="closeGalagaGame()">‚úï Close</button>
      </div>
      <!-- Galaga game will be injected here -->
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script>
    // Complete Angel Tarot Card Data (78 Cards)
    const cards = [
      // Major Arcana (22 cards)
      { name: "0 - The Dreamer", baseName: "Ariel", description: "Oversees nature, environmental balance", quotes: ["Guides wildlife harmony", "Protects earth's balance", "Instinctive environmental wisdom"], type: "Major", suit: "", number: 0 },
      { name: "1 - The Magician", baseName: "Gabriel", description: "Delivers divine messages", quotes: ["Delivers divine revelations", "Speaks truth clearly", "Inspired communicative clarity"], type: "Major", suit: "", number: 1 },
      { name: "2 - The High Priestess", baseName: "Haniel", description: "Enhances intuition, feminine energy", quotes: ["Unveils hidden truths", "Honors intuitive guidance", "Radiant spiritual joy"], type: "Major", suit: "", number: 2 },
      { name: "3 - The Empress", baseName: "Chamuel", description: "Fosters love, harmonious relationships", quotes: ["Builds peaceful bonds", "Promotes compassionate unity", "Loving relational grace"], type: "Major", suit: "", number: 3 },
      { name: "4 - The Emperor", baseName: "Michael", description: "Protects against evil", quotes: ["Defeats cosmic evil", "Upholds divine justice", "Courageous protective strength"], type: "Major", suit: "", number: 4 },
      { name: "5 - The Hierophant", baseName: "Metatron", description: "Records life events, ascension", quotes: ["Chronicles spiritual journeys", "Teaches sacred wisdom", "Divinely ordered insight"], type: "Major", suit: "", number: 5 },
      { name: "6 - The Lovers", baseName: "Zadkiel", description: "Promotes forgiveness, spiritual growth", quotes: ["Heals relational rifts", "Advocates merciful love", "Forgiving spiritual grace"], type: "Major", suit: "", number: 6 },
      { name: "7 - The Chariot", baseName: "Raphael", description: "Heals body, mind, spirit", quotes: ["Restores holistic health", "Guides healing paths", "Compassionate restorative power"], type: "Major", suit: "", number: 7 },
      { name: "8 - Strength", baseName: "Uriel", description: "Illuminates wisdom, prophecy", quotes: ["Reveals prophetic light", "Guides with wisdom", "Resilient divine clarity"], type: "Major", suit: "", number: 8 },
      { name: "9 - The Hermit", baseName: "Raziel", description: "Reveals divine mysteries", quotes: ["Unlocks esoteric mysteries", "Seeks divine knowledge", "Mystical insightful depth"], type: "Major", suit: "", number: 9 },
      { name: "10 - Wheel of Fortune", baseName: "Sandalphon", description: "Carries prayers, nurtures music", quotes: ["Elevates human prayers", "Harmonizes cosmic rhythms", "Musical spiritual flow"], type: "Major", suit: "", number: 10 },
      { name: "11 - Justice", baseName: "Raguel", description: "Ensures justice, fairness", quotes: ["Restores angelic harmony", "Upholds cosmic justice", "Equitable divine balance"], type: "Major", suit: "", number: 11 },
      { name: "12 - The Hanged Man", baseName: "Jeremiel", description: "Assists life reviews, transformation", quotes: ["Guides soul reviews", "Encourages inner growth", "Transformative spiritual insight"], type: "Major", suit: "", number: 12 },
      { name: "13 - Death", baseName: "Azrael", description: "Transitions souls, embraces change", quotes: ["Guides departing souls", "Embraces life's cycles", "Gentle transitional peace"], type: "Major", suit: "", number: 13 },
      { name: "14 - Temperance", baseName: "Jophiel", description: "Inspires creativity, divine wisdom", quotes: ["Inspires divine art", "Cultivates aesthetic harmony", "Creative spiritual balance"], type: "Major", suit: "", number: 14 },
      { name: "15 - The Devil", baseName: "Temptation", description: "Challenges morality, tests resolve", quotes: ["Exposes inner shadows", "Confronts personal ethics", "Resilient moral strength"], type: "Major", suit: "", number: 15 },
      { name: "16 - The Tower", baseName: "Disruption", description: "Breaks illusions, sparks awakening", quotes: ["Shatters false beliefs", "Demands honest reflection", "Courageous transformative clarity"], type: "Major", suit: "", number: 16 },
      { name: "17 - The Star", baseName: "Hope", description: "Guides through darkness, inspires faith", quotes: ["Illuminates hopeful paths", "Fosters unwavering trust", "Radiant optimistic spirit"], type: "Major", suit: "", number: 17 },
      { name: "18 - The Moon", baseName: "Intuition", description: "Reveals subconscious, guides dreams", quotes: ["Unveils hidden insights", "Trusts inner wisdom", "Mystical intuitive depth"], type: "Major", suit: "", number: 18 },
      { name: "19 - The Sun", baseName: "Joy", description: "Radiates vitality, celebrates life", quotes: ["Spreads boundless light", "Embraces pure happiness", "Vibrant joyful energy"], type: "Major", suit: "", number: 19 },
      { name: "20 - Judgement", baseName: "Awakening", description: "Calls for renewal, reckoning", quotes: ["Ignites spiritual rebirth", "Judges with fairness", "Redemptive divine clarity"], type: "Major", suit: "", number: 20 },
      { name: "21 - The World", baseName: "Completion", description: "Unifies all, fulfills destiny", quotes: ["Completes cosmic cycles", "Honors universal unity", "Holistic divine harmony"], type: "Major", suit: "", number: 21 },

      // Minor Arcana - Fire (14 cards)
      { name: "Ace of Fire", baseName: "Uriel", description: "Ignites wisdom, prophetic light", quotes: ["Reveals divine truth", "Guides with clarity", "Fiery spiritual insight"], type: "Minor", suit: "Fire", number: 1 },
      { name: "Two of Fire", baseName: "Jophiel", description: "Sparks creative inspiration", quotes: ["Inspires artistic beauty", "Cultivates aesthetic truth", "Creative divine spark"], type: "Minor", suit: "Fire", number: 2 },
      { name: "Three of Fire", baseName: "Sachiel", description: "Fuels wealth, charity", quotes: ["Attracts abundant prosperity", "Shares generous wealth", "Charitable fiery spirit"], type: "Minor", suit: "Fire", number: 3 },
      { name: "Four of Fire", baseName: "Barachiel", description: "Ignites divine blessings", quotes: ["Distributes sacred gifts", "Spreads divine favor", "Blessed fiery grace"], type: "Minor", suit: "Fire", number: 4 },
      { name: "Five of Fire", baseName: "Camael", description: "Burns with courage", quotes: ["Strengthens bold resolve", "Upholds fearless honor", "Courageous fiery spirit"], type: "Minor", suit: "Fire", number: 5 },
      { name: "Six of Fire", baseName: "Lugh", description: "Radiates heroic light", quotes: ["Leads with skill", "Honors heroic duty", "Fiery heroic valor"], type: "Minor", suit: "Fire", number: 6 },
      { name: "Seven of Fire", baseName: "Thor", description: "Strikes with power", quotes: ["Defends with might", "Protects with strength", "Powerful fiery resolve"], type: "Minor", suit: "Fire", number: 7 },
      { name: "Eight of Fire", baseName: "Pele", description: "Erupts with volcanic force", quotes: ["Transforms through fire", "Respects nature's power", "Fiery creative energy"], type: "Minor", suit: "Fire", number: 8 },
      { name: "Nine of Fire", baseName: "Indra", description: "Commands thunderous energy", quotes: ["Wields cosmic storms", "Leads with authority", "Thunderous fiery might"], type: "Minor", suit: "Fire", number: 9 },
      { name: "Ten of Fire", baseName: "K≈´", description: "Fuels warlike passion", quotes: ["Drives fierce strength", "Honors warrior code", "Fiery martial spirit"], type: "Minor", suit: "Fire", number: 10 },
      { name: "Page of Fire", baseName: "Valkyrie", description: "Explores fiery paths", quotes: ["Guides warrior souls", "Seeks bold truth", "Fiery adventurous spirit"], type: "Minor", suit: "Fire", number: 11 },
      { name: "Knight of Fire", baseName: "Xian", description: "Pursues transformative quests", quotes: ["Seeks divine immortality", "Follows fiery path", "Questing fiery soul"], type: "Minor", suit: "Fire", number: 12 },
      { name: "Queen of Fire", baseName: "Freyja", description: "Rules with passionate magic", quotes: ["Weaves love's fire", "Guides with passion", "Fiery magical grace"], type: "Minor", suit: "Fire", number: 13 },
      { name: "King of Fire", baseName: "Odin", description: "Masters fiery wisdom", quotes: ["Leads with insight", "Rules with honor", "Fiery divine wisdom"], type: "Minor", suit: "Fire", number: 14 },

      // Minor Arcana - Air (14 cards)
      { name: "Ace of Air", baseName: "Gabriel", description: "Initiates divine communication", quotes: ["Delivers sacred messages", "Speaks divine truth", "Clear airy wisdom"], type: "Minor", suit: "Air", number: 1 },
      { name: "Two of Air", baseName: "Raguel", description: "Balances cosmic fairness", quotes: ["Restores angelic justice", "Ensures equitable truth", "Airy balanced clarity"], type: "Minor", suit: "Air", number: 2 },
      { name: "Three of Air", baseName: "Anael", description: "Inspires intellectual love", quotes: ["Fosters loving thoughts", "Guides relational truth", "Airy romantic wisdom"], type: "Minor", suit: "Air", number: 3 },
      { name: "Four of Air", baseName: "Tennin", description: "Carries celestial messages", quotes: ["Guides with grace", "Shares divine insights", "Airy celestial lightness"], type: "Minor", suit: "Air", number: 4 },
      { name: "Five of Air", baseName: "Morr√≠gan", description: "Foretells intellectual fate", quotes: ["Predicts strategic outcomes", "Honors fated truth", "Airy prophetic vision"], type: "Minor", suit: "Air", number: 5 },
      { name: "Six of Air", baseName: "Y√©il", description: "Tricks with cleverness", quotes: ["Weaves cunning plans", "Values sharp wit", "Airy trickster mind"], type: "Minor", suit: "Air", number: 6 },
      { name: "Seven of Air", baseName: "Nanabozho", description: "Teaches through stories", quotes: ["Shares wise tales", "Teaches through wit", "Airy narrative wisdom"], type: "Minor", suit: "Air", number: 7 },
      { name: "Eight of Air", baseName: "Susanoo", description: "Stirs intellectual storms", quotes: ["Drives dynamic thoughts", "Challenges with truth", "Airy stormy intellect"], type: "Minor", suit: "Air", number: 8 },
      { name: "Nine of Air", baseName: "Devas", description: "Enlightens with divine ideas", quotes: ["Illuminates cosmic truths", "Guides with clarity", "Airy divine insight"], type: "Minor", suit: "Air", number: 9 },
      { name: "Ten of Air", baseName: "Raqib", description: "Records intellectual deeds", quotes: ["Chronicles good thoughts", "Values honest records", "Airy truthful scribe"], type: "Minor", suit: "Air", number: 10 },
      { name: "Page of Air", baseName: "√Ålfar", description: "Explores airy realms", quotes: ["Seeks ethereal truths", "Honors airy freedom", "Airy curious spirit"], type: "Minor", suit: "Air", number: 11 },
      { name: "Knight of Air", baseName: "Atid", description: "Pursues truthful records", quotes: ["Tracks honest deeds", "Upholds truthful justice", "Airy diligent scribe"], type: "Minor", suit: "Air", number: 12 },
      { name: "Queen of Air", baseName: "Amaterasu", description: "Illuminates with clarity", quotes: ["Shines divine light", "Guides with truth", "Airy radiant wisdom"], type: "Minor", suit: "Air", number: 13 },
      { name: "King of Air", baseName: "Gitchi Manitou", description: "Masters airy spirit", quotes: ["Guides cosmic intellect", "Rules with wisdom", "Airy divine clarity"], type: "Minor", suit: "Air", number: 14 },

      // Minor Arcana - Water (14 cards)
      { name: "Ace of Water", baseName: "Raphael", description: "Initiates emotional healing", quotes: ["Heals heart's wounds", "Guides compassionate paths", "Watery healing grace"], type: "Minor", suit: "Water", number: 1 },
      { name: "Two of Water", baseName: "Chamuel", description: "Deepens loving connections", quotes: ["Fosters heartfelt bonds", "Promotes loving unity", "Watery compassionate love"], type: "Minor", suit: "Water", number: 2 },
      { name: "Three of Water", baseName: "Zadkiel", description: "Flows with forgiveness", quotes: ["Heals through mercy", "Advocates forgiving love", "Watery merciful grace"], type: "Minor", suit: "Water", number: 3 },
      { name: "Four of Water", baseName: "Haniel", description: "Stirs intuitive depths", quotes: ["Reveals inner truths", "Honors intuitive flow", "Watery spiritual joy"], type: "Minor", suit: "Water", number: 4 },
      { name: "Five of Water", baseName: "Apsaras", description: "Dances with emotional grace", quotes: ["Guides soul's dance", "Embraces emotional beauty", "Watery graceful spirit"], type: "Minor", suit: "Water", number: 5 },
      { name: "Six of Water", baseName: "Brigid", description: "Nurtures emotional healing", quotes: ["Heals with poetry", "Fosters emotional peace", "Watery poetic grace"], type: "Minor", suit: "Water", number: 6 },
      { name: "Seven of Water", baseName: "Lono", description: "Soothes with peace", quotes: ["Brings tranquil harmony", "Cultivates peaceful flow", "Watery serene spirit"], type: "Minor", suit: "Water", number: 7 },
      { name: "Eight of Water", baseName: "Orca Spirit", description: "Guides emotional depths", quotes: ["Navigates soul's waters", "Protects emotional truth", "Watery guardian spirit"], type: "Minor", suit: "Water", number: 8 },
      { name: "Nine of Water", baseName: "Nafanua", description: "Empowers emotional strength", quotes: ["Inspires warrior heart", "Honors emotional courage", "Watery fierce spirit"], type: "Minor", suit: "Water", number: 9 },
      { name: "Ten of Water", baseName: "Lailah", description: "Guards emotional dreams", quotes: ["Protects nightly visions", "Nurtures soul's dreams", "Watery dreamy grace"], type: "Minor", suit: "Water", number: 10 },
      { name: "Page of Water", baseName: "Aos S√≠", description: "Explores emotional realms", quotes: ["Guides heart's paths", "Honors emotional truth", "Watery mystical spirit"], type: "Minor", suit: "Water", number: 11 },
      { name: "Knight of Water", baseName: "Gandharvas", description: "Pursues emotional harmony", quotes: ["Sings soul's music", "Shares emotional beauty", "Watery melodic grace"], type: "Minor", suit: "Water", number: 12 },
      { name: "Queen of Water", baseName: "Ngen", description: "Rules emotional nature", quotes: ["Protects watery realms", "Guides with care", "Watery nurturing spirit"], type: "Minor", suit: "Water", number: 13 },
      { name: "King of Water", baseName: "Vishnu", description: "Masters emotional preservation", quotes: ["Preserves cosmic balance", "Protects with love", "Watery divine grace"], type: "Minor", suit: "Water", number: 14 },

      // Minor Arcana - Earth (14 cards)
      { name: "Ace of Earth", baseName: "Ariel", description: "Grounds with nature's balance", quotes: ["Protects earth's harmony", "Honors natural balance", "Earthy environmental wisdom"], type: "Minor", suit: "Earth", number: 1 },
      { name: "Two of Earth", baseName: "Sandalphon", description: "Anchors prayers to earth", quotes: ["Carries grounded prayers", "Harmonizes earthly rhythms", "Earthy musical spirit"], type: "Minor", suit: "Earth", number: 2 },
      { name: "Three of Earth", baseName: "Cassiel", description: "Stabilizes with discipline", quotes: ["Guides steady resolve", "Upholds patient duty", "Earthy disciplined strength"], type: "Minor", suit: "Earth", number: 3 },
      { name: "Four of Earth", baseName: "Tzadkiel", description: "Roots in righteousness", quotes: ["Upholds divine justice", "Honors righteous path", "Earthy moral strength"], type: "Minor", suit: "Earth", number: 4 },
      { name: "Five of Earth", baseName: "KƒÅne", description: "Creates earthly life", quotes: ["Fosters life's growth", "Nurtures earthly creation", "Earthy generative spirit"], type: "Minor", suit: "Earth", number: 5 },
      { name: "Six of Earth", baseName: "Viracocha", description: "Builds cosmic foundations", quotes: ["Shapes earthly order", "Honors cosmic stability", "Earthy divine structure"], type: "Minor", suit: "Earth", number: 6 },
      { name: "Seven of Earth", baseName: "Inti", description: "Radiates earthly vitality", quotes: ["Illuminates earthly life", "Honors solar truth", "Earthy radiant spirit"], type: "Minor", suit: "Earth", number: 7 },
      { name: "Eight of Earth", baseName: "Kakunupmawa", description: "Anchors solar stability", quotes: ["Guides earthly cycles", "Honors solar balance", "Earthy solar wisdom"], type: "Minor", suit: "Earth", number: 8 },
      { name: "Nine of Earth", baseName: "Breath Maker", description: "Grounds spiritual essence", quotes: ["Breathes life's spirit", "Nurtures earthly soul", "Earthy vital spirit"], type: "Minor", suit: "Earth", number: 9 },
      { name: "Ten of Earth", baseName: "Shen", description: "Protects earthly realms", quotes: ["Guards natural order", "Honors earthly harmony", "Earthy protective spirit"], type: "Minor", suit: "Earth", number: 10 },
      { name: "Page of Earth", baseName: "Disir", description: "Explores earthly paths", quotes: ["Guides ancestral ways", "Honors earthy roots", "Earthy ancestral wisdom"], type: "Minor", suit: "Earth", number: 11 },
      { name: "Knight of Earth", baseName: "Coyote", description: "Pursues earthly cunning", quotes: ["Navigates earthy tricks", "Values clever survival", "Earthy cunning spirit"], type: "Minor", suit: "Earth", number: 12 },
      { name: "Queen of Earth", baseName: "Corn Mother", description: "Nurtures earthly sustenance", quotes: ["Provides life's bounty", "Nurtures earthy growth", "Earthy fertile grace"], type: "Minor", suit: "Earth", number: 13 },
      { name: "King of Earth", baseName: "Tagaloa", description: "Masters earthly creation", quotes: ["Shapes cosmic earth", "Rules with stability", "Earthy divine order"], type: "Minor", suit: "Earth", number: 14 }
    ];

    // Saints Data for Saints Tarot Game
    const saints_data = [
      {"id":1,"name":"Adalbert of Prague","card":"Five of Wands","classifier":"Wands - Fire - Creativity","emojis":"üõ∂, üôè","continent":"Europe","story":"A Bishop of Prague who struggled with conflict and resistance while trying to reform his diocese. He was ultimately martyred trying to bring his faith to a hostile land, embodying a narrative of struggle and striving for a higher cause against opposition.","virtues":"Missionary Zeal, Perseverance, Courage, Faith","gender":"Male","location":"Prague, Bohemia (Czech Rep.)","canon":"Vita Sancti Adalberti (Life of St. Adalbert)"},
      {"id":2,"name":"Agnes of Rome","card":"The Star (XVII)","classifier":"Major Arcana","emojis":"üêë, ‚ú®","continent":"Europe","story":"A young girl who became a beacon of pure faith and hope in a time of dark persecution. Her story, filled with miracles protecting her, represents divine inspiration and serenity in the face of mortal danger, much like the Star's gentle light.","virtues":"Purity, Courage, Faithfulness, Steadfastness","gender":"Female","location":"Rome, Italy","canon":"The Golden Legend, Pope Damasus I's inscriptions"},
      {"id":3,"name":"Francis of Assisi","card":"The Fool (0)","classifier":"Major Arcana","emojis":"üêæ, ‚òÄÔ∏è","continent":"Europe","story":"He abandoned a life of wealth to take a radical leap of faith into the unknown, embracing poverty and trusting completely in divine providence. His journey is the ultimate embodiment of the Fool's archetype: beginning a new path with pure faith and innocence.","virtues":"Humility, Poverty, Charity, Love for Creation","gender":"Male","location":"Assisi, Italy","canon":"Canticle of the Sun, The Little Flowers of Saint Francis"},
      {"id":4,"name":"Teresa of √Åvila","card":"Queen of Cups","classifier":"Cups - Water - Emotional","emojis":"üè∞, ‚ù§Ô∏è","continent":"Europe","story":"A master of mystical theology who mapped the 'Interior Castle' of the soul. She was emotionally and spiritually intuitive, compassionate, and in control of the deep waters of contemplation, making her the archetype of the Queen of Cups.","virtues":"Prayerfulness, Determination, Reform, Mysticism","gender":"Female","location":"√Åvila, Spain","canon":"The Interior Castle, The Way of Perfection, The Life of Teresa of Jesus"},
      {"id":5,"name":"Joan of Arc","card":"The Chariot (VII)","classifier":"Major Arcana","emojis":"üá´üá∑, ‚öîÔ∏è","continent":"Europe","story":"A peasant girl who, through sheer willpower and divine conviction, harnessed the opposing forces of the French army and led them to victory. She is the ultimate Charioteer, a figure of external conquest driven by an unstoppable inner will.","virtues":"Courage, Faith, Patriotism, Fortitude","gender":"Female","location":"Domr√©my-la-Pucelle, France","canon":"Trial transcripts, letters, historical chronicles"}
    ];

    // Global variables
    let scene, camera, renderer, planets = [], stars = [];
    let messageSystem, currentReading = { past: null, present: null, future: null };
    let isReadingActive = false;
    let galagaGame = null;
    let saintsDrawnCards = [];

    // Message passing system
    const MessageBus = {
      subscribers: {},
      
      subscribe(event, callback) {
        if (!this.subscribers[event]) {
          this.subscribers[event] = [];
        }
        this.subscribers[event].push(callback);
      },
      
      publish(event, data) {
        if (this.subscribers[event]) {
          this.subscribers[event].forEach(callback => callback(data));
        }
      }
    };

    // Initialize the cosmic experience
    function initApp() {
      document.getElementById('play-button').addEventListener('click', startExperience);
      setupMessageSystem();
      setupClock();
      setupFunctionPanel();
      setupCardSlots();
      createCosmicParticles();
      setupSaintsGame();
    }

    function startExperience() {
      document.getElementById('start-screen').style.display = 'none';
      document.getElementById('main-container').style.display = 'block';
      initThreeJS();
      showMessage("Welcome to the Cosmic Angel Tarot! üåü The universe awaits your questions...");
    }

    function initThreeJS() {
      const container = document.getElementById('three-container');
      
      // Scene setup
      scene = new THREE.Scene();
      camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
      renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      container.appendChild(renderer.domElement);

      // Create solar system
      createSolarSystem();
      createStarField();
      
      // Camera position
      camera.position.set(0, 5, 15);
      camera.lookAt(0, 0, 0);
      
      // Animation loop
      animate();
      
      // Planet click detection
      setupPlanetInteraction();
    }

    function createSolarSystem() {
      // Sun
      const sunGeometry = new THREE.SphereGeometry(1, 32, 32);
      const sunMaterial = new THREE.MeshBasicMaterial({ 
        color: 0xFFD700,
        emissive: 0xFFAA00,
        emissiveIntensity: 0.3
      });
      const sun = new THREE.Mesh(sunGeometry, sunMaterial);
      scene.add(sun);
      planets.push({ mesh: sun, name: "Sol", distance: 0, speed: 0, angle: 0, message: "‚òÄÔ∏è The Divine Source radiates eternal wisdom and life force energy." });

      // Planets data
      const planetData = [
        { name: "Mercury", color: 0x8C7853, size: 0.2, distance: 3, speed: 0.04, message: "‚òø Swift Mercury brings messages of divine communication and clarity." },
        { name: "Venus", color: 0xFFC649, size: 0.3, distance: 4, speed: 0.03, message: "‚ôÄ Venus radiates love, beauty, and harmonious relationships." },
        { name: "Earth", color: 0x6B93D6, size: 0.35, distance: 5, speed: 0.02, message: "üåç Mother Earth offers grounding, stability, and natural wisdom." },
        { name: "Mars", color: 0xCD5C5C, size: 0.25, distance: 6.5, speed: 0.015, message: "‚ôÇ Mars ignites courage, passion, and the warrior spirit within." },
        { name: "Jupiter", color: 0xD8CA9D, size: 0.6, distance: 9, speed: 0.01, message: "‚ôÉ Mighty Jupiter expands consciousness and brings abundance." },
        { name: "Saturn", color: 0xFAD5A5, size: 0.5, distance: 12, speed: 0.008, message: "‚ôÑ Wise Saturn teaches discipline, structure, and karmic lessons." }
      ];

      planetData.forEach((data, index) => {
        const geometry = new THREE.SphereGeometry(data.size, 16, 16);
        const material = new THREE.MeshBasicMaterial({ color: data.color });
        const planet = new THREE.Mesh(geometry, material);
        
        // Initial position
        data.angle = (index * Math.PI * 2) / planetData.length;
        planet.position.x = Math.cos(data.angle) * data.distance;
        planet.position.z = Math.sin(data.angle) * data.distance;
        
        scene.add(planet);
        planets.push({ ...data, mesh: planet });

        // Create orbit rings
        const ringGeometry = new THREE.RingGeometry(data.distance - 0.1, data.distance + 0.1, 64);
        const ringMaterial = new THREE.MeshBasicMaterial({ 
          color: 0x444444, 
          side: THREE.DoubleSide,
          transparent: true,
          opacity: 0.2
        });
        const ring = new THREE.Mesh(ringGeometry, ringMaterial);
        ring.rotation.x = Math.PI / 2;
        scene.add(ring);
      });
    }

    function createStarField() {
      const starGeometry = new THREE.BufferGeometry();
      const starVertices = [];
      
      for (let i = 0; i < 2000; i++) {
        const x = (Math.random() - 0.5) * 200;
        const y = (Math.random() - 0.5) * 200;
        const z = (Math.random() - 0.5) * 200;
        starVertices.push(x, y, z);
      }
      
      starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
      const starMaterial = new THREE.PointsMaterial({ color: 0xFFFFFF, size: 0.5 });
      const starField = new THREE.Points(starGeometry, starMaterial);
      scene.add(starField);
      stars.push(starField);
    }

    function animate() {
      requestAnimationFrame(animate);
      
      // Animate planets
      planets.forEach((planet, index) => {
        if (index > 0) { // Skip sun
          planet.angle += planet.speed;
          planet.mesh.position.x = Math.cos(planet.angle) * planet.distance;
          planet.mesh.position.z = Math.sin(planet.angle) * planet.distance;
          planet.mesh.rotation.y += 0.01;
        } else {
          planet.mesh.rotation.y += 0.005; // Sun rotation
        }
      });
      
      // Rotate star field
      stars.forEach(starField => {
        starField.rotation.y += 0.0001;
        starField.rotation.x += 0.0001;
      });
      
      renderer.render(scene, camera);
    }

    function setupPlanetInteraction() {
      const raycaster = new THREE.Raycaster();
      const mouse = new THREE.Vector2();
      
      renderer.domElement.addEventListener('click', (event) => {
        mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
        mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
        
        raycaster.setFromCamera(mouse, camera);
        const intersects = raycaster.intersectObjects(planets.map(p => p.mesh));
        
        if (intersects.length > 0) {
          const clickedPlanet = planets.find(p => p.mesh === intersects[0].object);
          if (clickedPlanet) {
            showMessage(clickedPlanet.message);
            MessageBus.publish('planetClicked', clickedPlanet);
          }
        }
      });
    }

    function setupMessageSystem() {
      messageSystem = document.getElementById('message-system');
      
      MessageBus.subscribe('cardDrawn', (data) => {
        showMessage(`‚ú® ${data.card.baseName} has appeared! ${data.card.description}`);
      });
      
      MessageBus.subscribe('readingComplete', (data) => {
        showMessage("üîÆ Your three-card reading is complete. The angels have spoken!");
      });
    }

    function showMessage(text) {
      const messageContent = document.getElementById('message-content');
      messageContent.textContent = text;
      messageSystem.style.display = 'block';
      
      setTimeout(() => {
        messageSystem.style.display = 'none';
      }, 4000);
    }

    function setupClock() {
      function updateClock() {
        const now = new Date();
        const timeString = now.toLocaleTimeString();
        const dateString = now.toLocaleDateString();
        const cosmicMoment = generateCosmicTime();
        
        document.getElementById('time-display').textContent = `üïê ${timeString}`;
        document.getElementById('date-display').textContent = `üìÖ ${dateString}`;
        document.getElementById('cosmic-time').textContent = `üåå ${cosmicMoment}`;
      }
      
      updateClock();
      setInterval(updateClock, 1000);
    }

    function generateCosmicTime() {
      const moments = [
        "Stellar Alignment", "Cosmic Flow", "Divine Moment", "Angel Hour",
        "Sacred Time", "Mystic Phase", "Celestial Harmony", "Universal Breath"
      ];
      const randomIndex = Math.floor(Date.now() / 10000) % moments.length;
      return moments[randomIndex];
    }

    function setupFunctionPanel() {
      const buttons = document.querySelectorAll('.function-button');
      
      buttons.forEach(button => {
        button.addEventListener('click', () => {
          const action = button.dataset.action;
          executeFunction(action, button);
        });
      });
    }

    function executeFunction(action, button) {
      // Reset all buttons
      document.querySelectorAll('.function-button').forEach(btn => {
        btn.classList.remove('active');
      });
      button.classList.add('active');
      
      switch(action) {
        case 'shuffle':
          shuffleDeck();
          break;
        case 'reading':
          startThreeCardReading();
          break;
        case 'meditation':
          startMeditation();
          break;
        case 'planets':
          showPlanetaryInfo();
          break;
        case 'galaga':
          openGalagaGame();
          break;
        case 'saints':
          openSaintsGame();
          break;
        case 'reset':
          resetUniverse();
          break;
      }
    }

    function shuffleDeck() {
      showMessage("üîÄ Shuffling the cosmic deck... The angels are rearranging destiny!");
      
      // Visual shuffle effect on planets
      planets.forEach((planet, index) => {
        if (index > 0) {
          planet.speed *= 3;
          setTimeout(() => {
            planet.speed /= 3;
          }, 2000);
        }
      });
    }

    function startThreeCardReading() {
      isReadingActive = true;
      showMessage("üîÆ Click on each card slot to reveal your Past, Present, and Future!");
      
      // Highlight card slots
      document.querySelectorAll('.card-slot').forEach(slot => {
        slot.style.boxShadow = '0 0 20px rgba(255, 215, 0, 0.6)';
      });
    }

    function setupCardSlots() {
      const slots = document.querySelectorAll('.card-slot');
      
      slots.forEach(slot => {
        slot.addEventListener('click', () => {
          if (isReadingActive) {
            const position = slot.dataset.position;
            drawCard(position, slot);
          }
        });
      });
    }

    function drawCard(position, slot) {
      if (currentReading[position]) return; // Already drawn
      
      const randomCard = cards[Math.floor(Math.random() * cards.length)];
      currentReading[position] = randomCard;
      
      // Update slot
      slot.classList.add('filled');
      slot.innerHTML = `
        <div class="card-title">${position === 'past' ? 'üï∞Ô∏è PAST' : position === 'present' ? '‚≠ê PRESENT' : 'üåü FUTURE'}</div>
        <div class="card-content">
          <div class="card-name">${randomCard.name}</div>
          <div class="card-description">${randomCard.description}</div>
          <div class="card-virtue">${randomCard.quotes[0]}</div>
        </div>
      `;
      
      MessageBus.publish('cardDrawn', { card: randomCard, position });
      
      // Check if reading is complete
      if (currentReading.past && currentReading.present && currentReading.future) {
        setTimeout(() => {
          MessageBus.publish('readingComplete', currentReading);
          isReadingActive = false;
        }, 1000);
      }
    }

    function startMeditation() {
      showMessage("üßò Enter a state of cosmic meditation... Feel the angelic presence around you.");
      
      // Slow down planetary motion
      planets.forEach(planet => {
        planet.speed *= 0.3;
      });
      
      setTimeout(() => {
        planets.forEach(planet => {
          planet.speed /= 0.3;
        });
        showMessage("‚ú® Meditation complete. You are now aligned with cosmic consciousness.");
      }, 10000);
    }

    function showPlanetaryInfo() {
      const info = document.getElementById('planetary-info');
      info.style.display = 'block';
      
      setTimeout(() => {
        info.style.display = 'none';
      }, 5000);
    }

    function resetUniverse() {
      currentReading = { past: null, present: null, future: null };
      isReadingActive = false;
      
      // Reset card slots
      document.querySelectorAll('.card-slot').forEach((slot, index) => {
        slot.classList.remove('filled');
        const positions = ['past', 'present', 'future'];
        const emojis = ['üï∞Ô∏è', '‚≠ê', 'üåü'];
        const titles = ['PAST', 'PRESENT', 'FUTURE'];
        slot.innerHTML = `
          <div class="card-title">${emojis[index]} ${titles[index]}</div>
          <div class="card-content">
            <div class="card-placeholder">Click to reveal your ${positions[index]}</div>
          </div>
        `;
        slot.style.boxShadow = '';
      });
      
      showMessage("‚ôªÔ∏è Universe reset! The cosmic slate is clean, ready for new revelations.");
    }

    function createCosmicParticles() {
      for (let i = 0; i < 20; i++) {
        const particle = document.createElement('div');
        particle.className = 'cosmic-particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 3 + 's';
        document.getElementById('ui-overlay').appendChild(particle);
      }
    }

    // Galaga Game Functions
    function openGalagaGame() {
      showMessage("üöÄ Launching Galaga '88! Defend the cosmic realm!");
      document.getElementById('galaga-game').style.display = 'block';
      initGalagaGame();
    }

    function closeGalagaGame() {
      document.getElementById('galaga-game').style.display = 'none';
      if (galagaGame) {
        // Clean up Galaga game
        galagaGame = null;
      }
    }

    function initGalagaGame() {
      const galagaContainer = document.getElementById('galaga-game');
      galagaContainer.innerHTML = `
        <div class="game-header">
          <h1 style="color: #00ff00; font-family: 'Courier New', Courier, monospace;">üöÄ GALAGA '88 3D üöÄ</h1>
          <button class="close-game" onclick="closeGalagaGame()">‚úï Close</button>
        </div>
        <div style="position: relative; width: 100%; height: calc(100% - 80px); background: #000;">
          <div class="galaga-hud" style="top: 10px; left: 10px;">SCORE: <span id="galaga-score">0</span></div>
          <div class="galaga-hud" style="top: 10px; right: 10px;">WAVE: <span id="galaga-wave">1</span></div>
          <div class="galaga-hud" style="bottom: 10px; left: 10px;">LIVES: <span id="galaga-lives">‚òÖ‚òÖ‚òÖ</span></div>
          <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #00ff00; font-family: 'Courier New'; text-align: center;">
            <h2>üöÄ GALAGA '88 3D üöÄ</h2>
            <p>Use WASD or Arrow Keys to move</p>
            <p>Press SPACE to fire</p>
            <p>Destroy all enemies to advance!</p>
            <button onclick="startGalagaDemo()" style="margin-top: 20px; padding: 10px 20px; background: #00ff00; color: #000; border: none; font-family: 'Courier New';">START GAME</button>
          </div>
        </div>
      `;
    }

    function startGalagaDemo() {
      showMessage("üöÄ Galaga demo starting! Pew pew pew!");
      // Simplified demo - just show some action text
      const demoArea = document.querySelector('#galaga-game div[style*="position: absolute"]');
      demoArea.innerHTML = `
        <h2 style="color: #ffff00;">GAME ACTIVE!</h2>
        <p style="color: #00ff00;">üöÄ Player ship moving...</p>
        <p style="color: #ff0000;">üëæ Enemies incoming!</p>
        <p style="color: #00ffff;">üí• Pew pew pew!</p>
        <button onclick="closeGalagaGame()" style="margin-top: 20px; padding: 10px 20px; background: #ff4444; color: #fff; border: none;">END DEMO</button>
      `;
    }

    // Saints Tarot Game Functions
    function setupSaintsGame() {
      setupSaintsPlaceholders();
      
      document.getElementById('saints-draw-button').addEventListener('click', drawSaintsReading);
      document.getElementById('saints-reset-button').addEventListener('click', resetSaintsReading);
    }

    function openSaintsGame() {
      showMessage("‚õ™ Opening Saints Tarot Reading... Connect with holy wisdom!");
      document.getElementById('saints-game').style.display = 'block';
    }

    function closeSaintsGame() {
      document.getElementById('saints-game').style.display = 'none';
    }

    function setupSaintsPlaceholders() {
      const positions = ['The Past', 'The Present', 'The Future'];
      const slotsContainer = document.getElementById('saints-card-slots');
      slotsContainer.innerHTML = '';
      
      for (let i = 0; i < 3; i++) {
        const placeholder = document.createElement('div');
        placeholder.className = 'saints-card-slot';
        placeholder.innerHTML = `
          <div class="saints-placeholder">
            <span style="font-size: 1.2rem; font-weight: bold;">${positions[i]}</span>
          </div>
        `;
        slotsContainer.appendChild(placeholder);
      }
    }

    function drawSaintsReading() {
      if (saintsDrawnCards.length > 0) return;
      
      // Shuffle saints data
      const shuffled = [...saints_data].sort(() => Math.random() - 0.5);
      saintsDrawnCards = shuffled.slice(0, 3);
      const positions = ['The Past', 'The Present', 'The Future'];
      
      const slotsContainer = document.getElementById('saints-card-slots');
      slotsContainer.innerHTML = '';

      saintsDrawnCards.forEach((saint, index) => {
        const slot = document.createElement('div');
        slot.className = 'saints-card-slot';
        
        const cardElement = createSaintsCardElement(saint, positions[index]);
        slot.appendChild(cardElement);
        slotsContainer.appendChild(slot);
      });
      
      showMessage("‚õ™ Saints cards drawn! Click each card to reveal divine wisdom.");
    }

    function createSaintsCardElement(saintData, position) {
      const card = document.createElement('div');
      card.className = 'saints-card';
      
      card.innerHTML = `
        <div class="saints-card-face saints-card-back">
          <div style="width: 80%; height: 90%; border: 2px solid #FFD700; border-radius: 10px; display: flex; justify-content: center; align-items: center; font-size: 4rem; color: #FFD700; opacity: 0.8;">
            <span>‚öúÔ∏è</span>
          </div>
        </div>
        <div class="saints-card-face saints-card-front">
          <div style="text-align: center; border-bottom: 2px solid #e0e0e0; padding-bottom: 0.5rem; margin-bottom: 1rem;">
            <h2 style="margin: 0; font-size: 1.2rem; color: #444;">${saintData.name} ${saintData.emojis}</h2>
            <p style="font-style: italic; font-size: 1rem; color: #666; margin-top: 0.25rem;">${saintData.card}</p>
          </div>
          <div style="font-size: 0.9rem; line-height: 1.5;">
            <p style="margin: 0 0 0.75rem 0;"><strong style="color: #1a1a2e;">Position:</strong> ${position}</p>
            <p style="margin: 0 0 0.75rem 0;"><strong style="color: #1a1a2e;">Classifier:</strong> <em>${saintData.classifier}</em></p>
            <p style="margin: 0 0 0.75rem 0;"><strong style="color: #1a1a2e;">Virtues:</strong> ${saintData.virtues}</p>
            <p style="font-style: italic; background-color: rgba(230, 230, 240, 0.5); padding: 0.5rem; border-radius: 8px; border-left: 3px solid #FFD700; margin: 0;"><strong style="color: #1a1a2e;">Story:</strong> ${saintData.story}</p>
          </div>
        </div>
      `;
      
      card.addEventListener('click', () => {
        card.classList.toggle('is-flipped');
      });

      return card;
    }

    function resetSaintsReading() {
      saintsDrawnCards = [];
      setupSaintsPlaceholders();
      showMessage("‚õ™ Saints reading reset. Ready for new divine guidance!");
    }

    // Handle window resize
    window.addEventListener('resize', () => {
      if (camera && renderer) {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      }
    });

    // Initialize app when page loads
    window.addEventListener('load', initApp);
  </script>
</body>
</html>
