<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>AI UI/UX Gallery</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    
    /* === GRID === */
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); 
      gap: 1rem;
      width: 100%;
    }
    @media (max-width: 400px) {
      .gallery-grid { grid-template-columns: repeat(auto-fill, minmax(135px, 1fr)); gap: 0.5rem; }
    }

    /* === CARDS === */
    .app-card { 
        transition: all .2s cubic-bezier(0.4, 0, 0.2, 1);
        border: 1px solid rgba(0,0,0,0.06); 
    }
    .app-card:hover { 
        transform: translateY(-4px) scale(1.02); 
        box-shadow: 0 12px 20px -5px rgba(0, 0, 0, 0.1);
        border-color: rgba(99, 102, 241, 0.5);
        z-index: 10;
    }
    
    /* === BOOKMARK BAR === */
    .bookmark-bar {
        display: flex;
        gap: 0.5rem;
        overflow-x: auto;
        padding-bottom: 0.5rem;
        scrollbar-width: none; /* Firefox */
        -ms-overflow-style: none; /* IE */
    }
    .bookmark-bar::-webkit-scrollbar { display: none; }
    
    .bookmark-item {
        flex-shrink: 0;
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 4px 10px;
        background: white;
        border: 1px solid #e5e7eb;
        border-radius: 9999px;
        font-size: 11px;
        color: #4b5563;
        transition: all 0.2s;
        cursor: pointer;
        max-width: 160px;
    }
    .bookmark-item:hover { background: #f3f4f6; color: #111827; border-color: #d1d5db; }
    .bookmark-text { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-weight: 500; }

    /* === UI ELEMENTS === */
    .type-btn.active { @apply ring-2 ring-offset-1 ring-indigo-500 bg-indigo-100 text-indigo-700 border-transparent; }
    .line-clamp-3 { display: -webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: 3; overflow: hidden; }
    
    @keyframes fade-in { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .animate-card { animation: fade-in 0.3s ease-out forwards; }
  </style>
</head>
<body class="bg-slate-50 text-gray-800 min-h-screen flex flex-col">

  <div class="w-full px-4 py-4 max-w-[1920px] mx-auto flex-grow flex flex-col">
    
    <header class="mb-2">
      <div class="flex flex-col md:flex-row justify-between items-center gap-4 mb-3 border-b border-gray-200 pb-3">
          <div class="flex items-center gap-3">
              <h1 class="text-xl font-bold text-gray-900 tracking-tight">AI UI/UX <span class="text-indigo-600">Gallery</span></h1>
              <button id="sound-toggle" class="p-1.5 rounded-full hover:bg-gray-200 text-gray-500 text-sm" title="Toggle UI Sounds">üîá</button>
          </div>

          <div class="w-full max-w-xl flex gap-2">
            <input type="text" id="search-input" placeholder="Search..." 
                   class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none">
            <select id="sort-select" class="px-2 py-1.5 text-sm border border-gray-300 rounded-lg outline-none bg-white cursor-pointer w-24">
                <option value="alpha">A-Z</option>
                <option value="newest">Newest</option>
            </select>
          </div>
      </div>

      <div id="bookmark-container" class="mb-4 hidden">
          <p class="text-[10px] text-gray-400 uppercase font-bold tracking-wider mb-1">Recents</p>
          <div id="bookmark-bar" class="bookmark-bar"></div>
      </div>

      <div id="type-filter" class="flex flex-wrap gap-1.5 mb-4">
        <button data-type="all" class="type-btn active px-3 py-1 text-xs font-medium rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors">All</button>
      </div>
    </header>

    <main id="app-gallery" class="gallery-grid pb-10 flex-grow relative min-h-[200px]">
      <div id="loading" class="absolute inset-0 flex flex-col items-center justify-center text-gray-500">
          <div class="w-8 h-8 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin mb-3"></div>
          <p class="animate-pulse font-medium text-sm">Scanning GitHub...</p>
      </div>
      <div id="error-msg" class="hidden absolute inset-0 flex flex-col items-center justify-center text-center">
          <div class="text-4xl mb-2">üê¢</div>
          <h3 class="text-lg font-bold text-gray-800">GitHub Rate Limit Reached</h3>
          <p class="text-xs text-gray-500 mb-4 max-w-xs">The public API is resting. Please wait a moment or check your connection.</p>
          <button onclick="location.reload()" class="px-4 py-2 bg-indigo-600 text-white rounded-md text-sm hover:bg-indigo-700">Retry</button>
      </div>
    </main>

  </div>

  <footer class="text-center py-4 bg-white border-t border-gray-200 text-gray-400 text-[10px]">
    <p id="tile-count">0 Apps</p>
    <p>¬© 2025 Aaron Wacker</p>
  </footer>

  <script>
    // === CONFIGURATION ===
    const CONFIG = {
        user: 'aaroncwacker',
        repo: 'AI-UI-UX-JS',
        root: 'https://aaroncwacker.github.io/AI-UI-UX-JS/',
        historyKey: 'ai_gallery_recents'
    };

    // Compact Categories
    const CATEGORIES = [
      { k: ['tarot','oracle'], l: 'Tarot', e: 'üîÆ', c: 'bg-purple-100 text-purple-700' },
      { k: ['alien','ufo'],    l: 'Aliens',e: 'üëΩ', c: 'bg-green-100 text-green-700' },
      { k: ['slot','plinko','casino'], l: 'Slot',   e: 'üé∞', c: 'bg-red-100 text-red-700' },
      { k: ['game','arcade'],  l: 'Game',  e: 'üéÆ', c: 'bg-amber-100 text-amber-700' },
      { k: ['sim','city'],     l: 'Sim',   e: 'üèôÔ∏è', c: 'bg-blue-100 text-blue-700' },
      { k: ['ai','bot','gpt'], l: 'AI',    e: 'ü§ñ', c: 'bg-indigo-100 text-indigo-700' },
      { k: ['gps','map'],      l: 'GPS',   e: 'üó∫Ô∏è', c: 'bg-teal-100 text-teal-700' },
      { k: ['speech','voice'], l: 'Voice', e: 'üé§', c: 'bg-pink-100 text-pink-700' },
      { k: ['video','cam'],    l: 'Video', e: 'üìπ', c: 'bg-rose-100 text-rose-700' },
      { k: ['two','2p'],       l: '2P',    e: '‚öîÔ∏è', c: 'bg-orange-100 text-orange-700' },
      { k: ['3d','webgl'],     l: '3D',    e: 'üßä', c: 'bg-cyan-100 text-cyan-700' }
    ];

    // === UTILS ===
    const $ = id => document.getElementById(id);
    const cleanName = f => f.replace(/\.html$/, '').replace(/[\-_]/g, ' ');
    
    // Finds category object or returns generic default
    const getCat = name => {
        const n = name.toLowerCase();
        return CATEGORIES.find(c => c.k.some(key => n.includes(key))) || { l: 'App', e: '‚ö°', c: 'bg-gray-100 text-gray-600' };
    };

    // === AUDIO ENGINE (Minified) ===
    const AudioFX = {
        on: false,
        play(t) { 
            if(!this.on) return;
            // Base64 sounds to avoid external deps
            const src = t==='h' ? 'data:audio/wav;base64,UklGRl9vT1BXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU' : 'data:audio/wav;base64,UklGRi4AAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAEA//8AAP///wAA'; 
            new Audio(src).play().catch(()=>{}); 
        },
        toggle() { this.on = !this.on; $('sound-icon').textContent = this.on ? 'üîä' : 'üîá'; if(this.on) this.play('c'); }
    };

    // === HISTORY MANAGER (Bookmark Bar) ===
    const HistoryMgr = {
        get() { return JSON.parse(localStorage.getItem(CONFIG.historyKey) || '[]'); },
        add(filename) {
            let list = this.get().filter(f => f !== filename); // Remove duplicates
            list.unshift(filename); // Add to top
            if (list.length > 8) list.pop(); // Max 8 items
            localStorage.setItem(CONFIG.historyKey, JSON.stringify(list));
            this.render();
        },
        render() {
            const list = this.get();
            const container = $('bookmark-container');
            const bar = $('bookmark-bar');
            
            if (list.length === 0) { container.classList.add('hidden'); return; }
            
            container.classList.remove('hidden');
            bar.innerHTML = list.map(file => {
                const name = cleanName(file);
                const cat = getCat(name);
                return `
                    <div class="bookmark-item" onclick="launchApp('${file}')">
                        <span>${cat.e}</span>
                        <span class="bookmark-text">${name}</span>
                    </div>
                `;
            }).join('');
        }
    };

    // === CORE LOGIC ===
    let appData = [];

    async function init() {
        $('sound-toggle').onclick = () => AudioFX.toggle();
        
        // Build Filters
        const filterBox = $('type-filter');
        CATEGORIES.forEach(c => {
            const btn = document.createElement('button');
            btn.className = `type-btn px-2 py-1 text-xs font-semibold rounded-lg bg-white border border-gray-200 text-gray-600 hover:bg-gray-50`;
            btn.innerHTML = `<span>${c.e}</span><span>${c.l}</span>`;
            btn.onclick = (e) => {
                AudioFX.play('c');
                document.querySelectorAll('.type-btn').forEach(b => {
                    b.className = b.className.replace('active bg-indigo-100 text-indigo-700', 'bg-white text-gray-600');
                });
                const t = e.currentTarget;
                t.className = t.className.replace('bg-white text-gray-600', 'active bg-indigo-100 text-indigo-700');
                renderGrid(c.k); // Pass keywords directly
            };
            filterBox.appendChild(btn);
        });

        // Initialize Bookmarks
        HistoryMgr.render();

        // Load Data
        try {
            const api = `https://api.github.com/repos/${CONFIG.user}/${CONFIG.repo}/contents/`;
            const r = await fetch(api);
            if (!r.ok) throw new Error('API Error');
            const data = await r.json();
            
            appData = data
                .filter(f => f.type === 'file' && f.name.endsWith('.html') && f.name !== 'index.html')
                .map(f => ({ name: f.name, date: 0 })); // Date is 0 initially
            
            renderGrid(['all']); // Initial render
            fetchDates(); // Async update dates

        } catch (e) {
            $('loading').classList.add('hidden');
            $('error-msg').classList.remove('hidden');
        }
    }

    // Grid Renderer
    function renderGrid(filterKeywords) {
        const gallery = $('app-gallery');
        const loading = $('loading');
        loading.classList.add('hidden');
        
        const term = $('search-input').value.toLowerCase();
        const sort = $('sort-select').value;
        const isAll = filterKeywords[0] === 'all';

        // Sorting
        appData.sort((a, b) => sort === 'newest' ? b.date - a.date : a.name.localeCompare(b.name));

        gallery.innerHTML = ''; // Clear
        let visible = 0;

        appData.forEach((item, i) => {
            const name = cleanName(item.name).toLowerCase();
            const cat = getCat(item.name);
            
            // Filter Logic
            const matchesSearch = name.includes(term);
            const matchesType = isAll || filterKeywords.some(k => name.includes(k) || cat.k.includes(k));

            if (matchesSearch && matchesType) {
                visible++;
                const el = document.createElement('div');
                el.className = 'app-card bg-white rounded-lg p-3 flex flex-col justify-between animate-card';
                el.innerHTML = `
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-[10px] font-bold text-gray-300">#${visible}</span>
                        <div class="px-2 py-0.5 text-[10px] uppercase font-bold rounded flex gap-1 ${cat.c}">
                            <span>${cat.e}</span> ${cat.l}
                        </div>
                    </div>
                    <h2 class="text-sm font-bold text-gray-800 leading-snug line-clamp-3 flex-grow" title="${item.name}">${cleanName(item.name)}</h2>
                    <div class="mt-3 border-t border-gray-100 pt-2 flex gap-2">
                        <button onclick="launchApp('${item.name}')" class="flex-1 bg-indigo-600 text-white text-xs py-1.5 rounded hover:bg-indigo-700 transition">üöÄ Launch</button>
                        <a href="https://github.com/${CONFIG.user}/${CONFIG.repo}/blob/main/${item.name}" target="_blank" class="px-2 py-1.5 border border-gray-200 rounded hover:bg-gray-50 text-xs">üíª</a>
                    </div>
                    <div class="mt-1 text-[9px] text-gray-400 text-right h-3">${item.date ? new Date(item.date).toLocaleDateString() : ''}</div>
                `;
                el.onmouseenter = () => AudioFX.play('h');
                gallery.appendChild(el);
            }
        });
        
        // Remove error msg if we rendered
        if(visible > 0) $('error-msg').classList.add('hidden');
        $('tile-count').textContent = `${visible} Apps`;
    }

    // Global Launcher (Used by Grid and Bookmark Bar)
    window.launchApp = (filename) => {
        AudioFX.play('c');
        HistoryMgr.add(filename); // Save to history
        window.open(CONFIG.root + filename, '_blank');
    };

    // Async Date Fetcher (Updates UI silently)
    async function fetchDates() {
        const promises = appData.map(async item => {
            try {
                const r = await fetch(CONFIG.root + item.name, { method: 'HEAD' });
                const lm = r.headers.get('Last-Modified');
                if (lm) item.date = new Date(lm);
            } catch(e){}
        });
        await Promise.allSettled(promises);
        if ($('sort-select').value === 'newest') renderGrid(['all']); // Re-sort if needed
        else {
            // Just update date text without re-rendering DOM
             // (Simplified: Just re-render to keep code brief)
             const activeBtn = document.querySelector('.type-btn.active');
             // Trigger click on active button to refresh
             if(activeBtn) activeBtn.click();
        }
    }

    // Events
    $('search-input').oninput = () => {
        const activeBtn = document.querySelector('.type-btn.active');
        // Hacky way to get current filters back, but keeps code small:
        // Default to 'all' if complex check is too much for this minified version
        renderGrid(['all']); 
    };
    $('sort-select').onchange = () => $('search-input').oninput();

    // Start
    init();

  </script>
</body>
</html>
