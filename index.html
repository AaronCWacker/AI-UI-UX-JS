<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI UI/UX App Gallery</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    .app-card { transition: transform 0.2s ease; }
    .app-card:hover { transform: translateY(-2px); }
    .type-badge { @apply px-2 py-0.5 text-xs rounded-full font-medium; }
  </style>
</head>
<body class="bg-gray-100 text-gray-800">
  <div class="container mx-auto px-2 py-4">
    <header class="text-center mb-6">
      <h1 class="text-2xl sm:text-3xl font-semibold text-gray-900">AI UI/UX App Gallery</h1>

      <!-- Type Filter Buttons -->
      <div id="type-filter" class="mt-4 flex flex-wrap justify-center gap-2 max-w-2xl mx-auto">
        <button data-type="all" class="type-btn active px-3 py-1 text-xs font-medium rounded-full bg-indigo-100 text-indigo-700">All</button>
      </div>

      <!-- Search Input -->
      <div class="mt-4 max-w-md mx-auto">
        <input
          type="text"
          id="search-input"
          placeholder="Search (e.g., Tarot, Sim, 3D)"
          class="w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"
        />
      </div>
    </header>

    <main id="app-gallery" class="grid grid-cols-[repeat(auto-fit,minmax(150px,1fr))] gap-2 sm:gap-3">
      <div id="loading" class="col-span-full text-center text-gray-500">
        <p>Loading apps...</p>
      </div>
    </main>

    <footer class="text-center mt-6 text-gray-500 text-sm">
      <p id="tile-count">0 Git Pages Spaces Shown</p>
      <p class="mt-2">© 2025 - Aaron Wacker AI UI UX GitHub Pages</p>
    </footer>
  </div>

  <script>
    // ==================== CONFIG: CLASSIFICATION RULES (EDIT HERE) ====================
    const CLASSIFICATIONS = [
      { keyword: 'Tarot',  title: 'Tarot', emoji: 'Card',        color: 'bg-purple-100 text-purple-700' },
      { keyword: 'Alien',  title: 'Alien', emoji: 'Alien',       color: 'bg-green-100 text-green-700' },
      { keyword: 'Game',   title: 'Game',  emoji: 'Game Controller', color: 'bg-yellow-100 text-yellow-700' },
      { keyword: 'Sim',    title: 'Sim',   emoji: 'Cityscape',   color: 'bg-blue-100 text-blue-700' },
      { keyword: 'App',    title: 'AI',    emoji: 'Robot',       color: 'bg-indigo-100 text-indigo-700' },
      { keyword: 'GPS',    title: 'GPS',   emoji: 'Map',         color: 'bg-teal-100 text-teal-700' },
      { keyword: 'Evo',    title: 'Evo',   emoji: 'DNA',         color: 'bg-pink-100 text-pink-700' },
      { keyword: 'Slot',   title: 'Slot',  emoji: 'Slot Machine',    color: 'bg-red-100 text-red-700' },
      { keyword: 'Two',    title: '2P',    emoji: 'Versus',      color: 'bg-orange-100 text-orange-700' },
      { keyword: '3D',     title: '3D',    emoji: 'Cube',        color: 'bg-cyan-100 text-cyan-700' }
    ];

    const ROOT = 'https://aaroncwacker.github.io/AI-UI-UX-JS/';
    const GITHUB_USER = 'aaroncwacker';
    const GITHUB_REPO = 'AI-UI-UX-JS';
    const gallery = document.getElementById('app-gallery');
    const loadingIndicator = document.getElementById('loading');
    const searchInput = document.getElementById('search-input');
    const tileCount = document.getElementById('tile-count');
    const typeFilterContainer = document.getElementById('type-filter');

    const FALLBACK = [ /* ... your fallback list ... */ ];

    const displayName = (filename) => filename.replace(/\.html$/, '').replace(/[\-_]/g, ' ');

    // Get classification
    function getClassification(filename) {
      const name = displayName(filename).toLowerCase();
      for (const cls of CLASSIFICATIONS) {
        if (name.includes(cls.keyword.toLowerCase())) {
          return cls;
        }
      }
      return null;
    }

    // Create filter buttons
    function createTypeFilters() {
      CLASSIFICATIONS.forEach(cls => {
        const btn = document.createElement('button');
        btn.dataset.type = cls.keyword.toLowerCase();
        btn.className = `type-btn px-2 py-1 text-xs font-medium rounded-full ${cls.color}`;
        btn.innerHTML = `${cls.emoji} ${cls.title} ${cls.emoji}`;
        typeFilterContainer.appendChild(btn);
      });
    }

    // Card factory
    function makeCard(filename, index) {
      const name = displayName(filename);
      const relUrl = filename;
      const absUrl = ROOT + filename;
      const classification = getClassification(filename);

      const card = document.createElement('div');
      card.className = 'app-card bg-white rounded-md shadow-sm p-3 cursor-pointer hover:bg-gray-50';
      card.dataset.name = name.toLowerCase();
      card.dataset.types = classification ? classification.keyword.toLowerCase() : '';

      const badge = classification
        ? `<div class="type-badge ${classification.color}">${classification.emoji} ${classification.title} ${classification.emoji}</div>`
        : '<div class="h-5"></div>';

      card.innerHTML = `
        ${badge}
        <div class="flex items-baseline mt-1">
          <span class="text-xs font-semibold text-gray-500 mr-2">${index + 1}.</span>
          <h2 class="text-xs font-medium text-gray-900 line-clamp-2 flex-1">${name}</h2>
        </div>
        <a href="${absUrl}" target="_blank" rel="noopener" class="text-xs text-indigo-500 underline truncate block mt-1">${absUrl}</a>
      `;

      card.addEventListener('click', (e) => {
        if (e.target.closest('a')) return;
        window.location.href = relUrl;
      });

      return card;
    }

    function updateTileCount() {
      const visible = Array.from(gallery.querySelectorAll('.app-card'))
        .filter(c => c.style.display !== 'none').length;
      tileCount.textContent = `${visible} Git Pages Spaces Shown`;
    }

    let currentTypeFilter = 'all';

    function filterGallery() {
      const term = searchInput.value.toLowerCase();
      const cards = gallery.querySelectorAll('.app-card');

      cards.forEach(card => {
        const matchesSearch = card.dataset.name.includes(term);
        const matchesType = currentTypeFilter === 'all' || card.dataset.types.includes(currentTypeFilter);
        card.style.display = (matchesSearch && matchesType) ? '' : 'none';
      });

      const visible = Array.from(cards).filter(c => c.style.display !== 'none');
      visible.forEach((c, i) => {
        const span = c.querySelector('span');
        if (span) span.textContent = `${i + 1}.`;
      });

      updateTileCount();
    }

    function populate(files) {
      loadingIndicator.style.display = 'none';
      gallery.innerHTML = '';
      const frag = document.createDocumentFragment();
      files.forEach((f, i) => frag.appendChild(makeCard(f, i)));
      gallery.appendChild(frag);
      filterGallery();
    }

    async function buildGallery() {
      const apiUrl = `https://api.github.com/repos/${GITHUB_USER}/${GITHUB_REPO}/contents/`;
      try {
        const resp = await fetch(apiUrl, { headers: { 'Accept': 'application/vnd.github+json' } });
        if (!resp.ok) throw new Error(`GitHub API error: ${resp.status}`);
        const data = await resp.json();
        const htmlFiles = data
          .filter(f => f.type === 'file' && f.name.endsWith('.html') && f.name !== 'index.html')
          .map(f => f.name)
          .sort((a, b) => a.localeCompare(b));
        if (!htmlFiles.length) throw new Error('No HTML files');
        populate(htmlFiles);
      } catch (e) {
        console.warn('GitHub API failed – using fallback:', e);
        populate(FALLBACK);
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      createTypeFilters();
      buildGallery();

      document.querySelectorAll('.type-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('.type-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          currentTypeFilter = btn.dataset.type;
          filterGallery();
        });
      });

      searchInput.addEventListener('input', filterGallery);
    });
  </script>
</body>
</html>
