<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>AI UI/UX App Gallery</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    
    /* FLUID GRID SETUP */
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); 
      gap: 1rem;
      width: 100%;
    }
    @media (max-width: 400px) {
      .gallery-grid {
        grid-template-columns: repeat(auto-fill, minmax(135px, 1fr));
        gap: 0.5rem;
      }
    }

    .app-card { 
        transition: all .2s ease;
        height: 100%; 
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        border: 1px solid rgba(0,0,0,0.06); 
    }
    .app-card:hover { 
        transform: translateY(-3px); 
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        border-color: rgba(99, 102, 241, 0.4);
    }
    
    .type-badge { @apply px-2 py-0.5 text-[10px] uppercase tracking-wider rounded-md font-bold flex items-center justify-center; }
    .type-btn { @apply flex items-center justify-center space-x-1 transition-all duration-200; }
    .type-btn.active { @apply ring-2 ring-offset-1 ring-indigo-500 bg-indigo-100 text-indigo-700 border-transparent; }
    
    /* TYPOGRAPHY & LAYOUT */
    .app-title-block { @apply mt-2 mb-2 overflow-hidden flex-grow; } 
    .line-clamp-3 { 
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 3;
        overflow: hidden;
        line-height: 1.25rem;
    }
    
    .card-footer { @apply border-t border-gray-100 pt-2 mt-auto; }
    .action-btn { @apply text-[10px] sm:text-xs flex items-center justify-center px-2 py-1.5 rounded-md transition w-full; }
    
    /* FORM ELEMENTS */
    .search-input { @apply w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm; }
    .sort-select { @apply px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 shadow-sm bg-white text-gray-700 cursor-pointer; }

    /* SCROLLBAR */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #f1f1f1; }
    ::-webkit-scrollbar-thumb { background: #c7c7c7; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #a0a0a0; }
  </style>
</head>
<body class="bg-gray-50 text-gray-800 min-h-screen flex flex-col">

  <div class="w-full px-3 sm:px-6 py-4 flex-grow flex flex-col">
    
    <header class="mb-4">
      <div class="flex flex-col md:flex-row justify-between items-center gap-4 mb-4 border-b border-gray-200 pb-4">
          <h1 class="text-xl sm:text-2xl font-bold text-gray-900 whitespace-nowrap">
            AI UI/UX <span class="text-indigo-600">Gallery</span>
          </h1>

          <div class="w-full max-w-2xl flex gap-2">
            <input type="text" id="search-input" placeholder="Search apps..." class="search-input flex-grow">
            
            <select id="sort-select" class="sort-select w-32 flex-shrink-0">
                <option value="alpha">A-Z</option>
                <option value="newest">Newest</option>
                <option value="oldest">Oldest</option>
            </select>
          </div>
      </div>

      <div id="type-filter" class="flex flex-wrap justify-center sm:justify-start gap-1.5">
        <button data-type="all" class="type-btn active px-3 py-1 text-xs font-medium rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300">All</button>
      </div>
    </header>

    <main id="app-gallery" class="gallery-grid">
      <div id="loading" class="col-span-full text-center text-gray-500 py-10 animate-pulse">
          <p>Scanning Repository...</p>
      </div>
    </main>

  </div>

  <footer class="text-center py-4 bg-white border-t border-gray-200 text-gray-400 text-xs">
    <p id="tile-count">0 Apps Loaded</p>
    <p class="mt-1">Â© 2025 Aaron Wacker</p>
  </footer>

  <script>
    // ==================== CONFIG ====================
    const CLASSIFICATIONS = [
      { keyword: 'Tarot', label: 'Tarot',   emoji: 'ðŸ”®', color: 'bg-purple-100 text-purple-700' },
      { keyword: 'Alien', label: 'Aliens',  emoji: 'ðŸ‘½', color: 'bg-green-100 text-green-700' },
      { keyword: 'Game',  label: 'Game',    emoji: 'ðŸŽ®', color: 'bg-yellow-100 text-yellow-700' },
      { keyword: 'Sim',   label: 'Sim',     emoji: 'ðŸ™ï¸', color: 'bg-blue-100 text-blue-700' },
      { keyword: 'AI',    label: 'AI',      emoji: 'ðŸ¤–', color: 'bg-indigo-100 text-indigo-700' },
      { keyword: 'GPS',   label: 'GPS',     emoji: 'ðŸ—ºï¸', color: 'bg-teal-100 text-teal-700' },
      { keyword: 'Speech',label: 'Speech',  emoji: 'ðŸŽ¤', color: 'bg-pink-100 text-pink-700' },
      { keyword: 'Slot',  label: 'Slot',    emoji: 'ðŸŽ°', color: 'bg-red-100 text-red-700' },
      { keyword: 'Two',   label: '2P',      emoji: 'âš”ï¸', color: 'bg-orange-100 text-orange-700' },
      { keyword: '3D',    label: '3D',      emoji: 'ðŸ§Š', color: 'bg-cyan-100 text-cyan-700' }
    ];

    const ROOT = 'https://aaroncwacker.github.io/AI-UI-UX-JS/';
    const GITHUB_USER = 'aaroncwacker';
    const GITHUB_REPO = 'AI-UI-UX-JS';
    
    // DOM Elements
    const gallery = document.getElementById('app-gallery');
    const loading = document.getElementById('loading');
    const search = document.getElementById('search-input');
    const sortSelect = document.getElementById('sort-select');
    const count = document.getElementById('tile-count');
    const filterBox = document.getElementById('type-filter');

    const FALLBACK = [
      'AI_Agentic_City.html','AI_Architecture_Modeler_For_Diagrams_with_File_Save.html','AI_Traffic_Evolution_Simulator.html','AI_Traffic_Simulator.html','Abstract_Position_Auctions_Visualizer.html','Alien_Earth_3D_Arcade_Game.html','Alien_Earth_Evolution_3D.html','Alien_Earth_Legends_3D.html','ArXiV_Gradient_Free_BOED_via_Interacting_Particle_Systems.html','Art_World_Builder.html','Asteroids.html','Car_Wars_AutoDuel_Arenas_Tracks_MN_WI_TX_FL_CA.html','Castle_Builder.html','Character_Art_Encyclopedia.html','Chord_Sheet_Teleprompter.html','Cybernetic_City_Sim_ThreeJS.html','Dig_Dug_3D.html','Dynamic_City_Agent_Control_System.html','Dynamic_Large_Scale_City.html','Enhanced_AI_Evolution_Simulator.html','File_Explorer_Knowledge_Graph_Viz.html','GPS_Map.html','Galaga_88_3D_Retro_Arcade.html','Infinite_World_Builder.html','Interactive_Bookmark_Bar.html','Interactive_File_Visualizer_Squarified_Treemap_Folder_Explorer.html','Isle_of_Mull_Ferry_Driving_Simulator.html','Lake_Minnetonka_Mound_Docks_at_Dusk_Sim.html','Lake_Minnetonka_Sailing_Tower_Defense_Naval_Battle_Sim.html','Legends_of_the_Triple_Eclipse.html','Mappy_3D_Synthwave_Edition.html','Mermaids_of_Minnetonka.html','Pagani_Zonda_Racing_ACW_DHH.html','PlayCanvas_Flappy_Plane_Swoop_Sim.html','Plinko_3D-Angels_All_Around_You.html','Road_Following_AI_Evolution_Simulator.html','Sams_Birthday_Interactive_Quiz.html','Slithering.html','Sphere_Eaters_Rollolio.html','Tarot_A_Legacy_in_Metal_Steel_Engineering_Innovation_Deck.html','Tarot_All_Saints_Deck.html','Tarot_Angels_and_Nordic_Deities.html','Tarot_Card_SVG_Designer.html','Tarot_Magnetic_Metals_and_Heritage_Deck.html','Tarot_Metals_Magnetism_Heritage_Steel_and_Metal_Deck.html','Tarot_Moulin_Rouge_Deck.html','Tarot_Moulin_Rouge_v2.html','Tarot_of_Angels_In_Our_Solar_System.html','ThreeJS_HuggingFace_Dataset_Reader.html','Time_Series_Teleprompter_JBP_Wisdom.html','Transformers_JS_Depth_Anything_3D_From_2D.html','Two_Player_Blocky_Brawl_Dungeon_Dimensions.html','Two_Player_Combat_Quest.html','Two_Player_Coop_Combat.html','Two_Players_Byte_Sized_Brawl.html','Two_Players_Leaning_Tower_of_Pisa.html','Two_Players_Punch_Up.html','Yars_3D_Breakout_Two_Players.html','Yars_Revenge_3D_Googley_Eyes_Two_Player.html'
    ];

    // Global state to hold file data (name, date, element)
    let appData = [];

    const displayName = f => f.replace(/\.html$/, '').replace(/[\-_]/g, ' ');

    function getCls(filename) {
      const name = displayName(filename).toLowerCase();
      for (const c of CLASSIFICATIONS) {
        if (name.includes(c.keyword.toLowerCase())) return c;
      }
      return null;
    }

    function buildFilters() {
      CLASSIFICATIONS.forEach(c => {
        const btn = document.createElement('button');
        btn.dataset.type = c.keyword.toLowerCase();
        btn.className = `type-btn px-2 py-1 text-xs font-semibold rounded-lg bg-white border border-gray-200 text-gray-600 hover:bg-gray-50 hover:border-indigo-300`;
        btn.innerHTML = `<span>${c.emoji}</span><span>${c.label}</span>`;
        filterBox.appendChild(btn);
      });
    }

    function formatDate(dateObj) {
      if (!dateObj || dateObj.getTime() === 0) return '';
      return dateObj.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: '2-digit' });
    }

    function makeCard(item, idx) {
      const file = item.name;
      const name = displayName(file);
      const abs = ROOT + file;
      const githubSource = `https://github.com/${GITHUB_USER}/${GITHUB_REPO}/blob/main/${file}`;
      const cls = getCls(file);
      const dateStr = formatDate(item.date);

      const card = document.createElement('div');
      card.className = 'app-card bg-white rounded-lg p-3 relative';
      card.dataset.name = name.toLowerCase();
      card.dataset.types = cls ? cls.keyword.toLowerCase() : '';

      const badge = cls
        ? `<div class="type-badge ${cls.color}"><span>${cls.emoji}</span><span class="ml-1">${cls.label}</span></div>`
        : '';

      card.innerHTML = `
        <div class="flex items-center justify-between mb-1">
            <span class="text-xs font-bold text-gray-300 index-span">#${idx + 1}</span>
            ${badge}
        </div>
        
        <div class="app-title-block">
            <h2 class="text-sm font-bold text-gray-800 leading-tight line-clamp-3" title="${name}">${name}</h2>
        </div>
        
        <div class="card-footer">
           <div class="flex gap-2">
             <a href="${abs}" target="_blank" rel="noopener" class="action-btn bg-indigo-600 text-white hover:bg-indigo-700 shadow-sm flex-grow">
                Launch
             </a>
             <a href="${githubSource}" target="_blank" rel="noopener" class="action-btn bg-white text-gray-600 border border-gray-200 hover:bg-gray-50 w-auto">
                Code
             </a>
           </div>
           ${dateStr ? `<div class="mt-2 text-[10px] text-gray-400 text-right">Updated: ${dateStr}</div>` : ''}
        </div>
      `;

      card.addEventListener('click', e => {
        if (e.target.closest('a')) return;
        window.open(abs, '_blank');
      });
      
      return card;
    }

    // Refresh the grid based on current 'appData' order and filters
    function renderGrid() {
       gallery.innerHTML = '';
       const frag = document.createDocumentFragment();
       
       // 1. Sort Data
       const sortMode = sortSelect.value;
       appData.sort((a, b) => {
           if (sortMode === 'newest') return b.date - a.date;
           if (sortMode === 'oldest') return a.date - b.date;
           return a.name.localeCompare(b.name); // Default alpha
       });

       // 2. Filter & Build
       let visibleIndex = 1;
       const term = search.value.toLowerCase();
       const type = document.querySelector('.type-btn.active').dataset.type;

       appData.forEach(item => {
           // Logic to re-create card OR re-attach existing card? 
           // Re-creating is safer for index numbers updates
           const card = makeCard(item, 0); 
           
           const okSearch = card.dataset.name.includes(term);
           const okType = type === 'all' || card.dataset.types.includes(type);

           if (okSearch && okType) {
               card.querySelector('.index-span').textContent = `#${visibleIndex++}`;
               frag.appendChild(card);
           }
       });

       gallery.appendChild(frag);
       count.textContent = `${visibleIndex - 1} Apps Shown`;
    }

    // Attempt to fetch Last-Modified header for every file
    // Note: GitHub Pages might return the Deploy Date for all files.
    async function fetchDates(filenames) {
        const promises = filenames.map(async (name) => {
            let date = new Date(0); // Default to epoch if fail
            try {
                // HEAD request to the live GitHub Pages URL
                const response = await fetch(ROOT + name, { method: 'HEAD' });
                const lastMod = response.headers.get('Last-Modified');
                if (lastMod) {
                    date = new Date(lastMod);
                }
            } catch (e) {
                // Silent fail, keep epoch
            }
            return { name, date };
        });
        
        return Promise.all(promises);
    }

    async function load() {
      const api = `https://api.github.com/repos/${GITHUB_USER}/${GITHUB_REPO}/contents/`;
      let filenames = [];
      
      try {
        const r = await fetch(api, { headers: { 'Accept': 'application/vnd.github+json' } });
        if (!r.ok) throw new Error(r.status);
        const data = await r.json();
        filenames = data
          .filter(f => f.type === 'file' && f.name.endsWith('.html') && f.name !== 'index.html')
          .map(f => f.name);
      } catch (e) {
        console.warn('GitHub API failed â†’ using fallback', e);
        filenames = FALLBACK;
      }

      // Initial render (Alpha) while we wait for dates
      appData = filenames.map(f => ({ name: f, date: new Date(0) }));
      renderGrid();

      // Background fetch dates
      const dataWithDates = await fetchDates(filenames);
      
      // Update state and re-render if we found valid dates
      appData = dataWithDates;
      
      // If we found recent dates, we could auto-sort, but let's stick to Alpha default
      // Just re-render to show the date badges
      renderGrid();
    }

    document.
