<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI UI/UX App Gallery</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    .app-card { transition: transform 0.2s ease; }
    .app-card:hover { transform: translateY(-2px); }
    .type-badge { @apply px-2 py-0.5 text-xs rounded-full font-medium; }
  </style>
</head>
<body class="bg-gray-100 text-gray-800">
  <div class="container mx-auto px-2 py-4">
    <header class="text-center mb-6">
      <h1 class="text-2xl sm:text-3xl font-semibold text-gray-900">AI UI/UX App Gallery</h1>

      <!-- Type Filter Buttons -->
      <div id="type-filter" class="mt-4 flex flex-wrap justify-center gap-2 max-w-2xl mx-auto">
        <button data-type="all" class="type-btn active px-3 py-1 text-xs font-medium rounded-full bg-indigo-100 text-indigo-700">All</button>
      </div>

      <!-- Search Input -->
      <div class="mt-4 max-w-md mx-auto">
        <input
          type="text"
          id="search-input"
          placeholder="Search apps (e.g., Tarot, Game)"
          class="w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"
        />
      </div>
    </header>

    <main id="app-gallery" class="grid grid-cols-[repeat(auto-fit,minmax(150px,1fr))] gap-2 sm:gap-3">
      <div id="loading" class="col-span-full text-center text-gray-500">
        <p>Loading apps...</p>
      </div>
    </main>

    <footer class="text-center mt-6 text-gray-500 text-sm">
      <p id="tile-count">0 Git Pages Spaces Shown</p>
      <p class="mt-2">&copy; 2025 - Aaron Wacker AI UI UX GitHub Pages</p>
    </footer>
  </div>

  <script>
    // === CONFIG: CLASSIFICATION RULES (EDIT HERE) ===
    const CLASSIFICATIONS = [
      {
        keyword: 'Tarot',
        title: 'Tarot Oracle',
        emoji: 'ðŸƒâœ¨',
        color: 'bg-purple-100 text-purple-700'
      },
      {
        keyword: 'Alien',
        title: 'Alien Worlds',
        emoji: 'ðŸ‘½ðŸŒŒ',
        color: 'bg-green-100 text-green-700'
      },
      {
        keyword: 'Game',
        title: 'Arcade Games',
        emoji: 'ðŸŽ®ðŸš€',
        color: 'bg-yellow-100 text-yellow-700'
      }
    ];

    const ROOT = 'https://aaroncwacker.github.io/AI-UI-UX-JS/';
    const GITHUB_USER = 'aaroncwacker';
    const GITHUB_REPO = 'AI-UI-UX-JS';
    const gallery = document.getElementById('app-gallery');
    const loadingIndicator = document.getElementById('loading');
    const searchInput = document.getElementById('search-input');
    const tileCount = document.getElementById('tile-count');
    const typeFilterContainer = document.getElementById('type-filter');

    const FALLBACK = [
      'AI_Agentic_City.html','AI_Architecture_Modeler_For_Diagrams_with_File_Save.html','AI_Traffic_Evolution_Simulator.html','AI_Traffic_Simulator.html','Abstract_Position_Auctions_Visualizer.html','Alien_Earth_3D_Arcade_Game.html','Alien_Earth_Evolution_3D.html','Alien_Earth_Legends_3D.html','ArXiV_Gradient_Free_BOED_via_Interacting_Particle_Systems.html','Art_World_Builder.html','Asteroids.html','Car_Wars_AutoDuel_Arenas_Tracks_MN_WI_TX_FL_CA.html','Castle_Builder.html','Character_Art_Encyclopedia.html','Chord_Sheet_Teleprompter.html','Cybernetic_City_Sim_ThreeJS.html','Dig_Dug_3D.html','Dynamic_City_Agent_Control_System.html','Dynamic_Large_Scale_City.html','Enhanced_AI_Evolution_Simulator.html','File_Explorer_Knowledge_Graph_Viz.html','GPS_Map.html','Galaga_88_3D_Retro_Arcade.html','Infinite_World_Builder.html','Interactive_Bookmark_Bar.html','Interactive_File_Visualizer_Squarified_Treemap_Folder_Explorer.html','Isle_of_Mull_Ferry_Driving_Simulator.html','Lake_Minnetonka_Mound_Docks_at_Dusk_Sim.html','Lake_Minnetonka_Sailing_Tower_Defense_Naval_Battle_Sim.html','Legends_of_the_Triple_Eclipse.html','Mappy_3D_Synthwave_Edition.html','Mermaids_of_Minnetonka.html','Pagani_Zonda_Racing_ACW_DHH.html','PlayCanvas_Flappy_Plane_Swoop_Sim.html','Plinko_3D-Angels_All_Around_You.html','Road_Following_AI_Evolution_Simulator.html','Sams_Birthday_Interactive_Quiz.html','Slithering.html','Sphere_Eaters_Rollolio.html','Tarot_A_Legacy_in_Metal_Steel_Engineering_Innovation_Deck.html','Tarot_All_Saints_Deck.html','Tarot_Angels_and_Nordic_Deities.html','Tarot_Card_SVG_Designer.html','Tarot_Magnetic_Metals_and_Heritage_Deck.html','Tarot_Metals_Magnetism_Heritage_Steel_and_Metal_Deck.html','Tarot_Moulin_Rouge_Deck.html','Tarot_Moulin_Rouge_v2.html','Tarot_of_Angels_In_Our_Solar_System.html','ThreeJS_HuggingFace_Dataset_Reader.html','Time_Series_Teleprompter_JBP_Wisdom.html','Transformers_JS_Depth_Anything_3D_From_2D.html','Two_Player_Blocky_Brawl_Dungeon_Dimensions.html','Two_Player_Combat_Quest.html','Two_Player_Coop_Combat.html','Two_Players_Byte_Sized_Brawl.html','Two_Players_Leaning_Tower_of_Pisa.html','Two_Players_Punch_Up.html','Yars_3D_Breakout_Two_Players.html','Yars_Revenge_3D_Googley_Eyes_Two_Player.html'
    ];

    const displayName = (filename) => filename.replace(/\.html$/, '').replace(/[\-_]/g, ' ');

    // Get classification for a filename
    function getClassification(filename) {
      const name = displayName(filename).toLowerCase();
      for (const cls of CLASSIFICATIONS) {
        if (name.includes(cls.keyword.toLowerCase())) {
          return cls;
        }
      }
      return null;
    }

    // Create type filter buttons
    function createTypeFilters() {
      CLASSIFICATIONS.forEach(cls => {
        const btn = document.createElement('button');
        btn.dataset.type = cls.keyword.toLowerCase();
        btn.className = `type-btn px-3 py-1 text-xs font-medium rounded-full ${cls.color}`;
        btn.textContent = `${cls.emoji} ${cls.title}`;
        typeFilterContainer.appendChild(btn);
      });
    }

    function makeCard(filename, index) {
      const name = displayName(filename);
      const relUrl = filename;
      const absUrl = ROOT + filename;
      const classification = getClassification(filename);

      const card = document.createElement('div');
      card.className = 'app-card bg-white rounded-md shadow-sm p-3 cursor-pointer hover:bg-gray-50';
      card.dataset.name = name.toLowerCase();
      card.dataset.types = classification ? classification.keyword.toLowerCase() : '';

      const badgeHtml = classification
        ? `<div class="type-badge ${classification.color}">${classification.emoji} ${classification.title}</div>`
        : '<div class="h-5"></div>'; // spacer

      card.innerHTML = `
        ${badgeHtml}
        <div class="flex items-baseline mt-1">
          <span class="text-xs font-semibold text-gray-500 mr-2">${index + 1}.</span>
          <h2 class="text-xs font-medium text-gray-900 line-clamp-2 flex-1">${name}</h2>
        </div>
        <a href="${absUrl}" target="_blank" rel="noopener" class="text-xs text-indigo-500 underline truncate block mt-1">${absUrl}</a>
      `;

      card.addEventListener('click', (e) => {
        if (e.target.closest('a')) return;
        window.location.href = relUrl;
      });

      return card;
    }

    function updateTileCount() {
      const visibleCards = Array.from(gallery.querySelectorAll('.app-card'))
        .filter(card => card.style.display !== 'none').length;
      tileCount.textContent = `${visibleCards} Git Pages Spaces Shown`;
    }

    let currentTypeFilter = 'all';

    function filterGallery() {
      const searchTerm = searchInput.value.toLowerCase();
      const cards = gallery.querySelectorAll('.app-card');

      cards.forEach(card => {
        const matchesSearch = card.dataset.name.includes(searchTerm);
        const matchesType = currentTypeFilter === 'all' || card.dataset.types.includes(currentTypeFilter);
        card.style.display = (matchesSearch && matchesType) ? '' : 'none';
      });

      // Renumber visible
      const visible = Array.from(cards).filter(c => c.style.display !== 'none');
      visible.forEach((c, i) => {
        const span = c.querySelector('span');
        if (span) span.textContent = `${i + 1}.`;
      });

      updateTileCount();
    }

    function populate(files) {
      loadingIndicator.style.display = 'none';
      gallery.innerHTML = '';
      const frag = document.createDocumentFragment();
      files.forEach((f, i) => frag.appendChild(makeCard(f, i)));
      gallery.appendChild(frag);
      filterGallery(); // apply current filters
    }

    async function buildGallery() {
      const apiUrl = `https://api.github.com/repos/${GITHUB_USER}/${GITHUB_REPO}/contents/`;
      try {
        const response = await fetch(apiUrl, { headers: { 'Accept': 'application/vnd.github+json' } });
        if (!response.ok) throw new Error(`GitHub API error: ${response.status}`);
        const files = await response.json();
        const htmlFiles = files
          .filter(file => file.type === 'file' && file.name.endsWith('.html') && file.name !== 'index.html')
          .map(file => file.name)
          .sort((a, b) => a.localeCompare(b));
        if (htmlFiles.length === 0) throw new Error('No HTML apps found');
        populate(htmlFiles);
      } catch (err) {
        console.warn('GitHub API failed, using fallback list:', err.message || err);
        populate(FALLBACK);
      }
    }

    // === EVENT LISTENERS ===
    document.addEventListener('DOMContentLoaded', () => {
      createTypeFilters();
      buildGallery();

      // Type filter buttons
      document.querySelectorAll('.type-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('.type-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          currentTypeFilter = btn.dataset.type;
          filterGallery();
        });
      });

      // Search input
      searchInput.addEventListener('input', filterGallery);
    });
  </script>
</body>
</html>
