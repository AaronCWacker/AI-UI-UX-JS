<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ° FORTRESS OF THREE - The Riddle Song ğŸ°</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #0a0a0a;
            overflow: hidden;
            font-family: 'Courier New', monospace;
        }
        
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        #lyrics-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            pointer-events: none;
        }
        
        .lyric-line {
            font-size: 2.5rem;
            color: #ff0040;
            text-shadow: 
                0 0 10px #ff0040,
                0 0 20px #ff0040,
                0 0 40px #ff0040,
                0 0 80px #800020;
            opacity: 0;
            transform: scale(0.5);
            transition: all 0.3s ease-out;
            text-align: center;
            padding: 10px;
            text-transform: uppercase;
            letter-spacing: 4px;
            font-weight: bold;
        }
        
        .lyric-line.active {
            opacity: 1;
            transform: scale(1);
        }
        
        .lyric-line.fade {
            opacity: 0.3;
            transform: scale(0.8);
        }
        
        .emoji-burst {
            font-size: 4rem;
            position: absolute;
            animation: burst 1s ease-out forwards;
            pointer-events: none;
        }
        
        @keyframes burst {
            0% { transform: scale(0) rotate(0deg); opacity: 1; }
            100% { transform: scale(2) rotate(360deg); opacity: 0; }
        }
        
        #info-panel {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 100;
            background: rgba(0,0,0,0.8);
            border: 2px solid #ff0040;
            padding: 20px;
            color: #fff;
            max-width: 400px;
            pointer-events: auto;
        }
        
        #info-panel h2 {
            color: #ff0040;
            margin-bottom: 10px;
            text-shadow: 0 0 10px #ff0040;
        }
        
        .equation {
            font-size: 1.5rem;
            color: #00ffff;
            text-align: center;
            margin: 15px 0;
            text-shadow: 0 0 10px #00ffff;
        }
        
        #controls {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
            pointer-events: auto;
        }
        
        button {
            background: linear-gradient(180deg, #ff0040, #800020);
            border: 2px solid #ff0040;
            color: white;
            padding: 15px 30px;
            font-size: 1.2rem;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-family: 'Courier New', monospace;
            transition: all 0.3s;
            margin: 5px;
        }
        
        button:hover {
            background: linear-gradient(180deg, #ff3366, #ff0040);
            box-shadow: 0 0 30px #ff0040;
            transform: scale(1.05);
        }
        
        #bpm-display {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #ff0040;
            font-size: 2rem;
            z-index: 100;
            text-shadow: 0 0 10px #ff0040;
        }
        
        .pillar-label {
            position: absolute;
            color: #00ffff;
            font-size: 1.5rem;
            text-shadow: 0 0 20px #00ffff;
            pointer-events: none;
        }
        
        #title {
            position: fixed;
            top: 80px;
            width: 100%;
            text-align: center;
            z-index: 100;
            pointer-events: none;
        }
        
        #title h1 {
            font-size: 3rem;
            color: #ff0040;
            text-shadow: 
                0 0 10px #ff0040,
                0 0 20px #ff0040,
                0 0 40px #800020;
            letter-spacing: 8px;
        }
        
        #riddle-solution {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 100;
            background: rgba(0,0,0,0.9);
            border: 2px solid #00ffff;
            padding: 20px;
            color: #fff;
            text-align: center;
        }
        
        #riddle-solution .step {
            margin: 10px 0;
            font-size: 1.2rem;
        }
        
        .highlight {
            color: #ff0040;
            font-weight: bold;
        }
        
        .magic {
            color: #00ffff;
        }
    </style>
</head>
<body>
    <div id="canvas-container"></div>
    
    <div id="bpm-display">â™« 140 BPM â™«</div>
    
    <div id="title">
        <h1>ğŸ° FORTRESS OF THREE ğŸ°</h1>
    </div>
    
    <div id="controls">
        <button onclick="startSong()">â–¶ IGNITE THE RIDDLE</button>
        <button onclick="toggleVisuals()">ğŸŒ€ TOGGLE CHAOS</button>
    </div>
    
    <div id="lyrics-overlay">
        <div class="lyric-line" id="lyric1"></div>
        <div class="lyric-line" id="lyric2"></div>
        <div class="lyric-line" id="lyric3"></div>
    </div>
    
    <div id="info-panel">
        <h2>ğŸ”® THE RIDDLE DECODED ğŸ”®</h2>
        <div class="equation">42 Ã· 14 = 3</div>
        <p><span class="highlight">ğŸŒŒ 42</span> = The Ultimate Answer</p>
        <p><span class="magic">âœ¨ 14</span> = The Number Magic (7+7)</p>
        <p><span class="highlight">ğŸ° 3</span> = NEED â€¢ WANT â€¢ DESIRE</p>
        <p style="margin-top:15px;color:#888;">The THREE PILLARS rise in the FORTRESS TOWER of SELF</p>
    </div>
    
    <div id="riddle-solution">
        <h3 style="color:#ff0040;">ğŸ“œ SOLVE THE RIDDLE ğŸ“œ</h3>
        <div class="step">ğŸŒŒ Ultimate = <span class="highlight">42</span></div>
        <div class="step">âœ¨ Magic = <span class="magic">14</span></div>
        <div class="step">ğŸ° 42 Ã· 14 = <span class="highlight">3</span></div>
        <div class="step" style="font-size:1.5rem;margin-top:15px;">
            ğŸ’ NEED ğŸ’ WANT ğŸ’ DESIRE
        </div>
    </div>

    <script>
        // THREE.JS FORTRESS VISUALIZATION
        let scene, camera, renderer;
        let tower, pillars = [];
        let particles = [];
        let isPlaying = false;
        let beat = 0;
        let chaosMode = true;
        
        // Song lyrics - Industrial Dark EBM style
        const lyrics = [
            { text: "ğŸŒŒ FORTY-TWO! THE ULTIMATE TRUTH! ğŸŒŒ", emoji: "ğŸŒŒ", duration: 2000 },
            { text: "THE ANSWER TO EVERYTHING â€” UNCOUTH!", emoji: "âš¡", duration: 2000 },
            { text: "âœ¨ FOURTEEN! DOUBLE SEVEN COMBINED! âœ¨", emoji: "âœ¨", duration: 2000 },
            { text: "THE NUMBER MAGIC â€” BLOW YOUR MIND!", emoji: "ğŸ”¥", duration: 2000 },
            { text: "", emoji: "", duration: 500 },
            { text: "ğŸ° DIVIDE! DIVIDE! DIVIDE! ğŸ°", emoji: "ğŸ°", duration: 1500 },
            { text: "42 OVER 14 â€” DON'T HIDE!", emoji: "â—", duration: 2000 },
            { text: "THE ANSWER IS THREE â€” CAN'T YOU SEE?!", emoji: "3ï¸âƒ£", duration: 2000 },
            { text: "THREE PILLARS STANDING â€” SET YOU FREE!", emoji: "ğŸ’", duration: 2000 },
            { text: "", emoji: "", duration: 500 },
            { text: "ğŸ’ NEED! ğŸ’", emoji: "ğŸ’", duration: 1000 },
            { text: "ğŸ’ WANT! ğŸ’", emoji: "ğŸ’", duration: 1000 },
            { text: "ğŸ’ DESIRE! ğŸ’", emoji: "ğŸ”¥", duration: 1000 },
            { text: "THREE FLAMES BURN IN THE TOWER OF FIRE!", emoji: "ğŸ”¥", duration: 2500 },
            { text: "", emoji: "", duration: 500 },
            { text: "ğŸ—¼ THE FORTRESS TOWER IS YOUR SOUL! ğŸ—¼", emoji: "ğŸ—¼", duration: 2000 },
            { text: "BUILD IT HIGH â€” TAKE CONTROL!", emoji: "âš”ï¸", duration: 2000 },
            { text: "NEED IS THE FOUNDATION â€” SURVIVAL'S CALL!", emoji: "ğŸ”ï¸", duration: 2500 },
            { text: "WANT IS THE MIDDLE â€” REACHING TALL!", emoji: "ğŸ“ˆ", duration: 2500 },
            { text: "DESIRE IS THE PEAK â€” ABOVE IT ALL!", emoji: "ğŸ‘‘", duration: 2500 },
            { text: "", emoji: "", duration: 500 },
            { text: "âš¡ SOLVE THE RIDDLE â€” BREAK THE CODE! âš¡", emoji: "âš¡", duration: 2000 },
            { text: "42! 14! THREE! â€” EXPLODE!", emoji: "ğŸ’¥", duration: 2000 },
            { text: "ğŸ”¢ MATH IS MAGIC â€” NUMBERS SPEAK! ğŸ”¢", emoji: "ğŸ”¢", duration: 2000 },
            { text: "FIND YOUR FORTRESS â€” FIND YOUR PEAK!", emoji: "ğŸ”ï¸", duration: 2500 },
            { text: "", emoji: "", duration: 500 },
            { text: "ğŸ’€ NEED â€” WHAT YOU MUST HAVE TO SURVIVE! ğŸ’€", emoji: "ğŸ’€", duration: 2500 },
            { text: "ğŸ–¤ WANT â€” WHAT KEEPS YOUR HUNGER ALIVE! ğŸ–¤", emoji: "ğŸ–¤", duration: 2500 },
            { text: "ğŸ”¥ DESIRE â€” THE FIRE THAT MAKES YOU THRIVE! ğŸ”¥", emoji: "ğŸ”¥", duration: 2500 },
            { text: "", emoji: "", duration: 500 },
            { text: "ğŸ° IN THE FORTRESS TOWER â€” THEY UNITE! ğŸ°", emoji: "ğŸ°", duration: 2000 },
            { text: "THREE BECOME ONE â€” BURNING BRIGHT!", emoji: "â˜€ï¸", duration: 2000 },
            { text: "THE RIDDLE SOLVED â€” EMBRACE THE LIGHT!", emoji: "âœ¨", duration: 2000 },
            { text: "42 Ã· 14 = 3 â€” THAT'S RIGHT!", emoji: "âœ…", duration: 3000 },
            { text: "", emoji: "", duration: 1000 },
            { text: "ğŸŒŒ NEED ğŸŒŒ WANT ğŸŒŒ DESIRE ğŸŒŒ", emoji: "ğŸŒŒ", duration: 3000 },
            { text: "ğŸ° BUILD YOUR FORTRESS EVER HIGHER! ğŸ°", emoji: "ğŸ°", duration: 3000 },
        ];
        
        function init() {
            // Scene setup
            scene = new THREE.Scene();
            scene.fog = new THREE.FogExp2(0x0a0a0a, 0.02);
            
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 15, 30);
            camera.lookAt(0, 10, 0);
            
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0x0a0a0a);
            document.getElementById('canvas-container').appendChild(renderer.domElement);
            
            // Lighting
            const ambientLight = new THREE.AmbientLight(0x222222);
            scene.add(ambientLight);
            
            const redLight = new THREE.PointLight(0xff0040, 2, 100);
            redLight.position.set(-10, 20, 10);
            scene.add(redLight);
            
            const cyanLight = new THREE.PointLight(0x00ffff, 2, 100);
            cyanLight.position.set(10, 20, -10);
            scene.add(cyanLight);
            
            // Create fortress tower base
            const towerGeo = new THREE.CylinderGeometry(8, 12, 20, 8);
            const towerMat = new THREE.MeshPhongMaterial({
                color: 0x1a1a2e,
                emissive: 0x0a0a1a,
                shininess: 100,
                wireframe: false
            });
            tower = new THREE.Mesh(towerGeo, towerMat);
            tower.position.y = 5;
            scene.add(tower);
            
            // Create THREE PILLARS - NEED, WANT, DESIRE
            const pillarColors = [0xff0040, 0x00ffff, 0xffff00];
            const pillarNames = ['NEED', 'WANT', 'DESIRE'];
            const pillarHeights = [8, 12, 16];
            
            for (let i = 0; i < 3; i++) {
                const angle = (i * Math.PI * 2 / 3) - Math.PI / 2;
                const radius = 5;
                
                const pillarGeo = new THREE.CylinderGeometry(0.8, 1.2, pillarHeights[i], 6);
                const pillarMat = new THREE.MeshPhongMaterial({
                    color: pillarColors[i],
                    emissive: pillarColors[i],
                    emissiveIntensity: 0.3,
                    shininess: 150
                });
                
                const pillar = new THREE.Mesh(pillarGeo, pillarMat);
                pillar.position.x = Math.cos(angle) * radius;
                pillar.position.z = Math.sin(angle) * radius;
                pillar.position.y = 15 + pillarHeights[i] / 2;
                pillar.userData = { 
                    name: pillarNames[i], 
                    baseY: 15 + pillarHeights[i] / 2,
                    color: pillarColors[i]
                };
                
                pillars.push(pillar);
                scene.add(pillar);
                
                // Pillar glow
                const glowGeo = new THREE.SphereGeometry(1.5, 16, 16);
                const glowMat = new THREE.MeshBasicMaterial({
                    color: pillarColors[i],
                    transparent: true,
                    opacity: 0.3
                });
                const glow = new THREE.Mesh(glowGeo, glowMat);
                glow.position.copy(pillar.position);
                glow.position.y += pillarHeights[i] / 2 + 1;
                scene.add(glow);
            }
            
            // Create particle system
            for (let i = 0; i < 200; i++) {
                const particleGeo = new THREE.SphereGeometry(0.1, 8, 8);
                const particleMat = new THREE.MeshBasicMaterial({
                    color: Math.random() > 0.5 ? 0xff0040 : 0x00ffff,
                    transparent: true,
                    opacity: 0.8
                });
                const particle = new THREE.Mesh(particleGeo, particleMat);
                
                particle.position.x = (Math.random() - 0.5) * 60;
                particle.position.y = Math.random() * 40;
                particle.position.z = (Math.random() - 0.5) * 60;
                
                particle.userData = {
                    velocity: new THREE.Vector3(
                        (Math.random() - 0.5) * 0.1,
                        Math.random() * 0.1,
                        (Math.random() - 0.5) * 0.1
                    )
                };
                
                particles.push(particle);
                scene.add(particle);
            }
            
            // Ground grid
            const gridHelper = new THREE.GridHelper(100, 50, 0xff0040, 0x1a1a2e);
            gridHelper.position.y = -5;
            scene.add(gridHelper);
            
            // Numbers floating - 42, 14, 3
            createFloatingNumber('42', -15, 25, 0, 0xff0040);
            createFloatingNumber('Ã·', -8, 25, 0, 0xffffff);
            createFloatingNumber('14', 0, 25, 0, 0x00ffff);
            createFloatingNumber('=', 8, 25, 0, 0xffffff);
            createFloatingNumber('3', 15, 25, 0, 0xffff00);
            
            animate();
        }
        
        function createFloatingNumber(text, x, y, z, color) {
            const canvas = document.createElement('canvas');
            canvas.width = 128;
            canvas.height = 128;
            const ctx = canvas.getContext('2d');
            
            ctx.fillStyle = '#' + color.toString(16).padStart(6, '0');
            ctx.font = 'bold 80px Courier New';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(text, 64, 64);
            
            const texture = new THREE.CanvasTexture(canvas);
            const spriteMat = new THREE.SpriteMaterial({ 
                map: texture,
                transparent: true
            });
            const sprite = new THREE.Sprite(spriteMat);
            sprite.position.set(x, y, z);
            sprite.scale.set(5, 5, 1);
            sprite.userData = { baseY: y, offset: Math.random() * Math.PI * 2 };
            scene.add(sprite);
            particles.push(sprite);
        }
        
        let time = 0;
        function animate() {
            requestAnimationFrame(animate);
            time += 0.016;
            
            // Camera orbit
            if (chaosMode) {
                camera.position.x = Math.sin(time * 0.2) * 35;
                camera.position.z = Math.cos(time * 0.2) * 35;
                camera.lookAt(0, 12, 0);
            }
            
            // Tower pulse
            if (tower) {
                const pulse = 1 + Math.sin(time * 4) * 0.05;
                tower.scale.set(pulse, 1, pulse);
                tower.rotation.y += 0.002;
            }
            
            // Pillar animation
            pillars.forEach((pillar, i) => {
                const beatPulse = isPlaying ? Math.sin(time * 8 + i) * 0.5 : 0;
                pillar.position.y = pillar.userData.baseY + Math.sin(time * 2 + i) * 0.5 + beatPulse;
                pillar.rotation.y += 0.01;
                
                // Intensity based on beat
                if (isPlaying) {
                    pillar.material.emissiveIntensity = 0.3 + Math.sin(time * 8) * 0.3;
                }
            });
            
            // Particle movement
            particles.forEach(particle => {
                if (particle.userData.velocity) {
                    particle.position.add(particle.userData.velocity);
                    
                    if (particle.position.y > 40) particle.position.y = 0;
                    if (particle.position.x > 30) particle.position.x = -30;
                    if (particle.position.x < -30) particle.position.x = 30;
                    if (particle.position.z > 30) particle.position.z = -30;
                    if (particle.position.z < -30) particle.position.z = 30;
                }
                
                if (particle.userData.baseY) {
                    particle.position.y = particle.userData.baseY + Math.sin(time * 2 + particle.userData.offset) * 2;
                }
            });
            
            renderer.render(scene, camera);
        }
        
        let lyricIndex = 0;
        let lyricTimeout;
        
        function startSong() {
            if (isPlaying) return;
            isPlaying = true;
            lyricIndex = 0;
            playLyric();
            startBeatPulse();
        }
        
        function playLyric() {
            if (lyricIndex >= lyrics.length) {
                isPlaying = false;
                document.getElementById('lyric1').className = 'lyric-line';
                document.getElementById('lyric2').className = 'lyric-line';
                document.getElementById('lyric3').className = 'lyric-line';
                return;
            }
            
            const current = lyrics[lyricIndex];
            
            // Shift lyrics up
            document.getElementById('lyric1').textContent = document.getElementById('lyric2').textContent;
            document.getElementById('lyric1').className = 'lyric-line fade';
            
            document.getElementById('lyric2').textContent = document.getElementById('lyric3').textContent;
            document.getElementById('lyric2').className = 'lyric-line fade';
            
            document.getElementById('lyric3').textContent = current.text;
            document.getElementById('lyric3').className = 'lyric-line active';
            
            // Spawn emoji burst
            if (current.emoji) {
                spawnEmoji(current.emoji);
            }
            
            // Flash pillars on keywords
            if (current.text.includes('NEED')) flashPillar(0);
            if (current.text.includes('WANT')) flashPillar(1);
            if (current.text.includes('DESIRE')) flashPillar(2);
            
            lyricIndex++;
            lyricTimeout = setTimeout(playLyric, current.duration);
        }
        
        function flashPillar(index) {
            if (pillars[index]) {
                pillars[index].material.emissiveIntensity = 1;
                setTimeout(() => {
                    pillars[index].material.emissiveIntensity = 0.3;
                }, 200);
            }
        }
        
        function spawnEmoji(emoji) {
            const el = document.createElement('div');
            el.className = 'emoji-burst';
            el.textContent = emoji;
            el.style.left = (Math.random() * 60 + 20) + '%';
            el.style.top = (Math.random() * 60 + 20) + '%';
            document.body.appendChild(el);
            
            setTimeout(() => el.remove(), 1000);
        }
        
        let beatInterval;
        function startBeatPulse() {
            // 140 BPM = 428ms per beat
            beatInterval = setInterval(() => {
                if (!isPlaying) {
                    clearInterval(beatInterval);
                    return;
                }
                
                beat++;
                
                // Pulse the BPM display
                const bpmDisplay = document.getElementById('bpm-display');
                bpmDisplay.style.transform = 'scale(1.2)';
                setTimeout(() => {
                    bpmDisplay.style.transform = 'scale(1)';
                }, 100);
                
                // Random emoji on strong beats
                if (beat % 4 === 0) {
                    const emojis = ['ğŸ”¥', 'âš¡', 'ğŸ’', 'ğŸ°', 'âœ¨', 'ğŸ’€', 'ğŸ–¤'];
                    spawnEmoji(emojis[Math.floor(Math.random() * emojis.length)]);
                }
            }, 428);
        }
        
        function toggleVisuals() {
            chaosMode = !chaosMode;
            if (!chaosMode) {
                camera.position.set(0, 15, 30);
                camera.lookAt(0, 10, 0);
            }
        }
        
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
        
        init();
    </script>
</body>
</html>
