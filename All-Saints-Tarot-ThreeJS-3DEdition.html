<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saints Tarot - 3D Enhanced</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a0033 0%, #330066 50%, #1a0033 100%);
            color: #fff;
            overflow: hidden;
            height: 100vh;
        }
        #container {
            width: 100%;
            height: 100vh;
            position: relative;
        }
        #ui-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
        }
        #controls {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.85);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 215, 0, 0.3);
            pointer-events: auto;
            max-width: 320px;
        }
        h1 {
            font-size: 1.6em;
            margin-bottom: 10px;
            text-align: center;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
        .subtitle {
            text-align: center;
            font-size: 0.8em;
            opacity: 0.7;
            margin-bottom: 15px;
        }
        .button {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            background: linear-gradient(135deg, #4a0080, #7000cc);
            border: 2px solid #ffd700;
            color: #fff;
            font-size: 1em;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s;
            font-weight: bold;
            pointer-events: auto;
        }
        .button:hover {
            background: linear-gradient(135deg, #6000a0, #9000ff);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
            transform: scale(1.05);
        }
        .button:active {
            transform: scale(0.95);
        }
        #mode-indicator {
            text-align: center;
            padding: 10px;
            background: rgba(255, 215, 0, 0.2);
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 0.9em;
        }
        #countdown-timer {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 6em;
            font-weight: bold;
            color: rgba(255, 215, 0, 0.9);
            text-shadow: 0 0 40px rgba(255, 215, 0, 0.8);
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
        }
        #countdown-timer.active {
            opacity: 1;
        }
        #help-overlay {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.85);
            padding: 15px;
            border-radius: 10px;
            font-size: 0.85em;
            max-width: 250px;
            pointer-events: auto;
            border: 2px solid rgba(255, 215, 0, 0.2);
        }
        .help-section {
            margin-bottom: 10px;
        }
        .help-section strong {
            color: #ffd700;
        }
        @media (max-width: 768px) {
            #controls {
                top: 10px;
                left: 10px;
                padding: 15px;
                max-width: calc(100% - 20px);
            }
            h1 {
                font-size: 1.4em;
            }
            #help-overlay {
                display: none;
            }
            #countdown-timer {
                font-size: 4em;
            }
        }
    </style>
</head>
<body>
    <div id="container"></div>
    
    <div id="ui-overlay">
        <div id="controls">
            <h1>‚≠ê Saints Tarot ‚≠ê</h1>
            <div class="subtitle">80 Saints ‚Ä¢ 3D Edition</div>
            <div id="mode-indicator">üé¥ 3-Card Reading</div>
            <button class="button" onclick="drawCards()">üé¥ Draw Cards</button>
            <button class="button" onclick="toggleViewMode()">üìö Switch to Gallery</button>
            <button class="button" onclick="toggleAutoPlay()">‚è±Ô∏è Auto-Play: OFF</button>
            <button class="button" onclick="resetReading()">üîÑ Reset</button>
            
            <div style="margin-top: 15px; padding-top: 15px; border-top: 2px solid rgba(255, 215, 0, 0.3);">
                <div style="text-align: center; color: #ffd700; font-size: 0.9em; margin-bottom: 8px;">üì∑ Camera Views</div>
                <button class="button" onclick="setCameraView('front')" style="padding: 8px; font-size: 0.9em;">üéØ Front</button>
                <button class="button" onclick="setCameraView('isometric')" style="padding: 8px; font-size: 0.9em;">üìê Isometric</button>
                <button class="button" onclick="setCameraView('top')" style="padding: 8px; font-size: 0.9em;">üîù Top</button>
                <button class="button" onclick="setCameraView('back')" style="padding: 8px; font-size: 0.9em;">‚Ü©Ô∏è Back</button>
            </div>
        </div>
        <div id="countdown-timer">30</div>
        <div id="help-overlay">
            <div class="help-section">
                <strong>üñ±Ô∏è Mouse:</strong> Click card = Fullscreen zoom<br>
                Click again = Zoom out<br>
                Drag to rotate
            </div>
            <div class="help-section">
                <strong>‚å®Ô∏è Keys:</strong><br>
                W/S: Zoom In/Out<br>
                A/D: Rotate Left/Right<br>
                Q/E: Tilt Up/Down<br>
                Z/X/C: Quick Views<br>
                ESC: Exit Fullscreen<br>
                Shift: Fast Move<br>
                Alt: Slow Move
            </div>
            <div class="help-section">
                <strong>üéÆ Views:</strong><br>
                üé¥ 3-Card Reading<br>
                üìö Full Gallery
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Complete 80 Saints Data
        const saints_data = [
            {"id":1,"name":"Adalbert of Prague","card":"Five of Wands","classifier":"Wands - Fire - Creativity","emojis":"üõ∂, üôè","continent":"Europe","story":"A Bishop of Prague who struggled with conflict and resistance while trying to reform his diocese. He was ultimately martyred trying to bring his faith to a hostile land, embodying a narrative of struggle and striving for a higher cause against opposition.","virtues":"Missionary Zeal, Perseverance, Courage, Faith","gender":"Male","location":"Prague, Bohemia (Czech Rep.)","canon":"Vita Sancti Adalberti (Life of St. Adalbert)"},
            {"id":2,"name":"Agnes of Rome","card":"The Star (XVII)","classifier":"Major Arcana","emojis":"üêë, ‚ú®","continent":"Europe","story":"A young girl who became a beacon of pure faith and hope in a time of dark persecution. Her story, filled with miracles protecting her, represents divine inspiration and serenity in the face of mortal danger, much like the Star's gentle light.","virtues":"Purity, Courage, Faithfulness, Steadfastness","gender":"Female","location":"Rome, Italy","canon":"The Golden Legend, Pope Damasus I's inscriptions"},
            {"id":3,"name":"Ambrose of Milan","card":"The Hierophant (V)","classifier":"Major Arcana","emojis":"üèõÔ∏è, üêù","continent":"Europe","story":"A governor who became a bishop, a master of tradition, and a teacher of orthodox doctrine. He was a pillar of the Church, mentoring St. Augustine and establishing the authority of spiritual institutions over temporal power, embodying the Hierophant's role as a conduit of sacred knowledge.","virtues":"Leadership, Justice, Wisdom, Fortitude","gender":"Male","location":"Milan, Italy","canon":"On the Duties of the Clergy, Life of Ambrose by Paulinus the Deacon"},
            {"id":4,"name":"Andrew of Crete","card":"Eight of Cups","classifier":"Cups - Water - Emotional","emojis":"üéº, üôè","continent":"Asia","story":"A bishop and hymnographer most famous for his Great Canon, a masterpiece of penitential reflection. This work represents a deep spiritual journey inward, a turning away from worldly attachment to seek a more profound, emotional connection with God.","virtues":"Penance, Liturgy, Eloquence, Poetry","gender":"Male","location":"Crete, Greece","canon":"The Great Canon of St. Andrew of Crete"},
            {"id":5,"name":"Anselm of Canterbury","card":"King of Swords","classifier":"Swords - Air - Reason","emojis":"üß†, ‚öñÔ∏è","continent":"Europe","story":"A brilliant theologian and philosopher who became Archbishop of Canterbury. His use of logic (the ontological argument) and his defense of the Church's intellectual and legal rights against kings mark him as a master of reason, law, and intellectual authority.","virtues":"Intellect, Faith, Reason, Fortitude","gender":"Male","location":"Canterbury, England","canon":"Proslogion, Cur Deus Homo, Monologion"},
            {"id":6,"name":"Anthony of Egypt","card":"The Hermit (IX)","classifier":"Major Arcana","emojis":"üèúÔ∏è, üèÆ","continent":"Africa","story":"The quintessential hermit who withdrew from society into the desert to seek spiritual truth. He battled his inner demons and found profound wisdom in solitude, lighting the way for countless others who followed his path of introspection.","virtues":"Asceticism, Perseverance, Spiritual Warfare, Solitude","gender":"Male","location":"Egyptian Desert","canon":"Life of Antony by Athanasius of Alexandria"},
            {"id":7,"name":"Anthony of Padua","card":"Ace of Pentacles","classifier":"Pentacles - Earth - Physical","emojis":"ü•ñ, üìñ","continent":"Europe","story":"A beloved saint associated with tangible results: finding lost items, providing bread for the poor. The Ace of Pentacles represents a seed of opportunity and prosperity in the material world, mirroring his ability to manifest grace in practical, earthly ways.","virtues":"Eloquence, Charity, Knowledge, Humility","gender":"Male","location":"Padua, Italy","canon":"Legenda Assidua (The First Life)"},
            {"id":8,"name":"Athanasius of Alexandria","card":"Five of Swords","classifier":"Swords - Air - Reason","emojis":"üõ°Ô∏è, ‚úùÔ∏è","continent":"Africa","story":"A champion of orthodoxy who was exiled five times for his unwavering theological stance against Arianism. His life was one of constant conflict and intellectual battle, representing a victory of principle, albeit one achieved through great strife and argument.","virtues":"Orthodoxy, Fortitude, Perseverance, Conviction","gender":"Male","location":"Alexandria, Egypt","canon":"On the Incarnation, Life of Antony, Four Orations Against the Arians"},
            {"id":9,"name":"Augustine of Hippo","card":"The Devil (XV)","classifier":"Major Arcana","emojis":"üìö,‚õìÔ∏è","continent":"Africa","story":"A man who famously struggled with and wrote about his bondage to worldly pleasures and intellectual pride before his conversion. His story is the ultimate archetype of confronting and breaking free from the chains of addiction and materialism represented by this card.","virtues":"Perseverance, Faith, Intellect, Repentance","gender":"Male","location":"Hippo Regius (Annaba, Algeria)","canon":"Confessions, City of God, On Christian Doctrine"},
            {"id":10,"name":"Basil of Caesarea","card":"Ten of Pentacles","classifier":"Pentacles - Earth - Physical","emojis":"üïäÔ∏è, üè•","continent":"Asia","story":"A bishop who established the Basiliad, a massive complex with a hospital and hospice that served the poor and sick. He created a lasting structure of communal wealth, charity, and physical care, perfectly embodying the establishment of a prosperous and stable legacy.","virtues":"Charity, Leadership, Orthodoxy, Governance","gender":"Male","location":"Caesarea, Cappadocia (Turkey)","canon":"On the Holy Spirit, Address to Young Men, Asketikon"},
            {"id":11,"name":"Bede the Venerable","card":"Four of Swords","classifier":"Swords - Air - Reason","emojis":"üìú, ‚õ™","continent":"Europe","story":"A monk who spent his life in the quiet contemplation and intellectual rest of the monastery. He produced his great historical work not from battle, but from a state of scholarly retreat, study, and mental recuperation, aligning with this card's theme of restful contemplation.","virtues":"Scholarship, Humility, Diligence, Piety","gender":"Male","location":"Jarrow, England","canon":"Ecclesiastical History of the English People"},
            {"id":12,"name":"Benedict of Nursia","card":"Temperance (XIV)","classifier":"Major Arcana","emojis":"‚öñÔ∏è, üôè","continent":"Europe","story":"The author of the Rule, a masterful guide that synthesizes prayer, work, and study into a balanced and moderate way of life. He is the archetype of Temperance, blending spiritual and practical elements to create a stable, harmonious path.","virtues":"Order, Stability, Prayerfulness, Moderation","gender":"Male","location":"Nursia / Monte Cassino, Italy","canon":"The Rule of Saint Benedict, Dialogues of Pope Gregory the Great"},
            {"id":13,"name":"Bernadette of Lourdes","card":"Page of Cups","classifier":"Cups - Water - Emotional","emojis":"üíß, üåπ","continent":"Europe","story":"A simple, uneducated girl who was open and intuitive enough to receive a divine message. She embodies the Page of Cups' qualities of innocence, emotional purity, and being a messenger from the spiritual or unconscious realms.","virtues":"Humility, Simplicity, Faith, Obedience","gender":"Female","location":"Lourdes, France","canon":"Eyewitness testimonies, Church investigation records"},
            {"id":14,"name":"Bernard of Clairvaux","card":"Knight of Wands","classifier":"Wands - Fire - Creativity","emojis":"üêù, üî•","continent":"Europe","story":"An abbot of immense energy and passion. He revitalized his order, preached the Second Crusade, and pursued his goals with a fiery zeal that could inspire thousands. He embodies the Knight of Wands' archetype of being charming, energetic, and charging ahead on a quest.","virtues":"Zeal, Devotion, Persuasion, Mysticism","gender":"Male","location":"Clairvaux, France","canon":"On Loving God, Sermons on the Song of Songs"},
            {"id":15,"name":"Bonaventure of Bagnoregio","card":"Two of Pentacles","classifier":"Pentacles - Earth - Physical","emojis":"ü¶â, ‚öñÔ∏è","continent":"Europe","story":"As Minister General of the Franciscans, he had to expertly balance the spiritual ideals of St. Francis with the practical, administrative needs of a large, growing order. This act of balancing two important priorities is the essence of this card.","virtues":"Intellect, Devotion, Governance, Wisdom","gender":"Male","location":"Bagnoregio, Italy","canon":"The Journey of the Mind into God, The Life of St. Francis"},
            {"id":16,"name":"Brendan of Clonfert","card":"The Moon (XVIII)","classifier":"Major Arcana","emojis":"‚õµÔ∏è, üêã","continent":"Europe","story":"A navigator who sailed into the unknown, on a journey guided by faith rather than maps. His voyage into a world of illusion, strange creatures, and mystery perfectly reflects the themes of journeying through the unconscious and the unknown found in the Moon card.","virtues":"Faith, Courage, Adventure, Perseverance","gender":"Male","location":"Clonfert, Ireland","canon":"Navigatio Sancti Brendani Abbatis (The Voyage of Saint Brendan the Abbot)"},
            {"id":17,"name":"Bridget of Sweden","card":"Three of Swords","classifier":"Swords - Air - Reason","emojis":"‚úçÔ∏è, üíî","continent":"Europe","story":"A widowed mystic whose divine revelations often contained painful truths and sorrowful critiques of the Church and its leaders. The swords of piercing truth and the heartbreak over the state of the world are central to her prophetic mission.","virtues":"Mysticism, Piety, Reform, Prophecy","gender":"Female","location":"Finsta, Sweden / Rome, Italy","canon":"Revelations of St. Bridget"},
            {"id":18,"name":"Catherine of Alexandria","card":"Queen of Swords","classifier":"Swords - Air - Reason","emojis":"‚öôÔ∏è, üëë","continent":"Africa","story":"A princess and scholar who used her sharp intellect and clear, incisive logic to debate and defeat fifty pagan philosophers. She is the archetype of the Queen of Swords: intelligent, articulate, truthful, and unafraid of intellectual confrontation.","virtues":"Wisdom, Eloquence, Faithfulness, Courage","gender":"Female","location":"Alexandria, Egypt","canon":"The Golden Legend"},
            {"id":19,"name":"Catherine of Genoa","card":"Six of Cups","classifier":"Cups - Water - Emotional","emojis":"üè•, ‚ù§Ô∏è‚Äçü©π","continent":"Europe","story":"A mystic who gave herself over completely to the simple, innocent charity of caring for the sick. Her work represents a selfless, nostalgic love reminiscent of childhood purity and a deep, compassionate connection to others' suffering.","virtues":"Charity, Self-Denial, Service, Mysticism","gender":"Female","location":"Genoa, Italy","canon":"Treatise on Purgatory, Spiritual Dialogue"},
            {"id":20,"name":"Catherine of Siena","card":"Justice (XI)","classifier":"Major Arcana","emojis":"‚öúÔ∏è, ‚öñÔ∏è","continent":"Europe","story":"A mystic who wielded immense influence to correct a great imbalance, persuading the Pope to return to Rome from Avignon. Her life was a quest for truth and righteousness, seeking to restore divine order and justice to the Church on Earth.","virtues":"Wisdom, Fortitude, Persuasion, Mysticism","gender":"Female","location":"Siena, Italy","canon":"The Dialogue of Divine Providence, The Letters of Catherine of Siena"},
            {"id":21,"name":"Clare of Assisi","card":"The Sun (XIX)","classifier":"Major Arcana","emojis":"‚ú®, ‚òÄÔ∏è","continent":"Europe","story":"Her name means 'light,' and as the founder of the Poor Clares, she radiated joy, clarity, and unwavering faith. She defended her convent with the light of the Eucharist, embodying the vibrancy, purity, and triumphant joy of the Sun card.","virtues":"Poverty, Faith, Courage, Devotion","gender":"Female","location":"Assisi, Italy","canon":"The Rule of St. Clare, The Life of St. Clare by Thomas of Celano"},
            {"id":22,"name":"Columba of Iona","card":"Six of Wands","classifier":"Wands - Fire - Creativity","emojis":"üáÆüá™, üïäÔ∏è","continent":"Europe","story":"A successful missionary who established a thriving and influential monastery at Iona, which became a beacon of faith and learning. This card represents public recognition, victory, and the success of a spiritual campaign, perfectly matching his achievement.","virtues":"Evangelism, Leadership, Scholarship, Diplomacy","gender":"Male","location":"Iona, Scotland","canon":"Vita Columbae (Life of Columba) by Adomn√°n of Iona"},
            {"id":23,"name":"Cuthbert of Lindisfarne","card":"Four of Pentacles","classifier":"Pentacles - Earth - Physical","emojis":"üôè, üèùÔ∏è","continent":"Europe","story":"A hermit who sought stability and control over his spiritual life by retreating to a remote island. He embodies the conservation of spiritual energy and the establishment of firm boundaries to protect his contemplative treasures from the outside world.","virtues":"Piety, Humility, Solitude, Gentleness","gender":"Male","location":"Lindisfarne, England","canon":"Life of St. Cuthbert by Bede"},
            {"id":24,"name":"Cyril of Alexandria","card":"Seven of Swords","classifier":"Swords - Air - Reason","emojis":"üìú, üõ°Ô∏è","continent":"Africa","story":"A brilliant but controversial theologian who used sharp political and rhetorical strategies to defeat his opponents at the Council of Ephesus. His methods were complex and sometimes seen as cunning, reflecting this card's themes of strategy and intellectual maneuvering.","virtues":"Orthodoxy, Tenacity, Polemics, Wisdom","gender":"Male","location":"Alexandria, Egypt","canon":"Commentaries on John and Luke, Against Nestorius"},
            {"id":25,"name":"Cyril of Jerusalem","card":"Page of Swords","classifier":"Swords - Air - Reason","emojis":"üìö, üìñ","continent":"Asia","story":"His fame rests on his Catechetical Lectures, a work of immense clarity for new students of the faith. He embodies the Page of Swords, a messenger and student of truth, eager to learn and communicate new ideas with curiosity and mental energy.","virtues":"Teaching, Orthodoxy, Patience, Fortitude","gender":"Male","location":"Jerusalem","canon":"Catechetical Lectures of St. Cyril of Jerusalem"},
            {"id":26,"name":"Dominic of Guzm√°n","card":"Ace of Wands","classifier":"Wands - Fire - Creativity","emojis":"üê∂, üî•","continent":"Europe","story":"He founded the Order of Preachers, sparking a new, energetic movement of missionary and intellectual activity. This act was a pure burst of inspiration and creative spiritual energy, the very essence of the Ace of Wands, which represents a new passion or enterprise.","virtues":"Truth, Preaching, Study, Zeal","gender":"Male","location":"Caleruega, Spain","canon":"Libellus de principiis Ordinis Praedicatorum by Jordan of Saxony"},
            {"id":27,"name":"Elizabeth of Hungary","card":"The Empress (III)","classifier":"Major Arcana","emojis":"üëë, ü•ñ","continent":"Europe","story":"A princess and queen who embodied maternal care and earthly abundance through her radical charity, famously baking bread for the poor. She represents the archetype of the nurturing mother, fertility, and compassion in the physical world.","virtues":"Charity, Humility, Compassion, Service","gender":"Female","location":"Kingdom of Hungary","canon":"The Life of St. Elizabeth of Hungary by Dietrich of Apolda"},
            {"id":28,"name":"Elizabeth of Portugal","card":"Two of Cups","classifier":"Cups - Water - Emotional","emojis":"üïäÔ∏è, ü§ù","continent":"Europe","story":"A queen known as 'The Peacemaker' for her remarkable ability to forge partnerships and reconcile warring family members. Her life's work was the creation of union, truce, and mutual respect, which are the core meanings of this card.","virtues":"Peacemaking, Charity, Diplomacy, Piety","gender":"Female","location":"Kingdom of Portugal","canon":"Papal Bull of Canonization by Pope Urban VIII"},
            {"id":29,"name":"Ferdinand III of Castile","card":"The Emperor (IV)","classifier":"Major Arcana","emojis":"‚öîÔ∏è, üè∞","continent":"Europe","story":"A just and pious king who unified kingdoms, established laws, and built a stable, structured society. He is a perfect archetype of the Emperor, a figure of worldly authority, structure, and fatherly rule who brings order out of chaos.","virtues":"Justice, Leadership, Piety, Fortitude","gender":"Male","location":"Castile, Spain","canon":"Chronica latina regum Castellae (Latin Chronicle of the Kings of Castile)"},
            {"id":30,"name":"Frances of Rome","card":"Nine of Pentacles","classifier":"Pentacles - Earth - Physical","emojis":"üòá, üè°","continent":"Europe","story":"A noblewoman who found spiritual discipline and independence within her domestic life. She organized women for charity while managing her household, embodying the grace, self-reliance, and abundant discipline found in a well-tended garden.","virtues":"Charity, Service, Piety, Patience","gender":"Female","location":"Rome, Italy","canon":"Papal Bull of Canonization by Pope Paul V"},
            {"id":31,"name":"Francis of Assisi","card":"The Fool (0)","classifier":"Major Arcana","emojis":"üêæ, ‚òÄÔ∏è","continent":"Europe","story":"He abandoned a life of wealth to take a radical leap of faith into the unknown, embracing poverty and trusting completely in divine providence. His journey is the ultimate embodiment of the Fool's archetype: beginning a new path with pure faith and innocence.","virtues":"Humility, Poverty, Charity, Love for Creation","gender":"Male","location":"Assisi, Italy","canon":"Canticle of the Sun, The Little Flowers of Saint Francis"},
            {"id":32,"name":"Francis de Sales","card":"Strength (VIII)","classifier":"Major Arcana","emojis":"üíå, ‚ù§Ô∏è‚Äçüî•","continent":"Europe","story":"A bishop known for his gentle spirit and patient persuasion. He demonstrated that true strength lies not in force but in compassion, courage, and taming the wild passions with a gentle hand, perfectly reflecting the meaning of the Strength card.","virtues":"Gentleness, Patience, Spiritual Direction, Charity","gender":"Male","location":"Thorens-Gli√®res, France","canon":"Introduction to the Devout Life, Treatise on the Love of God"},
            {"id":33,"name":"George of Lydda","card":"Seven of Wands","classifier":"Wands - Fire - Creativity","emojis":"üêâ, üõ°Ô∏è","continent":"Asia","story":"The legendary dragon-slayer who stands alone, defending the innocent against a great threat. This card represents courage, challenge, and maintaining one's position against all odds, a perfect match for his archetypal battle.","virtues":"Courage, Chivalry, Faith, Protection","gender":"Male","location":"Lydda, Palestine (Lod, Israel)","canon":"The Golden Legend, Hagiographies, Acts of Saint George"},
            {"id":34,"name":"Gertrude of Nivelles","card":"Three of Cups","classifier":"Cups - Water - Emotional","emojis":"üêà, üè°","continent":"Europe","story":"An abbess renowned for her warm hospitality, creating a joyful and supportive community for pilgrims and missionaries. Her life reflects the camaraderie, celebration, and friendship central to the Three of Cups.","virtues":"Hospitality, Piety, Prudence, Charity","gender":"Female","location":"Nivelles, Belgium","canon":"Vita Sanctae Geretrudis (Life of Saint Gertrude)"},
            {"id":35,"name":"Gregory of Nazianzus","card":"Ten of Swords","classifier":"Swords - Air - Reason","emojis":"üó£Ô∏è, üò•","continent":"Asia","story":"A brilliant but reluctant bishop who felt the crushing weight and painful betrayal of ecclesiastical politics. He ultimately resigned his prestigious post in Constantinople, hitting a low point that forced a new beginning, as depicted in this card of painful endings.","virtues":"Eloquence, Theology, Humility, Contemplation","gender":"Male","location":"Nazianzus, Cappadocia (Turkey)","canon":"Five Theological Orations, Philocalia"},
            {"id":36,"name":"Gregory of Nyssa","card":"Page of Wands","classifier":"Wands - Fire - Creativity","emojis":"ü§î, üî•","continent":"Asia","story":"A philosophical theologian who explored new frontiers of thought, particularly on the spiritual life (The Life of Moses). He represents the Page of Wands' energy of exploring new creative and spiritual ideas with passion and inspiration.","virtues":"Intellect, Mysticism, Philosophy, Orthodoxy","gender":"Male","location":"Nyssa, Cappadocia (Turkey)","canon":"The Life of Moses, On the Soul and the Resurrection, Great Catechetical Oration"},
            {"id":37,"name":"Gregory the Great","card":"King of Pentacles","classifier":"Pentacles - Earth - Physical","emojis":"üé∂, üëë","continent":"Europe","story":"A Pope who was a master administrator, managing vast papal estates, organizing liturgies (Gregorian Chant), and sending missionaries. He created stability and material security for the Church, embodying the King of Pentacles' mastery of the earthly realm.","virtues":"Leadership, Reform, Evangelism, Humility","gender":"Male","location":"Rome, Italy","canon":"Pastoral Rule, Dialogues, Moralia in Job"},
            {"id":38,"name":"Hedwig of Silesia","card":"Queen of Pentacles","classifier":"Pentacles - Earth - Physical","emojis":"üë£, üëë","continent":"Europe","story":"A duchess who used her immense wealth and position to be a down-to-earth nurturer of the poor, founding monasteries and hospitals. Her practical, charitable, and motherly nature makes her the archetype of the Queen of Pentacles.","virtues":"Charity, Piety, Austerity, Humility","gender":"Female","location":"Duchy of Silesia (Poland)","canon":"Vita beatae Hedwigis (Life of the Blessed Hedwig)"},
            {"id":39,"name":"Helena of Constantinople","card":"Three of Wands","classifier":"Wands - Fire - Creativity","emojis":"‚ò¶Ô∏è, üó∫Ô∏è","continent":"Asia","story":"In her old age, she embarked on a great expedition to the Holy Land, looking out to a new horizon for the now-Christian empire. Her pilgrimage to discover the True Cross represents foresight, exploration, and the beginning of a great enterprise.","virtues":"Faith, Piety, Discovery, Perseverance","gender":"Female","location":"Constantinople (Istanbul, Turkey)","canon":"Hagiographies by Eusebius of Caesarea and Ambrose of Milan"},
            {"id":40,"name":"Hildegard of Bingen","card":"The High Priestess (II)","classifier":"Major Arcana","emojis":"üé∂, üåø","continent":"Europe","story":"A powerful abbess, mystic, and visionary who was a conduit for profound, intuitive, and divine knowledge. She represents the archetype of the High Priestess, the keeper of sacred secrets and a bridge between the seen and unseen worlds.","virtues":"Wisdom, Creativity, Prophecy, Knowledge","gender":"Female","location":"Bingen am Rhein, Germany","canon":"Scivias, Ordo Virtutum, Physica"},
            {"id":41,"name":"Hugh of Lincoln","card":"Six of Pentacles","classifier":"Pentacles - Earth - Physical","emojis":"ü¶¢, ü™ô","continent":"Europe","story":"A bishop renowned for his immense charity and justice, especially his defense of the poor and the Jewish community. He embodies the spirit of generous giving, patronage, and the balanced distribution of wealth and power.","virtues":"Justice, Courage, Piety, Tenderness","gender":"Male","location":"Lincoln, England","canon":"Magna Vita Sancti Hugonis (The Great Life of St. Hugh)"},
            {"id":42,"name":"Ignatius of Loyola","card":"Wheel of Fortune (X)","classifier":"Major Arcana","emojis":"‚úùÔ∏è, üéØ","continent":"Europe","story":"A cannonball injury completely changed the trajectory of his life, turning him from a vain soldier into the founder of the Jesuits. His story is a perfect example of a major turn of fate, a pivotal moment of destiny that sets a soul on an entirely new path.","virtues":"Discernment, Obedience, Zeal, Self-Discipline","gender":"Male","location":"Loyola, Basque Country, Spain","canon":"Spiritual Exercises of St. Ignatius, The Autobiography of St. Ignatius"},
            {"id":43,"name":"Irenaeus of Lyons","card":"Two of Swords","classifier":"Swords - Air - Reason","emojis":"üó£Ô∏è, ‚öîÔ∏è","continent":"Europe","story":"A bishop who had to make a difficult intellectual choice, creating a clear line between orthodoxy and the Gnosticism he fought in Against Heresies. He represents the need to create a truce through intellectual stalemate, blocking out confusion to establish truth.","virtues":"Orthodoxy, Teaching, Apologetics, Faithfulness","gender":"Male","location":"Lyons, France","canon":"Against Heresies (Adversus Haereses)"},
            {"id":44,"name":"Isidore of Seville","card":"The Magician (I)","classifier":"Major Arcana","emojis":"üíæ, üìö","continent":"Europe","story":"An encyclopedist who gathered all the knowledge of his era ('as above, so below') and manifested it into a single, powerful work, the Etymologiae. He is the archetype of the Magician, who takes resources from the divine/intellectual realm and makes them manifest on Earth.","virtues":"Knowledge, Scholarship, Order, Wisdom","gender":"Male","location":"Seville, Spain","canon":"Etymologiae, History of the Goths, Vandals, and Suebi"},
            {"id":45,"name":"James of the Marches","card":"Eight of Wands","classifier":"Wands - Fire - Creativity","emojis":"‚≠êÔ∏è, ‚úàÔ∏è","continent":"Europe","story":"A tireless preacher who traveled with great speed and energy across Central and Eastern Europe. He represents the swift action, travel, and rapid delivery of messages that characterize the Eight of Wands.","virtues":"Zeal, Preaching, Austerity, Reform","gender":"Male","location":"March of Ancona, Italy","canon":"Hagiographies by Venantius of Fabriano"},
            {"id":46,"name":"Joan of Arc","card":"The Chariot (VII)","classifier":"Major Arcana","emojis":"üá´üá∑, ‚öîÔ∏è","continent":"Europe","story":"A peasant girl who, through sheer willpower and divine conviction, harnessed the opposing forces of the French army and led them to victory. She is the ultimate Charioteer, a figure of external conquest driven by an unstoppable inner will.","virtues":"Courage, Faith, Patriotism, Fortitude","gender":"Female","location":"Domr√©my-la-Pucelle, France","canon":"Trial transcripts, letters, historical chronicles"},
            {"id":47,"name":"John of Damascus","card":"Knight of Swords","classifier":"Swords - Air - Reason","emojis":"üñºÔ∏è, ‚úçÔ∏è","continent":"Asia","story":"A brilliant and assertive defender of the faith, particularly of icons. He charged into theological debate with sharp logic and cutting arguments to defend sacred tradition, embodying the focused, intellectual power of the Knight of Swords.","virtues":"Orthodoxy, Courage, Eloquence, Wisdom","gender":"Male","location":"Damascus, Syria","canon":"Fountain of Knowledge, On the Divine Images"},
            {"id":48,"name":"John of God","card":"Knight of Pentacles","classifier":"Pentacles - Earth - Physical","emojis":"‚ù§Ô∏è‚Äçü©π, üè•","continent":"Europe","story":"A man who, after his conversion, worked tirelessly and methodically to build a real, physical institution to care for the sick. He is the Knight of Pentacles: hardworking, dependable, and dedicated to the slow, practical work of service.","virtues":"Compassion, Charity, Hospitality, Humility","gender":"Male","location":"Montemor-o-Novo, Portugal","canon":"Life of John of God by Francisco de Castro"},
            {"id":49,"name":"John of the Cross","card":"Knight of Cups","classifier":"Cups - Water - Emotional","emojis":"üåå, ‚ù§Ô∏è‚Äçüî•","continent":"Europe","story":"A mystic poet whose entire life was a romantic, spiritual quest for union with God. He followed his heart through the 'dark night,' driven by an emotional and intuitive calling, making him the archetype of the questing Knight of Cups.","virtues":"Mysticism, Perseverance, Poeticism, Fortitude","gender":"Male","location":"Fontiveros, Spain","canon":"Dark Night of the Soul, Ascent of Mount Carmel, Spiritual Canticle"},
            {"id":50,"name":"Joseph of Arimathea","card":"Seven of Pentacles","classifier":"Pentacles - Earth - Physical","emojis":"üè∫, ‚ö∞Ô∏è","continent":"Asia","story":"A man who invested in a long-term project‚Äîhis own tomb‚Äîand then patiently waited for the right moment to use it for a sacred purpose. This act of patience, investment, and assessing the results of one's labor aligns perfectly with this card.","virtues":"Courage, Faith, Charity, Discipleship","gender":"Male","location":"Arimathea, Judea","canon":"The New Testament (Gospels of Matthew, Mark, Luke, John)"},
            {"id":51,"name":"Joseph of Cupertino","card":"Ace of Cups","classifier":"Cups - Water - Emotional","emojis":"üïäÔ∏è, ‚òÅÔ∏è","continent":"Europe","story":"A simple friar whose prayer was so profound that he would overflow with divine love and begin to levitate. His life represents the pure, uninhibited outpouring of spiritual and emotional energy that is the Ace of Cups.","virtues":"Humility, Piety, Ecstasy, Simplicity","gender":"Male","location":"Cupertino, Italy","canon":"Life of St. Joseph of Cupertino by Robert Nuti"},
            {"id":52,"name":"Juan Diego","card":"Seven of Cups","classifier":"Cups - Water - Emotional","emojis":"üá≤üáΩ, üåπ","continent":"North America","story":"A humble man presented with a powerful, divine vision and a choice of how to respond. The story of the apparition on his tilma is one of otherworldly options and dreams being made manifest, reflecting the visionary choices of the Seven of Cups.","virtues":"Humility, Faith, Simplicity, Obedience","gender":"Male","location":"Cuautitl√°n, Mexico","canon":"Nican Mopohua"},
            {"id":53,"name":"Juliana of Norwich","card":"Nine of Cups","classifier":"Cups - Water - Emotional","emojis":"ü•ú, üòä","continent":"Europe","story":"An anchoress who, through her mystical visions, arrived at a place of profound spiritual contentment and satisfaction, summarized in her famous saying, 'All shall be well.' She embodies the emotional and spiritual fulfillment promised by this card.","virtues":"Hope, Contemplation, Trust, Mysticism","gender":"Female","location":"Norwich, England","canon":"Revelations of Divine Love (A Book of Showings)"},
            {"id":54,"name":"Kateri Tekakwitha","card":"Eight of Swords","classifier":"Swords - Air - Reason","emojis":"‚öúÔ∏è, üôè","continent":"North America","story":"A young woman who felt isolated and trapped by her community for her beliefs. She made a conscious choice to escape this restriction to live her faith freely, overcoming the sense of powerlessness and isolation that this card depicts.","virtues":"Purity, Faith, Perseverance, Courage","gender":"Female","location":"Ossernenon (Auriesville, NY)","canon":"Jesuit Relations, biographies by Catholic missionaries"},
            {"id":55,"name":"Lawrence of Brindisi","card":"Ace of Swords","classifier":"Swords - Air - Reason","emojis":"üó£Ô∏è, üí°","continent":"Europe","story":"A brilliant linguist and theologian whose sharp intellect cut through confusion. He represents the breakthrough of a new, powerful idea, a moment of clarity and intellectual triumph that is the core of the Ace of Swords.","virtues":"Knowledge, Eloquence, Diplomacy, Zeal","gender":"Male","location":"Brindisi, Italy","canon":"Sermons, autobiographical notes"},
            {"id":56,"name":"Lawrence of Rome","card":"Nine of Wands","classifier":"Wands - Fire - Creativity","emojis":"üî•, ü™ô","continent":"Europe","story":"A deacon who, having endured immense persecution, made one last stand of defiance and faith by presenting the poor as the Church's true treasure. He represents resilience, perseverance, and holding one's ground when battered and wounded.","virtues":"Courage, Charity, Humor, Fortitude","gender":"Male","location":"Rome, Italy","canon":"Hagiographies by St. Ambrose and Prudentius"},
            {"id":57,"name":"Leo the Great","card":"Four of Wands","classifier":"Wands - Fire - Creativity","emojis":"üìú, ü§ù","continent":"Europe","story":"A Pope who brought stability and peace by persuading Attila the Hun to spare Rome. His diplomatic victory created a moment of celebration, harmony, and community safety, reflecting the primary meaning of this card.","virtues":"Leadership, Diplomacy, Courage, Orthodoxy","gender":"Male","location":"Rome, Italy","canon":"Tome of Leo, Sermons, Letters"},
            {"id":58,"name":"Louis IX of France","card":"King of Cups","classifier":"Cups - Water - Emotional","emojis":"‚öúÔ∏è, ‚ù§Ô∏è‚Äç‚öñÔ∏è","continent":"Europe","story":"While he was a king (Emperor archetype), his rule was defined by compassion, charity, and emotional balance. He controlled his realm not just with law, but with a deep sense of paternal love and care, making him a master of the emotional realm.","virtues":"Justice, Piety, Charity, Humility","gender":"Male","location":"Poissy, France","canon":"Life of St. Louis by Jean de Joinville"},
            {"id":59,"name":"Margaret of Antioch","card":"The World (XXI)","classifier":"Major Arcana","emojis":"üêâ, ‚öõÔ∏è","continent":"Asia","story":"A legendary saint whose story involves defeating a dragon from within, representing a total victory over evil and a successful completion of a great spiritual cycle. Her immense popularity shows her as an integrated, whole archetype of triumph.","virtues":"Faithfulness, Purity, Perseverance, Fortitude","gender":"Female","location":"Antioch, Pisidia (Turkey)","canon":"The Golden Legend"},
            {"id":60,"name":"Margaret of Scotland","card":"Page of Pentacles","classifier":"Pentacles - Earth - Physical","emojis":"üè¥Û†ÅßÛ†Å¢Û†Å≥Û†Å£Û†Å¥Û†Åø, üìö","continent":"Europe","story":"A queen who brought new learning, reform, and practical charity to her kingdom. She embodies the Page of Pentacles, a student of the world dedicated to manifesting new opportunities for learning and tangible well-being.","virtues":"Piety, Reform, Charity, Gentleness","gender":"Female","location":"Kingdom of Scotland","canon":"Life of St. Margaret, Queen of Scotland by Turgot of Durham"},
            {"id":61,"name":"Martin de Porres","card":"Page of Cups","classifier":"Cups - Water - Emotional","emojis":"üßπ, üê≠","continent":"South America","story":"A saint of profound humility and gentle compassion, especially to the lowly and animals. His intuitive and loving nature, unconcerned with status, reflects the open-hearted innocence and emotional purity of the Page of Cups.","virtues":"Humility, Charity, Interracial Justice, Compassion","gender":"Male","location":"Lima, Peru","canon":"Papal Bull of Canonization by Pope John XXIII"},
            {"id":62,"name":"Martin of Tours","card":"Two of Wands","classifier":"Wands - Fire - Creativity","emojis":"‚öîÔ∏è, üß•","continent":"Europe","story":"His defining moment was a choice between two worlds: the Roman military and the service of Christ. After his vision, he stood with personal power and foresight, planning a new future path, which is the essence of the Two of Wands.","virtues":"Charity, Humility, Evangelism, Generosity","gender":"Male","location":"Tours, France","canon":"Vita Martini (Life of Martin) by Sulpicius Severus"},
            {"id":63,"name":"Mary of Magdala","card":"Judgment (XX)","classifier":"Major Arcana","emojis":"üíß, üåÖ","continent":"Asia","story":"The first witness to the Resurrection, she was called to a higher purpose: to announce the risen Christ. Her story is one of absolution, rebirth, and answering a divine calling, which are the core themes of Judgment.","virtues":"Faithfulness, Devotion, Repentance, Evangelism","gender":"Female","location":"Magdala, Galilee","canon":"The New Testament (Gospels of Matthew, Mark, Luke, John)"},
            {"id":64,"name":"Nicholas of Myra","card":"Six of Pentacles","classifier":"Pentacles - Earth - Physical","emojis":"üéÅ, ü§´","continent":"Asia","story":"The original secret Santa, whose stories all revolve around anonymous, generous charity to those in need. He is the ultimate archetype of the patron who gives freely from his resources to restore balance and relieve poverty.","virtues":"Generosity, Charity, Protection, Kindness","gender":"Male","location":"Myra, Asia Minor (Demre, Turkey)","canon":"The Golden Legend, Hagiographies by St. Andrew of Crete"},
            {"id":65,"name":"Patrick of Ireland","card":"Ace of Wands","classifier":"Wands - Fire - Creativity","emojis":"‚òòÔ∏è, üî•","continent":"Europe","story":"A missionary who brought a spark of immense creative and spiritual energy to Ireland, transforming the nation. His mission was a bold, new enterprise fueled by passion and divine inspiration, perfectly mirroring the Ace of Wands.","virtues":"Faith, Evangelism, Forgiveness, Courage","gender":"Male","location":"Ireland","canon":"Confessio of Saint Patrick, Letter to the Soldiers of Coroticus"},
            {"id":66,"name":"Paul of Thebes","card":"Nine of Pentacles","classifier":"Pentacles - Earth - Physical","emojis":"üå¥, üê¶","continent":"Africa","story":"The first hermit who lived a life of complete self-sufficiency and discipline in the desert, fed by a raven. He represents the solitary abundance and independence gained through discipline, much like the woman in her well-tended garden.","virtues":"Solitude, Asceticism, Prayerfulness, Simplicity","gender":"Male","location":"Theban Desert, Egypt","canon":"Vita Pauli Primi Eremitae (The Life of Paul the First Hermit) by St. Jerome"},
            {"id":67,"name":"Peter of Verona","card":"Ten of Swords","classifier":"Swords - Air - Reason","emojis":"ü©∏, ‚úçÔ∏è","continent":"Europe","story":"An inquisitor martyred for his faith. His story ends in the ultimate betrayal and finality, yet with a final act of belief ('Credo'). This card's image of a definitive, painful ending that nevertheless cannot extinguish the spirit is reflected in his death.","virtues":"Courage, Faith, Forgiveness, Martyrdom","gender":"Male","location":"Verona, Italy","canon":"Biographies by Thomas of Leontino, Papal Bull of Canonization"},
            {"id":68,"name":"Raymond of Penyafort","card":"Justice (XI)","classifier":"Major Arcana","emojis":"‚öñÔ∏è, üìö","continent":"Europe","story":"A master of canon law who compiled the Decretals, bringing clarity, cause and effect, and fairness to Church law. He is an archetype of Justice, dedicated to truth, law, and ensuring that actions have clear and fair consequences.","virtues":"Prudence, Justice, Diligence, Humility","gender":"Male","location":"Penyafort, Catalonia (Spain)","canon":"Papal Bull of Canonization by Pope Clement VIII"},
            {"id":69,"name":"Rita of Cascia","card":"Five of Cups","classifier":"Cups - Water - Emotional","emojis":"üôè, ü•Ä","continent":"Europe","story":"A saint who endured immense personal loss‚Äîthe death of her difficult husband and two sons‚Äîyet found a way to turn from her grief toward God. She represents the sorrow and regret of this card, but also the potential for hope that remains.","virtues":"Patience, Forgiveness, Perseverance, Prayerfulness","gender":"Female","location":"Cascia, Italy","canon":"Papal Bull of Canonization by Pope Leo XIII"},
            {"id":70,"name":"Roch of Montpellier","card":"Eight of Pentacles","classifier":"Pentacles - Earth - Physical","emojis":"üêï, ‚ù§Ô∏è‚Äçü©π","continent":"Europe","story":"A saint who dedicated himself to the repetitive, diligent work of caring for plague victims. He represents the apprenticeship and mastery of a craft‚Äîin his case, the craft of healing and charity‚Äîthrough dedication and hard work.","virtues":"Charity, Healing, Perseverance, Compassion","gender":"Male","location":"Montpellier, France","canon":"The Golden Legend, Acta breviora"},
            {"id":71,"name":"Rose of Lima","card":"Four of Cups","classifier":"Cups - Water - Emotional","emojis":"üåπ, ü§î","continent":"South America","story":"A mystic who deliberately withdrew from worldly society and offers of marriage to focus on a life of contemplation and penance. This turning inward, rejecting what is offered by the world to seek something more, is the essence of this card.","virtues":"Piety, Purity, Mortification, Devotion","gender":"Female","location":"Lima, Peru","canon":"Papal Bull of Canonization by Pope Clement X"},
            {"id":72,"name":"Stephen of Hungary","card":"The Emperor (IV)","classifier":"Major Arcana","emojis":"üá≠üá∫, üëë","continent":"Europe","story":"The first King of Hungary, who established the structure of a Christian nation, bringing order, law, and a stable foundation to his people. He is a clear archetype of the worldly ruler and father figure of the Emperor card.","virtues":"Leadership, Faith, Justice, Nation-building","gender":"Male","location":"Kingdom of Hungary","canon":"Hartvic's Life of St. Stephen"},
            {"id":73,"name":"Teresa of √Åvila","card":"Queen of Cups","classifier":"Cups - Water - Emotional","emojis":"üè∞, ‚ù§Ô∏è","continent":"Europe","story":"A master of mystical theology who mapped the 'Interior Castle' of the soul. She was emotionally and spiritually intuitive, compassionate, and in control of the deep waters of contemplation, making her the archetype of the Queen of Cups.","virtues":"Prayerfulness, Determination, Reform, Mysticism","gender":"Female","location":"√Åvila, Spain","canon":"The Interior Castle, The Way of Perfection, The Life of Teresa of Jesus"},
            {"id":74,"name":"Teresa of Calcutta","card":"Ten of Cups","classifier":"Cups - Water - Emotional","emojis":"üíô, üòä","continent":"Asia","story":"While her work was in a place of great suffering, her ultimate goal was to restore divine love and harmony to the 'poorest of the poor.' She sought to create moments of radiant emotional fulfillment and connection, the very picture of the Ten of Cups.","virtues":"Compassion, Service, Charity, Humility","gender":"Female","location":"Calcutta (Kolkata), India","canon":"Letters, Constitutions of the Missionaries of Charity, press coverage"},
            {"id":75,"name":"Th√©r√®se of Lisieux","card":"The Lovers (VI)","classifier":"Major Arcana","emojis":"ü•Ä, ‚ù§Ô∏è","continent":"Europe","story":"Her 'Little Way' is all about making a conscious, heartfelt choice to align oneself with divine love in every small action. Her life reflects the core meaning of the Lovers card: establishing personal values and achieving union through a profound choice.","virtues":"Humility, Simplicity, Love, Spiritual Childhood","gender":"Female","location":"Lisieux, France","canon":"The Story of a Soul (L'histoire d'une √¢me)"},
            {"id":76,"name":"Thomas Aquinas","card":"King of Swords","classifier":"Swords - Air - Reason","emojis":"üêÇ, üß†","continent":"Europe","story":"One of the greatest intellectual minds in history, his Summa Theologica is a monument to reason, logic, and intellectual authority. He is the ultimate master of the realm of thought, embodying the intellectual power and clarity of the King of Swords.","virtues":"Intellect, Wisdom, Humility, Diligence","gender":"Male","location":"Aquino (Roccasecca), Italy","canon":"Summa Theologica, Summa contra Gentiles"},
            {"id":77,"name":"Thomas Becket","card":"The Hanged Man (XII)","classifier":"Major Arcana","emojis":"ü©∏, ‚õ™","continent":"Europe","story":"The Archbishop who willingly sacrificed his power, comfort, and ultimately his life by suspending himself in opposition to the king. His martyrdom was an act of surrender to a higher principle, seeing the world from a different, spiritual perspective.","virtues":"Fortitude, Principle, Justice, Martyrdom","gender":"Male","location":"Canterbury, England","canon":"Biographies by Edward Grim and William Fitzstephen"},
            {"id":78,"name":"Vincent de Paul","card":"Three of Pentacles","classifier":"Pentacles - Earth - Physical","emojis":"‚ù§Ô∏è‚Äçü©π, ü§ù","continent":"Europe","story":"A master organizer who excelled at teamwork and collaboration, founding the Vincentians and co-founding the Daughters of Charity. He represents the material success that comes from working together on a meaningful project.","virtues":"Charity, Compassion, Service, Organization","gender":"Male","location":"Pouy, France","canon":"Correspondence, conference notes, biographies"},
            {"id":79,"name":"Vincent Ferrer","card":"The Tower (XVI)","classifier":"Major Arcana","emojis":"üî•, üó£Ô∏è","continent":"Europe","story":"An apocalyptic preacher known as the 'Angel of the Apocalypse' who traveled Europe warning of divine judgment. His sermons were designed to be like lightning bolts, shattering old assumptions and bringing about sudden, dramatic change in his listeners.","virtues":"Preaching, Repentance, Zeal, Miracles","gender":"Male","location":"Valencia, Spain","canon":"Sermons, biographies by Peter Ranzano"},
            {"id":80,"name":"Wenceslaus of Bohemia","card":"Knight of Pentacles","classifier":"Pentacles - Earth - Physical","emojis":"üëë, ‚ùÑÔ∏è","continent":"Europe","story":"The 'Good King' of the carol who undertook a practical, physical journey through the snow to bring aid to a poor peasant. He is an archetype of dutiful service, reliability, and the patient, hardworking nature of this knight.","virtues":"Piety, Justice, Good Governance, Faith","gender":"Male","location":"Duchy of Bohemia (Czech Rep.)","canon":"Christian's Legend (Vita et passio sancti Venceslai et sancte Ludmile ave eius)"}
        ];

        // Three.js Setup
        let scene, camera, renderer;
        let cards = [];
        let viewMode = 'reading'; // 'reading' or 'gallery'
        let autoPlayEnabled = false;
        let idleTimer = null;
        let countdownInterval = null;
        let countdownValue = 30;
        let currentReading = [];
        let raycaster, mouse;

        // Camera control variables
        let cameraTarget = new THREE.Vector3(0, 0, 0);
        let cameraPosition = new THREE.Vector3(0, 8, 15);
        let cameraRotationX = 0;
        let cameraRotationY = 0;
        let keys = {};

        // Focused card state
        let focusedCard = null;
        let originalCameraPosition = new THREE.Vector3();
        let originalCameraTarget = new THREE.Vector3();
        let originalCameraRotationX = 0;
        let originalCameraRotationY = 0;
        let isFocused = false;

        function init() {
            // Scene
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x0a0015);
            scene.fog = new THREE.Fog(0x0a0015, 25, 60);

            // Camera
            camera = new THREE.PerspectiveCamera(
                50,
                window.innerWidth / window.innerHeight,
                0.1,
                1000
            );
            camera.position.copy(cameraPosition);
            camera.lookAt(cameraTarget);

            // Renderer
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            document.getElementById('container').appendChild(renderer.domElement);

            // Raycaster for mouse interaction
            raycaster = new THREE.Raycaster();
            mouse = new THREE.Vector2();

            // Lighting
            const ambientLight = new THREE.AmbientLight(0x404070, 0.4);
            scene.add(ambientLight);

            const frontSpot = new THREE.SpotLight(0xffd700, 1.2);
            frontSpot.position.set(0, 12, 12);
            frontSpot.target.position.set(0, 0, 0);
            frontSpot.angle = Math.PI / 6;
            frontSpot.penumbra = 0.3;
            frontSpot.castShadow = true;
            frontSpot.shadow.mapSize.width = 2048;
            frontSpot.shadow.mapSize.height = 2048;
            scene.add(frontSpot);
            scene.add(frontSpot.target);

            const leftSpot = new THREE.SpotLight(0x9966ff, 0.8);
            leftSpot.position.set(-10, 8, 5);
            leftSpot.target.position.set(0, 0, 0);
            leftSpot.angle = Math.PI / 5;
            leftSpot.penumbra = 0.4;
            leftSpot.castShadow = true;
            scene.add(leftSpot);
            scene.add(leftSpot.target);

            const rightSpot = new THREE.SpotLight(0x00ddff, 0.8);
            rightSpot.position.set(10, 8, 5);
            rightSpot.target.position.set(0, 0, 0);
            rightSpot.angle = Math.PI / 5;
            rightSpot.penumbra = 0.4;
            rightSpot.castShadow = true;
            scene.add(rightSpot);
            scene.add(rightSpot.target);

            const rimLight = new THREE.DirectionalLight(0xffffff, 0.4);
            rimLight.position.set(0, 5, -15);
            scene.add(rimLight);

            // Particle background
            createStarfield();

            // Ground plane
            const groundGeometry = new THREE.CircleGeometry(40, 64);
            const groundMaterial = new THREE.MeshStandardMaterial({
                color: 0x1a0033,
                roughness: 0.9,
                metalness: 0.1
            });
            const ground = new THREE.Mesh(groundGeometry, groundMaterial);
            ground.rotation.x = -Math.PI / 2;
            ground.position.y = -4;
            ground.receiveShadow = true;
            scene.add(ground);

            // Event listeners
            window.addEventListener('resize', onWindowResize);
            renderer.domElement.addEventListener('click', onCardClick);
            renderer.domElement.addEventListener('mousemove', onMouseMove);
            
            // Keyboard controls
            window.addEventListener('keydown', (e) => { keys[e.key.toLowerCase()] = true; });
            window.addEventListener('keyup', (e) => { keys[e.key.toLowerCase()] = false; });

            // Mouse drag for rotation
            let isDragging = false;
            let previousMousePosition = { x: 0, y: 0 };
            renderer.domElement.addEventListener('mousedown', (e) => {
                isDragging = true;
                previousMousePosition = { x: e.clientX, y: e.clientY };
            });
            renderer.domElement.addEventListener('mousemove', (e) => {
                if (isDragging && !isFocused) {
                    const deltaX = e.clientX - previousMousePosition.x;
                    const deltaY = e.clientY - previousMousePosition.y;
                    
                    cameraRotationY -= deltaX * 0.005;
                    cameraRotationX -= deltaY * 0.005;
                    cameraRotationX = Math.max(-Math.PI / 3, Math.min(Math.PI / 3, cameraRotationX));
                    
                    previousMousePosition = { x: e.clientX, y: e.clientY };
                }
            });
            renderer.domElement.addEventListener('mouseup', () => { isDragging = false; });
            renderer.domElement.addEventListener('mouseleave', () => { isDragging = false; });

            // Wheel zoom
            renderer.domElement.addEventListener('wheel', (e) => {
                if (isFocused) return; // Don't zoom when focused
                
                e.preventDefault();
                const zoomSpeed = 0.1;
                const direction = camera.position.clone().sub(cameraTarget).normalize();
                camera.position.addScaledVector(direction, e.deltaY * zoomSpeed);
            });

            // Idle detection
            resetIdleTimer();
            window.addEventListener('mousemove', resetIdleTimer);
            window.addEventListener('keydown', resetIdleTimer);
            window.addEventListener('click', resetIdleTimer);

            animate();
        }

        function createStarfield() {
            const starsGeometry = new THREE.BufferGeometry();
            const starsMaterial = new THREE.PointsMaterial({
                color: 0xffffff,
                size: 0.15,
                transparent: true,
                opacity: 0.8,
                sizeAttenuation: true
            });
            const starsVertices = [];
            for (let i = 0; i < 2000; i++) {
                const x = (Math.random() - 0.5) * 150;
                const y = (Math.random() - 0.5) * 150;
                const z = (Math.random() - 0.5) * 150;
                starsVertices.push(x, y, z);
            }
            starsGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starsVertices, 3));
            const stars = new THREE.Points(starsGeometry, starsMaterial);
            scene.add(stars);
        }

        // Text wrapping function
        function wrapText(ctx, text, x, y, maxWidth, lineHeight) {
            const words = text.split(' ');
            let line = '';
            let testLine = '';
            let lineArray = [];

            for (let n = 0; n < words.length; n++) {
                testLine = line + words[n] + ' ';
                const metrics = ctx.measureText(testLine);
                if (metrics.width > maxWidth && n > 0) {
                    lineArray.push(line);
                    line = words[n] + ' ';
                } else {
                    line = testLine;
                }
            }
            lineArray.push(line);

            // Draw the lines
            for (let k = 0; k < lineArray.length; k++) {
                ctx.fillText(lineArray[k], x, y + (k * lineHeight));
            }
            
            return lineArray.length * lineHeight; // Return total height used
        }

        function createCard(saintData, position) {
            const group = new THREE.Group();

            // LARGER card dimensions for better text display
            const width = 3.5;
            const height = 5.5;
            const depth = 0.05;

            // Card body
            const cardGeometry = new THREE.BoxGeometry(width, height, depth);
            const cardMaterial = new THREE.MeshStandardMaterial({
                color: 0x1a1a2e,
                roughness: 0.2,
                metalness: 0.8
            });
            const cardMesh = new THREE.Mesh(cardGeometry, cardMaterial);
            cardMesh.castShadow = true;
            cardMesh.receiveShadow = true;
            group.add(cardMesh);

            // Orbiting light
            const lightColor = getSuitLightColor(saintData);
            const cardLight = new THREE.PointLight(lightColor, 0.8, 5);
            cardLight.castShadow = false;
            group.add(cardLight);

            // IMPROVED Card face with text
            const canvas = document.createElement('canvas');
            canvas.width = 1024;  // Higher resolution
            canvas.height = 1536; // Higher resolution
            const ctx = canvas.getContext('2d');

            // Background gradient
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#2a0050');
            gradient.addColorStop(0.5, '#4a0080');
            gradient.addColorStop(1, '#2a0050');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Outer border
            ctx.strokeStyle = '#ffd700';
            ctx.lineWidth = 12;
            ctx.strokeRect(20, 20, canvas.width - 40, canvas.height - 40);

            // Inner decorative border
            ctx.strokeStyle = '#ffed4e';
            ctx.lineWidth = 3;
            ctx.strokeRect(35, 35, canvas.width - 70, canvas.height - 70);

            // HEADER SECTION - Single line layout
            let currentY = 90;

            // Parse emojis to put on sides
            const emojiParts = saintData.emojis.split(',').map(e => e.trim());
            const leftEmoji = emojiParts[0] || '‚ú®';
            const rightEmoji = emojiParts[1] || '‚ú®';

            // Left emoji
            ctx.font = '60px Arial';
            ctx.textAlign = 'left';
            ctx.fillText(leftEmoji, 80, currentY);

            // Saint name (centered, single line)
            ctx.fillStyle = '#ffffff';
            ctx.font = 'bold 48px Georgia';
            ctx.textAlign = 'center';
            ctx.fillText(saintData.name, canvas.width / 2, currentY);

            // Right emoji
            ctx.font = '60px Arial';
            ctx.textAlign = 'right';
            ctx.fillText(rightEmoji, canvas.width - 80, currentY);

            currentY += 75;

            // Tarot card name - position based on type
            ctx.fillStyle = '#ffd700';
            ctx.font = 'italic 58px Georgia';
            
            // Major Arcana stays centered, Suites go right
            const isMajorArcana = saintData.classifier.includes('Major Arcana');
            if (isMajorArcana) {
                ctx.textAlign = 'center';
                ctx.fillText(saintData.card, canvas.width / 2, currentY);
            } else {
                ctx.textAlign = 'right';
                ctx.fillText(saintData.card, canvas.width - 80, currentY);
            }
            currentY += 70;

            // Classifier - match alignment with card title
            ctx.fillStyle = '#ffed4e';
            ctx.font = '40px Georgia';
            
            if (isMajorArcana) {
                ctx.textAlign = 'center';
                ctx.fillText(saintData.classifier, canvas.width / 2, currentY);
            } else {
                ctx.textAlign = 'right';
                ctx.fillText(saintData.classifier, canvas.width - 80, currentY);
            }
            currentY += 85;

            // STORY SECTION (Main text on card) - 30% larger!
            ctx.fillStyle = '#e0e0ff';
            ctx.font = 'bold 50px Georgia';
            ctx.textAlign = 'left';
            const storyPadding = 60;
            const maxTextWidth = canvas.width - (storyPadding * 2);
            
            // Add story with wrapping
            const storyHeight = wrapText(ctx, saintData.story, storyPadding, currentY, maxTextWidth, 62);
            currentY += storyHeight + 40;

            // VIRTUES at bottom - smaller to stay on one line
            ctx.fillStyle = '#aaccff';
            ctx.font = 'bold 36px Georgia';
            ctx.textAlign = 'center';
            ctx.fillText('‚ú® ' + saintData.virtues, canvas.width / 2, canvas.height - 100);

            // Continent marker
            ctx.fillStyle = '#8899ff';
            ctx.font = '32px Georgia';
            ctx.fillText(saintData.continent, canvas.width / 2, canvas.height - 50);

            const texture = new THREE.CanvasTexture(canvas);
            const faceMaterial = new THREE.MeshStandardMaterial({
                map: texture,
                roughness: 0.3,
                metalness: 0.4
            });
            const faceGeometry = new THREE.PlaneGeometry(width - 0.02, height - 0.02);
            const faceMesh = new THREE.Mesh(faceGeometry, faceMaterial);
            faceMesh.position.z = depth / 2 + 0.001;
            group.add(faceMesh);

            // Back face
            const backCanvas = document.createElement('canvas');
            backCanvas.width = 1024;
            backCanvas.height = 1536;
            const backCtx = backCanvas.getContext('2d');
            
            drawCardBack(backCtx, backCanvas.width, backCanvas.height);
            
            const backTexture = new THREE.CanvasTexture(backCanvas);
            const backMaterial = new THREE.MeshStandardMaterial({
                map: backTexture,
                roughness: 0.3,
                metalness: 0.4
            });
            const backMesh = new THREE.Mesh(faceGeometry, backMaterial);
            backMesh.position.z = -depth / 2 - 0.001;
            backMesh.rotation.y = Math.PI;
            group.add(backMesh);

            // Glow effect
            const glowGeometry = new THREE.PlaneGeometry(width + 0.3, height + 0.3);
            const glowMaterial = new THREE.MeshBasicMaterial({
                color: 0xffd700,
                transparent: true,
                opacity: 0,
                side: THREE.DoubleSide
            });
            const glow = new THREE.Mesh(glowGeometry, glowMaterial);
            glow.position.z = depth / 2 + 0.002;
            group.add(glow);

            group.position.copy(position);
            group.userData = {
                saintData: saintData,
                revealed: false,
                glow: glow,
                cardLight: cardLight,
                lightAngle: Math.random() * Math.PI * 2,
                originalRotation: group.rotation.clone()
            };

            return group;
        }

        function getSuitLightColor(saintData) {
            if (saintData.classifier.includes('Wands')) {
                return 0xff6600;
            } else if (saintData.classifier.includes('Cups')) {
                return 0x6699ff;
            } else if (saintData.classifier.includes('Swords')) {
                return 0xccccff;
            } else if (saintData.classifier.includes('Pentacles')) {
                return 0xffcc00;
            } else {
                return 0xffd700;
            }
        }

        function drawCardBack(ctx, width, height) {
            // Background
            const gradient = ctx.createRadialGradient(width / 2, height / 2, 0, width / 2, height / 2, width / 2);
            gradient.addColorStop(0, '#4a0080');
            gradient.addColorStop(1, '#1a0033');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, width, height);

            // Border
            ctx.strokeStyle = '#ffd700';
            ctx.lineWidth = 12;
            ctx.strokeRect(20, 20, width - 40, height - 40);

            // Pattern
            ctx.save();
            ctx.translate(width / 2, height / 2);
            
            for (let i = 0; i < 12; i++) {
                ctx.save();
                ctx.rotate((i * Math.PI * 2) / 12);
                ctx.strokeStyle = 'rgba(255, 215, 0, 0.4)';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(0, 0);
                ctx.lineTo(0, -height / 3);
                ctx.stroke();
                
                ctx.beginPath();
                ctx.arc(0, -height / 3, 30, 0, Math.PI * 2);
                ctx.stroke();
                ctx.restore();
            }
            
            ctx.restore();

            // Center symbol
            ctx.fillStyle = '#ffd700';
            ctx.font = 'bold 120px Georgia';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('‚≠ê', width / 2, height / 2);
        }

        function drawCards() {
            clearCards();
            currentReading = [];

            if (viewMode === 'reading') {
                const shuffled = [...saints_data].sort(() => Math.random() - 0.5);
                const selected = shuffled.slice(0, 3);
                const positions = [
                    new THREE.Vector3(-5.5, 0, 0),
                    new THREE.Vector3(0, 0, 0),
                    new THREE.Vector3(5.5, 0, 0)
                ];

                selected.forEach((saint, i) => {
                    const card = createCard(saint, positions[i]);
                    cards.push(card);
                    currentReading.push(saint);
                    scene.add(card);

                    card.rotation.y = 0;
                    card.userData.revealed = true;

                    // Animate entrance
                    card.position.y = 12;
                    card.rotation.x = Math.PI * 2;
                    animateCardEntrance(card, positions[i], i * 250);
                });
            } else {
                // Gallery mode
                const cols = 8;
                const rows = Math.ceil(saints_data.length / cols);
                const spacing = 4.2;
                const offsetX = -(cols - 1) * spacing / 2;
                const offsetZ = -(rows - 1) * spacing / 2;

                saints_data.forEach((saint, index) => {
                    const row = Math.floor(index / cols);
                    const col = index % cols;
                    const position = new THREE.Vector3(
                        offsetX + col * spacing,
                        0,
                        offsetZ + row * spacing
                    );

                    const card = createCard(saint, position);
                    cards.push(card);
                    scene.add(card);

                    card.rotation.y = 0;
                    card.userData.revealed = true;

                    card.position.y = 18;
                    card.rotation.x = Math.PI * 3;
                    animateCardEntrance(card, position, index * 30);
                });
            }
        }

        function animateCardEntrance(card, targetPos, delay) {
            setTimeout(() => {
                const startY = card.position.y;
                const startRotX = card.rotation.x;
                const duration = 1200;
                const startTime = Date.now();

                function animate() {
                    const elapsed = Date.now() - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    const eased = 1 - Math.pow(1 - progress, 3);

                    card.position.y = startY + (targetPos.y - startY) * eased;
                    card.rotation.x = startRotX + (0 - startRotX) * eased;

                    if (progress < 1) {
                        requestAnimationFrame(animate);
                    } else {
                        card.userData.baseY = targetPos.y;
                    }
                }
                animate();
            }, delay);
        }

        function clearCards() {
            cards.forEach(card => scene.remove(card));
            cards = [];
            currentReading = [];
            
            // Clear focused state
            if (isFocused) {
                isFocused = false;
                focusedCard = null;
            }
        }

        function toggleViewMode() {
            viewMode = viewMode === 'reading' ? 'gallery' : 'reading';
            
            // Update mode indicator to show current mode
            document.getElementById('mode-indicator').textContent = 
                viewMode === 'reading' ? 'üé¥ 3-Card Reading' : 'üìö Full Gallery (80 Saints)';
            
            // Update button to show what it will switch TO
            const btn = event.target;
            btn.textContent = viewMode === 'reading' ? 'üìö Switch to Gallery' : 'üé¥ Switch to Reading';
            
            // Adjust camera for different modes
            if (viewMode === 'gallery') {
                cameraPosition.set(0, 35, 40); // Much further back for gallery
                cameraRotationX = -0.4;
                cameraRotationY = 0;
            } else {
                cameraPosition.set(0, 8, 15);
                cameraRotationX = 0;
                cameraRotationY = 0;
            }
            
            drawCards();
        }

        function toggleAutoPlay() {
            autoPlayEnabled = !autoPlayEnabled;
            const btn = event.target;
            btn.textContent = autoPlayEnabled ? '‚è±Ô∏è Auto-Play: ON' : '‚è±Ô∏è Auto-Play: OFF';
            
            if (!autoPlayEnabled) {
                stopCountdown();
            } else {
                resetIdleTimer();
            }
        }

        function resetReading() {
            clearCards();
            stopCountdown();
        }

        function resetIdleTimer() {
            if (!autoPlayEnabled) return;
            stopCountdown();
            
            idleTimer = setTimeout(() => {
                startCountdown();
            }, 30000);
        }

        function startCountdown() {
            countdownValue = 30;
            const timerElement = document.getElementById('countdown-timer');
            timerElement.textContent = countdownValue;
            timerElement.classList.add('active');

            countdownInterval = setInterval(() => {
                countdownValue--;
                timerElement.textContent = countdownValue;

                if (countdownValue <= 0) {
                    stopCountdown();
                    timerElement.classList.remove('active');
                    drawCards();
                    resetIdleTimer();
                }
            }, 1000);
        }

        function stopCountdown() {
            if (idleTimer) {
                clearTimeout(idleTimer);
                idleTimer = null;
            }
            if (countdownInterval) {
                clearInterval(countdownInterval);
                countdownInterval = null;
            }
            document.getElementById('countdown-timer').classList.remove('active');
        }

        function onCardClick(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(cards, true);

            if (intersects.length > 0) {
                const card = intersects[0].object.parent;
                
                // If clicking the same focused card, unfocus
                if (isFocused && focusedCard === card) {
                    unfocusCard();
                } 
                // If clicking a different card while focused, switch focus
                else if (isFocused && focusedCard !== card) {
                    unfocusCard();
                    setTimeout(() => focusOnCard(card), 600);
                }
                // If not focused, focus on this card
                else {
                    focusOnCard(card);
                }
            } else if (isFocused) {
                // Clicked empty space while focused - unfocus
                unfocusCard();
            }
        }

        function focusOnCard(card) {
            focusedCard = card;
            isFocused = true;

            // Store original camera state including rotation
            originalCameraPosition.copy(cameraPosition);
            originalCameraTarget.copy(cameraTarget);
            originalCameraRotationX = cameraRotationX;
            originalCameraRotationY = cameraRotationY;

            // Calculate position directly in front of card at perfect fullscreen distance
            const cardWorldPos = new THREE.Vector3();
            card.getWorldPosition(cardWorldPos);

            // Position camera 9 units in front of card (adjusted for proper fullscreen)
            // Card faces forward (z-axis), so camera goes positive z
            const targetCameraPos = new THREE.Vector3(
                cardWorldPos.x,
                cardWorldPos.y,
                cardWorldPos.z + 9
            );

            // Animate camera to card
            animateCameraToPosition(targetCameraPos, cardWorldPos, 800);

            // Pulse effect on card
            highlightCard(card);
        }

        function unfocusCard() {
            if (!isFocused) return;

            // Animate back to original position and rotation
            animateCameraToPosition(originalCameraPosition, originalCameraTarget, 800, true);

            focusedCard = null;
            isFocused = false;
        }

        function animateCameraToPosition(targetPos, targetLookAt, duration, restoreRotation = false) {
            const startPos = camera.position.clone();
            const startLookAt = cameraTarget.clone();
            const startRotX = cameraRotationX;
            const startRotY = cameraRotationY;
            const startTime = Date.now();

            function animate() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // Smooth easing
                const eased = progress < 0.5 
                    ? 2 * progress * progress 
                    : 1 - Math.pow(-2 * progress + 2, 2) / 2;

                // Interpolate position
                camera.position.lerpVectors(startPos, targetPos, eased);
                cameraTarget.lerpVectors(startLookAt, targetLookAt, eased);
                
                // Handle rotation based on whether we're focusing or unfocusing
                if (restoreRotation) {
                    // Unfocusing - restore original rotation
                    cameraRotationX = startRotX + (originalCameraRotationX - startRotX) * eased;
                    cameraRotationY = startRotY + (originalCameraRotationY - startRotY) * eased;
                } else if (isFocused) {
                    // Focusing - reset rotation to zero for straight-on view
                    cameraRotationX = startRotX * (1 - eased);
                    cameraRotationY = startRotY * (1 - eased);
                }
                
                // Update actual camera position variable
                cameraPosition.copy(targetPos);
                
                // Look at target
                camera.lookAt(cameraTarget);

                if (progress < 1) {
                    requestAnimationFrame(animate);
                }
            }
            animate();
        }

        function onMouseMove(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(cards, true);

            // Reset all glows
            cards.forEach(card => {
                if (card.userData.glow) {
                    card.userData.glow.material.opacity = 0;
                }
            });

            if (intersects.length > 0) {
                const card = intersects[0].object.parent;
                if (card.userData.glow) {
                    card.userData.glow.material.opacity = 0.4;
                }
                document.body.style.cursor = 'pointer';
            } else {
                document.body.style.cursor = 'default';
            }
        }

        function highlightCard(card) {
            const originalScale = card.scale.clone();
            const pulseScale = 1.15;
            const duration = 400;
            const startTime = Date.now();

            function animatePulse() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                if (progress < 0.5) {
                    const scale = 1 + (pulseScale - 1) * (progress * 2);
                    card.scale.setScalar(scale);
                } else {
                    const scale = pulseScale - (pulseScale - 1) * ((progress - 0.5) * 2);
                    card.scale.setScalar(scale);
                }

                if (progress < 1) {
                    requestAnimationFrame(animatePulse);
                } else {
                    card.scale.copy(originalScale);
                }
            }
            animatePulse();
        }

        function updateCameraPosition() {
            // Don't update if focused on a card
            if (isFocused) {
                camera.lookAt(cameraTarget);
                return;
            }

            const rotatedPos = new THREE.Vector3();
            rotatedPos.x = cameraPosition.x * Math.cos(cameraRotationY) - cameraPosition.z * Math.sin(cameraRotationY);
            rotatedPos.z = cameraPosition.x * Math.sin(cameraRotationY) + cameraPosition.z * Math.cos(cameraRotationY);
            rotatedPos.y = cameraPosition.y;

            const distance = Math.sqrt(rotatedPos.x * rotatedPos.x + rotatedPos.z * rotatedPos.z);
            rotatedPos.y = distance * Math.tan(cameraRotationX) + cameraPosition.y;

            camera.position.copy(rotatedPos);
            camera.lookAt(cameraTarget);
        }

        function handleKeyboardControls() {
            // ESC key to unfocus
            if (keys['escape'] && isFocused) {
                unfocusCard();
                keys['escape'] = false;
                return;
            }

            // Don't allow camera controls when focused on a card
            if (isFocused) return;

            const baseSpeed = keys['shift'] ? 0.5 : (keys['alt'] ? 0.1 : 0.25);

            if (keys['w']) {
                const direction = camera.position.clone().sub(cameraTarget).normalize();
                camera.position.addScaledVector(direction, -baseSpeed);
            }
            if (keys['s']) {
                const direction = camera.position.clone().sub(cameraTarget).normalize();
                camera.position.addScaledVector(direction, baseSpeed);
            }

            if (keys['a']) cameraRotationY += 0.02 * (keys['shift'] ? 2 : 1);
            if (keys['d']) cameraRotationY -= 0.02 * (keys['shift'] ? 2 : 1);
            if (keys['q']) cameraRotationX += 0.02 * (keys['shift'] ? 2 : 1);
            if (keys['e']) cameraRotationX -= 0.02 * (keys['shift'] ? 2 : 1);

            if (keys['z']) {
                cameraPosition.set(0, 8, 15);
                cameraRotationX = 0;
                cameraRotationY = 0;
            }
            if (keys['x']) {
                cameraPosition.set(15, 8, 0);
                cameraRotationX = 0;
                cameraRotationY = -Math.PI / 2;
            }
            if (keys['c']) {
                cameraPosition.set(0, 15, 0);
                cameraRotationX = -Math.PI / 3;
                cameraRotationY = 0;
            }

            cameraRotationX = Math.max(-Math.PI / 2, Math.min(Math.PI / 3, cameraRotationX));
        }

        function animate() {
            requestAnimationFrame(animate);
            handleKeyboardControls();
            updateCameraPosition();

            const time = Date.now() * 0.001;
            cards.forEach((card, index) => {
                if (card.userData.cardLight) {
                    const orbitRadius = 1.5;
                    const orbitSpeed = 0.5;
                    card.userData.lightAngle += 0.01 * orbitSpeed;
                    
                    const lightX = Math.cos(card.userData.lightAngle) * orbitRadius;
                    const lightY = Math.sin(card.userData.lightAngle * 1.3) * 0.5;
                    const lightZ = Math.sin(card.userData.lightAngle) * orbitRadius;
                    
                    card.userData.cardLight.position.set(lightX, lightY, lightZ);
                }

                const baseY = card.userData.baseY || 0;
                card.position.y = baseY + Math.sin(time * 0.5 + index * 0.3) * 0.08;
            });

            renderer.render(scene, camera);
        }

        function setCameraView(viewType) {
            const targetPos = new THREE.Vector3();
            let targetRotX = 0;
            let targetRotY = 0;

            switch(viewType) {
                case 'front':
                    if (viewMode === 'reading') {
                        targetPos.set(0, 8, 15);
                    } else {
                        targetPos.set(0, 20, 40); // Further back for gallery
                    }
                    targetRotX = 0;
                    targetRotY = 0;
                    break;
                
                case 'isometric':
                    if (viewMode === 'reading') {
                        targetPos.set(12, 12, 12);
                    } else {
                        targetPos.set(25, 25, 25); // Further back for gallery
                    }
                    targetRotX = -0.3;
                    targetRotY = -Math.PI / 4;
                    break;
                
                case 'top':
                    if (viewMode === 'reading') {
                        targetPos.set(0, 20, 0.1);
                    } else {
                        targetPos.set(0, 45, 0.1); // Much higher for gallery
                    }
                    targetRotX = -Math.PI / 2 + 0.1;
                    targetRotY = 0;
                    break;
                
                case 'back':
                    if (viewMode === 'reading') {
                        targetPos.set(0, 8, -15);
                    } else {
                        targetPos.set(0, 20, -40); // Further back for gallery
                    }
                    targetRotX = 0;
                    targetRotY = Math.PI;
                    break;
            }

            const startPos = cameraPosition.clone();
            const startRotX = cameraRotationX;
            const startRotY = cameraRotationY;
            const duration = 1000;
            const startTime = Date.now();

            function animateTransition() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const eased = progress < 0.5 
                    ? 2 * progress * progress 
                    : 1 - Math.pow(-2 * progress + 2, 2) / 2;

                cameraPosition.lerpVectors(startPos, targetPos, eased);
                cameraRotationX = startRotX + (targetRotX - startRotX) * eased;
                cameraRotationY = startRotY + (targetRotY - startRotY) * eased;

                if (progress < 1) {
                    requestAnimationFrame(animateTransition);
                }
            }
            animateTransition();
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        // Initialize
        init();
    </script>
</body>
</html>
